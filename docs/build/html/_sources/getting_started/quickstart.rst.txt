Quick Start
===========

This guide will help you run your first preprocessing pipeline.

Basic Workflow
--------------

1. **Prepare your data**: Organize DICOM series by subject
2. **Create configuration**: Use the preprocessing YAML config
3. **Run preprocessing**: Execute the preprocessing command

Data Preparation (demo_data)
----------------------------

The repository ships with example data under ``demo_data``:

- DICOM data: ``demo_data/dicom/sub001`` and ``demo_data/dicom/sub002``
- File list: ``demo_data/files_preprocessing.yaml``
- Config: ``demo_data/config_preprocessing.yaml``

You can use the demo data directly, or create your own ``files_preprocessing.yaml``
that lists the DICOM series for each subject and image phase.

Example snippet:

.. code-block:: yaml

   auto_select_first_file: false
   images:
     subj001:
       delay2: ./dicom/sub001/WATER_BHAxLAVA-Flex-2min_Series0012
       delay3: ./dicom/sub001/WATER_BHAxLAVA-Flex-3min_Series0014
       delay5: ./dicom/sub001/WATER_BHAxLAVA-Flex-5min_Series0016

Example Configuration
---------------------

Use the existing demo config ``demo_data/config_preprocessing.yaml``:

.. code-block:: yaml

   data_dir: ./files_preprocessing.yaml
   out_dir: ./preprocessed

   Preprocessing:
     dcm2nii:
       images: [delay2, delay3, delay5]
       dcm2niix_path: ./dcm2niix.exe
       compress: true
       anonymize: true

     resample:
       images: [delay2, delay3, delay5]
       target_spacing: [1.0, 1.0, 1.0]

     zscore_normalization:
       images: [delay2, delay3, delay5]
       only_inmask: false
       mask_key: mask

   save_options:
     save_intermediate: true

   processes: 2
   random_state: 42

Run Preprocessing
-----------------

.. code-block:: bash

   habit preprocess --config ./demo_data/config_preprocessing.yaml

Next Steps
----------

- Continue with :doc:`User Guide <../user_guide/index>` for habitat analysis
- Check :doc:`Tutorials <../tutorials/index>` for end-to-end workflows
