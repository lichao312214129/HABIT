

<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Machine Learning Module User Guide &mdash; HABIT 1.0.0 文档</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=9edc463e" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js?v=2d33a3a8"></script>
      <script src="../../_static/doctools.js?v=888ff710"></script>
      <script src="../../_static/sphinx_highlight.js?v=4825356b"></script>
      <script src="../../_static/translations.js?v=beaddf03"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="搜索" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            HABIT
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="搜索文档" aria-label="搜索文档" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="导航菜单">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user_guide.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../algorithms.html">Algorithms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development.html">Development Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">Changelog</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="移动版导航菜单" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">HABIT</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="页面导航">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Machine Learning Module User Guide</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/user_guide/application/app_of_machine_learning.rst.txt" rel="nofollow"> 查看页面源码</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="machine-learning-module-user-guide">
<h1>Machine Learning Module User Guide<a class="headerlink" href="#machine-learning-module-user-guide" title="此标题的永久链接"></a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="此标题的永久链接"></a></h2>
<p>The Machine Learning module provides a complete machine learning workflow, including data preprocessing, feature selection, model training, performance evaluation, and prediction on new data. It supports various machine learning algorithms for classification and regression tasks on radiomics features.</p>
</section>
<section id="quick-start">
<h2>Quick Start<a class="headerlink" href="#quick-start" title="此标题的永久链接"></a></h2>
<section id="using-cli-recommended">
<h3>Using CLI (Recommended)<a class="headerlink" href="#using-cli-recommended" title="此标题的永久链接"></a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Training mode</span>
habit<span class="w"> </span>ml<span class="w"> </span>--config<span class="w"> </span>config/config_machine_learning.yaml<span class="w"> </span>--mode<span class="w"> </span>train

<span class="c1"># Prediction mode</span>
habit<span class="w"> </span>ml<span class="w"> </span>--mode<span class="w"> </span>predict<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--model<span class="w"> </span>./ml_data/model_package.pkl<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--data<span class="w"> </span>./new_data.csv<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--output<span class="w"> </span>./predictions/

<span class="c1"># Prediction with evaluation</span>
habit<span class="w"> </span>ml<span class="w"> </span>--mode<span class="w"> </span>predict<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--model<span class="w"> </span>./ml_data/model_package.pkl<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--data<span class="w"> </span>./test_data.csv<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--evaluate
</pre></div>
</div>
</section>
<section id="using-traditional-scripts-legacy-compatible">
<h3>Using Traditional Scripts (Legacy Compatible)<a class="headerlink" href="#using-traditional-scripts-legacy-compatible" title="此标题的永久链接"></a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Training mode</span>
python<span class="w"> </span>scripts/app_of_machine_learning.py<span class="w"> </span>--config<span class="w"> </span>&lt;config_file_path&gt;<span class="w"> </span>--mode<span class="w"> </span>train

<span class="c1"># Prediction mode</span>
python<span class="w"> </span>scripts/app_of_machine_learning.py<span class="w"> </span>--config<span class="w"> </span>&lt;config_file_path&gt;<span class="w"> </span>--mode<span class="w"> </span>predict<span class="w"> </span>--model<span class="w"> </span>&lt;model_file_path&gt;<span class="w"> </span>--data<span class="w"> </span>&lt;data_file_path&gt;<span class="w"> </span><span class="o">[</span>--output<span class="w"> </span>&lt;output_dir&gt;<span class="o">]</span><span class="w"> </span><span class="o">[</span>--model_name<span class="w"> </span>&lt;model_name&gt;<span class="o">]</span><span class="w"> </span><span class="o">[</span>--evaluate<span class="o">]</span>
</pre></div>
</div>
</section>
</section>
<section id="command-line-arguments">
<h2>Command-Line Arguments<a class="headerlink" href="#command-line-arguments" title="此标题的永久链接"></a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--config</span></code></p></td>
<td><p>Path to the YAML configuration file (required)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--mode</span></code></p></td>
<td><p>Running mode: ‘train’ or ‘predict’, defaults to
‘train’</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--model</span></code></p></td>
<td><p>Path to the model package file (.pkl), required
for prediction mode</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--data</span></code></p></td>
<td><p>Path to the prediction data file (.csv), required
for prediction mode</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--output</span></code></p></td>
<td><p>Path to save prediction results</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--model_name</span></code></p></td>
<td><p>Specific model name to use for prediction</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--evaluate</span></code></p></td>
<td><p>Whether to evaluate model performance and
generate plots</p></td>
</tr>
</tbody>
</table>
</section>
<section id="configuration-file">
<h2>Configuration File<a class="headerlink" href="#configuration-file" title="此标题的永久链接"></a></h2>
<p>Configuration File Links:</p>
<ul class="simple">
<li><p><a class="reference external" href="../config/config_machine_learning.yaml">Current Configuration</a> - Concise configuration for actual use</p></li>
<li><p><a class="reference external" href="../config_templates/config_machine_learning_annotated.yaml">Annotated Template</a> - Complete English comments and instructions</p></li>
</ul>
</section>
<section id="configuration-file-format">
<h2>Configuration File Format<a class="headerlink" href="#configuration-file-format" title="此标题的永久链接"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">app_of_machine_learning.py</span></code> uses a YAML configuration file with the following main sections:</p>
<section id="basic-configuration">
<h3>Basic Configuration<a class="headerlink" href="#basic-configuration" title="此标题的永久链接"></a></h3>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Data and output paths</span>
<span class="nt">input</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;input_data_file_path&gt;</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;feature_name_prefix, defaults to empty&gt;</span>
<span class="w">    </span><span class="nt">subject_id_col</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;patient_id_column_name&gt;</span>
<span class="w">    </span><span class="nt">label_col</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;label_column_name&gt;</span>
<span class="w">    </span><span class="nt">features</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;optional_list_of_specific_features&gt;</span>
<span class="nt">output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;output_directory_path&gt;</span>
</pre></div>
</div>
</section>
<section id="data-splitting-configuration">
<h3>Data Splitting Configuration<a class="headerlink" href="#data-splitting-configuration" title="此标题的永久链接"></a></h3>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Data splitting method: &#39;random&#39;, &#39;stratified&#39;, or &#39;custom&#39;</span>
<span class="nt">split_method</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;split_method&gt;</span>
<span class="nt">test_size</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;test_set_proportion&gt;</span><span class="w">  </span><span class="c1"># Used when split_method is &#39;random&#39; or &#39;stratified&gt;</span>

<span class="c1"># Used when split_method is &#39;custom&#39;</span>
<span class="nt">train_ids_file</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;path_to_train_ids_file&gt;</span>
<span class="nt">test_ids_file</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;path_to_test_ids_file&gt;</span>
</pre></div>
</div>
</section>
<section id="feature-selection-configuration">
<h3>Feature Selection Configuration<a class="headerlink" href="#feature-selection-configuration" title="此标题的永久链接"></a></h3>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Multiple feature selection methods can be configured and will be executed sequentially</span>
<span class="nt">feature_selection_methods</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">method</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;feature_selection_method_name&gt;</span>
<span class="w">    </span><span class="nt">params</span><span class="p">:</span>
<span class="w">      </span><span class="nt">&lt;param1&gt;</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;value1&gt;</span>
<span class="w">      </span><span class="nt">&lt;param2&gt;</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;value2&gt;</span>
<span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">...</span>
</pre></div>
</div>
</section>
<section id="machine-learning-model-configuration">
<h3>Machine Learning Model Configuration<a class="headerlink" href="#machine-learning-model-configuration" title="此标题的永久链接"></a></h3>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">models</span><span class="p">:</span>
<span class="w">  </span><span class="nt">&lt;model_name&gt;</span><span class="p">:</span>
<span class="w">    </span><span class="nt">params</span><span class="p">:</span>
<span class="w">      </span><span class="nt">&lt;param1&gt;</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;value1&gt;</span>
<span class="w">      </span><span class="nt">&lt;param2&gt;</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;value2&gt;</span>
<span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">...</span>
</pre></div>
</div>
</section>
<section id="visualization-and-saving-configuration">
<h3>Visualization and Saving Configuration<a class="headerlink" href="#visualization-and-saving-configuration" title="此标题的永久链接"></a></h3>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">is_visualize</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;true_or_false_to_generate_performance_visualizations&gt;</span>
<span class="nt">is_save_model</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;true_or_false_to_save_the_trained_model&gt;</span>
</pre></div>
</div>
</section>
<section id="data-normalization-configuration">
<h3>Data Normalization Configuration<a class="headerlink" href="#data-normalization-configuration" title="此标题的永久链接"></a></h3>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Data standardization/normalization configuration</span>
<span class="nt">normalization</span><span class="p">:</span>
<span class="w">  </span><span class="nt">method</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;normalization_method_name&gt;</span><span class="w">  </span><span class="c1"># Supports various normalization methods</span>
<span class="w">  </span><span class="nt">params</span><span class="p">:</span>
<span class="w">    </span><span class="nt">&lt;param1&gt;</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;value1&gt;</span><span class="w">  </span><span class="c1"># Parameters for the specific normalization method</span>
<span class="w">    </span><span class="nt">&lt;param2&gt;</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;value2&gt;</span>
</pre></div>
</div>
</section>
</section>
<section id="supported-data-preprocessing-methods">
<h2>Supported Data Preprocessing Methods<a class="headerlink" href="#supported-data-preprocessing-methods" title="此标题的永久链接"></a></h2>
<section id="missing-value-imputation-methods">
<h3>Missing Value Imputation Methods<a class="headerlink" href="#missing-value-imputation-methods" title="此标题的永久链接"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">mean</span></code>: Mean imputation</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">median</span></code>: Median imputation</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">most_frequent</span></code>: Mode imputation</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">constant</span></code>: Constant value imputation</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">knn</span></code>: K-Nearest Neighbors imputation</p></li>
</ul>
</section>
</section>
<section id="supported-feature-selection-methods">
<h2>Supported Feature Selection Methods<a class="headerlink" href="#supported-feature-selection-methods" title="此标题的永久链接"></a></h2>
<section id="feature-selection-timing">
<h3>Feature Selection Timing<a class="headerlink" href="#feature-selection-timing" title="此标题的永久链接"></a></h3>
<p>All feature selection methods support a new parameter <code class="docutils literal notranslate"><span class="pre">before_z_score</span></code> to control whether the method is executed before or after Z-score normalization:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">before_z_score:</span> <span class="pre">true</span></code> - The method will be executed before Z-score normalization.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">before_z_score:</span> <span class="pre">false</span></code> - The method will be executed after Z-score normalization (default behavior).</p></li>
</ul>
<p>For variance-sensitive methods (like the variance threshold filter), it is recommended to set <code class="docutils literal notranslate"><span class="pre">before_z_score:</span> <span class="pre">true</span></code>, as Z-score normalization sets the variance of all features to 1, rendering the variance filter ineffective.</p>
</section>
<section id="icc-intraclass-correlation-coefficient-method">
<h3>ICC (Intraclass Correlation Coefficient) Method<a class="headerlink" href="#icc-intraclass-correlation-coefficient-method" title="此标题的永久链接"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">method:</span> <span class="pre">'icc'</span></code>: Selects features based on their reproducibility.</p></li>
<li><p>Parameters:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">icc_results</span></code>: Path to the ICC results JSON file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">keys</span></code>: Keys of the ICC results to use.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">threshold</span></code>: Minimum ICC value to retain a feature (0.0-1.0).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">before_z_score</span></code>: Whether to execute before Z-score normalization, defaults to false.</p></li>
</ul>
</li>
</ul>
</section>
<section id="vif-variance-inflation-factor-method">
<h3>VIF (Variance Inflation Factor) Method<a class="headerlink" href="#vif-variance-inflation-factor-method" title="此标题的永久链接"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">method:</span> <span class="pre">'vif'</span></code>: Removes features with high multicollinearity.</p></li>
<li><p>Parameters:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">max_vif</span></code>: Maximum allowed VIF value.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">visualize</span></code>: Whether to generate a visualization of VIF values.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">before_z_score</span></code>: Whether to execute before Z-score normalization, defaults to false.</p></li>
</ul>
</li>
</ul>
</section>
<section id="correlation-method">
<h3>Correlation Method<a class="headerlink" href="#correlation-method" title="此标题的永久链接"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">method:</span> <span class="pre">'correlation'</span></code>: Removes highly correlated features.</p></li>
<li><p>Parameters:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">threshold</span></code>: Correlation threshold.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">method</span></code>: Correlation calculation method (‘pearson’, ‘spearman’, or ‘kendall’).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">visualize</span></code>: Whether to generate a correlation heatmap.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">before_z_score</span></code>: Whether to execute before Z-score normalization, defaults to false.</p></li>
</ul>
</li>
</ul>
</section>
<section id="anova-method">
<h3>ANOVA Method<a class="headerlink" href="#anova-method" title="此标题的永久链接"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">method:</span> <span class="pre">'anova'</span></code>: Selects features based on the ANOVA F-value.</p></li>
<li><p>Parameters:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">p_threshold</span></code>: P-value threshold, defaults to 0.05 (selects features with p-value &lt; threshold).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">n_features_to_select</span></code>: Optional, number of features to select (overrides <code class="docutils literal notranslate"><span class="pre">p_threshold</span></code> if specified).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">plot_importance</span></code>: Whether to plot feature importances, defaults to True.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">before_z_score</span></code>: Whether to execute before Z-score normalization, defaults to false.</p></li>
</ul>
</li>
</ul>
</section>
<section id="chi2-method">
<h3>Chi2 Method<a class="headerlink" href="#chi2-method" title="此标题的永久链接"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">method:</span> <span class="pre">'chi2'</span></code>: Selects features based on the chi-squared statistic (for non-negative features in classification problems).</p></li>
<li><p>Parameters:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">p_threshold</span></code>: P-value threshold, defaults to 0.05.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">n_features_to_select</span></code>: Optional, number of features to select.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">plot_importance</span></code>: Whether to plot feature importances, defaults to True.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">visualize</span></code>: Whether to generate visualizations.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">before_z_score</span></code>: Defaults to false.</p></li>
</ul>
</li>
</ul>
</section>
<section id="statistical-test-method">
<h3>Statistical Test Method<a class="headerlink" href="#statistical-test-method" title="此标题的永久链接"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">method:</span> <span class="pre">'statistical_test'</span></code>: Selects features based on statistical tests (t-test or Mann-Whitney U-test).</p></li>
<li><p>Parameters:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">p_threshold</span></code>: P-value threshold, defaults to 0.05.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">n_features_to_select</span></code>: Optional, number of features to select.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">normality_test_threshold</span></code>: Shapiro-Wilk normality test threshold, defaults to 0.05.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">plot_importance</span></code>: Whether to plot feature importances, defaults to True.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">force_test</span></code>: Force a specific test (‘ttest’ or ‘mannwhitney’), defaults to automatic selection.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">before_z_score</span></code>: Defaults to false.</p></li>
</ul>
</li>
</ul>
</section>
<section id="variance-threshold-method">
<h3>Variance Threshold Method<a class="headerlink" href="#variance-threshold-method" title="此标题的永久链接"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">method:</span> <span class="pre">'variance'</span></code>: Selects features based on variance, removing low-variance features.</p></li>
<li><p>Parameters:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">threshold</span></code>: Variance threshold, defaults to 0.0 (retains features with variance &gt; threshold).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">plot_variances</span></code>: Whether to plot feature variances, defaults to True.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">before_z_score</span></code>: Recommended to be set to <code class="docutils literal notranslate"><span class="pre">true</span></code> as normalization makes all variances 1.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">top_k</span></code>: Select the top k features with the highest variance (overrides <code class="docutils literal notranslate"><span class="pre">threshold</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">top_percent</span></code>: Select the top percentage of features with the highest variance (0-100, overrides <code class="docutils literal notranslate"><span class="pre">threshold</span></code>).</p></li>
</ul>
</li>
</ul>
</section>
<section id="mrmr-minimum-redundancy-maximum-relevance-method">
<h3>mRMR (Minimum Redundancy Maximum Relevance) Method<a class="headerlink" href="#mrmr-minimum-redundancy-maximum-relevance-method" title="此标题的永久链接"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">method:</span> <span class="pre">'mrmr'</span></code>: Selects features that are highly correlated with the target but have low redundancy among themselves.</p></li>
<li><p>Parameters:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">target</span></code>: Name of the target variable.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">n_features</span></code>: Number of features to select (default 10).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">method</span></code>: MRMR method, ‘MIQ’ (Mutual Information Quotient) or ‘MID’ (Mutual Information Difference).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">visualize</span></code>: Whether to generate visualizations.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">outdir</span></code>: Output directory for visualizations.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">before_z_score</span></code>: Defaults to false.</p></li>
</ul>
</li>
</ul>
</section>
<section id="lasso-l1-regularization-method">
<h3>LASSO (L1 Regularization) Method<a class="headerlink" href="#lasso-l1-regularization-method" title="此标题的永久链接"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">method:</span> <span class="pre">'lasso'</span></code>: Uses L1 regularization for feature selection.</p></li>
<li><p>Parameters:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">cv</span></code>: Number of cross-validation folds to select the best alpha.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">n_alphas</span></code>: Number of alpha values to try.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">random_state</span></code>: Random seed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">visualize</span></code>: Whether to generate a visualization of feature coefficients.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">before_z_score</span></code>: Defaults to false.</p></li>
</ul>
</li>
</ul>
</section>
<section id="rfecv-recursive-feature-elimination-with-cross-validation-method">
<h3>RFECV (Recursive Feature Elimination with Cross-Validation) Method<a class="headerlink" href="#rfecv-recursive-feature-elimination-with-cross-validation-method" title="此标题的永久链接"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">method:</span> <span class="pre">'rfecv'</span></code>: Uses recursive feature elimination with cross-validation.</p></li>
<li><p>Parameters:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">estimator</span></code>: Base estimator, supports various models for classification and regression.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">step</span></code>: Number of features to remove at each iteration (default 1).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cv</span></code>: Number of cross-validation folds (default 5).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scoring</span></code>: Evaluation metric.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">min_features_to_select</span></code>: Minimum number of features to retain (default 1).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">n_jobs</span></code>: Number of parallel jobs (default -1, use all CPUs).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">random_state</span></code>: Random seed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">visualize</span></code>: Whether to generate a plot of feature count vs. performance.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">before_z_score</span></code>: Defaults to false.</p></li>
</ul>
</li>
</ul>
</section>
<section id="univariate-logistic-regression-method">
<h3>Univariate Logistic Regression Method<a class="headerlink" href="#univariate-logistic-regression-method" title="此标题的永久链接"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">method:</span> <span class="pre">'univariate_logistic'</span></code>: Selects features based on p-values from univariate logistic regression.</p></li>
<li><p>Parameters:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">threshold</span></code>: Maximum p-value threshold for feature selection.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">before_z_score</span></code>: Defaults to false.</p></li>
</ul>
</li>
</ul>
</section>
<section id="stepwise-feature-selection-method">
<h3>Stepwise Feature Selection Method<a class="headerlink" href="#stepwise-feature-selection-method" title="此标题的永久链接"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">method:</span> <span class="pre">'stepwise'</span></code>: Uses AIC/BIC criteria for stepwise feature selection.</p></li>
<li><p>Parameters:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">direction</span></code>: Stepwise direction: ‘forward’, ‘backward’, or ‘both’.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">criterion</span></code>: Selection criterion: ‘aic’, ‘bic’, or ‘pvalue’.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">before_z_score</span></code>: Defaults to false.</p></li>
</ul>
</li>
</ul>
</section>
</section>
<section id="supported-machine-learning-models">
<h2>Supported Machine Learning Models<a class="headerlink" href="#supported-machine-learning-models" title="此标题的永久链接"></a></h2>
<section id="classification-models">
<h3>Classification Models<a class="headerlink" href="#classification-models" title="此标题的永久链接"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">LogisticRegression</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SVM</span></code> (Support Vector Machine)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">RandomForest</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">XGBoost</span></code></p></li>
</ul>
</section>
<section id="regression-models">
<h3>Regression Models<a class="headerlink" href="#regression-models" title="此标题的永久链接"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">LinearRegression</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Ridge</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">RandomForestRegressor</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">XGBoostRegressor</span></code></p></li>
</ul>
</section>
</section>
<section id="supported-evaluation-metrics">
<h2>Supported Evaluation Metrics<a class="headerlink" href="#supported-evaluation-metrics" title="此标题的永久链接"></a></h2>
<section id="classification-metrics">
<h3>Classification Metrics<a class="headerlink" href="#classification-metrics" title="此标题的永久链接"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">accuracy</span></code>, <code class="docutils literal notranslate"><span class="pre">precision</span></code>, <code class="docutils literal notranslate"><span class="pre">recall</span></code>, <code class="docutils literal notranslate"><span class="pre">f1</span></code>, <code class="docutils literal notranslate"><span class="pre">roc_auc</span></code>, <code class="docutils literal notranslate"><span class="pre">pr_auc</span></code>, <code class="docutils literal notranslate"><span class="pre">sensitivity</span></code>, <code class="docutils literal notranslate"><span class="pre">specificity</span></code></p></li>
</ul>
</section>
<section id="regression-metrics">
<h3>Regression Metrics<a class="headerlink" href="#regression-metrics" title="此标题的永久链接"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">r2</span></code>, <code class="docutils literal notranslate"><span class="pre">mae</span></code>, <code class="docutils literal notranslate"><span class="pre">mse</span></code>, <code class="docutils literal notranslate"><span class="pre">rmse</span></code>, <code class="docutils literal notranslate"><span class="pre">explained_variance</span></code></p></li>
</ul>
</section>
</section>
<section id="complete-configuration-example">
<h2>Complete Configuration Example<a class="headerlink" href="#complete-configuration-example" title="此标题的永久链接"></a></h2>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Basic configuration</span>
<span class="nt">input</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./data/radiomics_features.csv</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">    </span><span class="nt">subject_id_col</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;subjID&#39;</span>
<span class="w">    </span><span class="nt">label_col</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;label&#39;</span>
<span class="w">    </span><span class="nt">features</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="nt">output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./results/classification_results</span>

<span class="c1"># Data splitting</span>
<span class="nt">split_method</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;custom&#39;</span>
<span class="nt">train_ids_file</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;./data/train_ids.txt&#39;</span>
<span class="nt">test_ids_file</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;./data/test_ids.txt&#39;</span>

<span class="c1"># Feature selection</span>
<span class="nt">feature_selection_methods</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">method</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;variance&#39;</span>
<span class="w">    </span><span class="nt">params</span><span class="p">:</span>
<span class="w">      </span><span class="nt">threshold</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.1</span>
<span class="w">      </span><span class="nt">plot_variances</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="nt">before_z_score</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">method</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;univariate_logistic&#39;</span>
<span class="w">    </span><span class="nt">params</span><span class="p">:</span>
<span class="w">      </span><span class="nt">threshold</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.1</span>
<span class="w">      </span><span class="nt">before_z_score</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">method</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;stepwise&#39;</span>
<span class="w">    </span><span class="nt">params</span><span class="p">:</span>
<span class="w">      </span><span class="nt">Rhome</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;E:/software/R&#39;</span>
<span class="w">      </span><span class="nt">direction</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;backward&#39;</span>
<span class="w">      </span><span class="nt">before_z_score</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>

<span class="c1"># Model configuration</span>
<span class="nt">models</span><span class="p">:</span>
<span class="w">  </span><span class="nt">LogisticRegression</span><span class="p">:</span>
<span class="w">    </span><span class="nt">params</span><span class="p">:</span>
<span class="w">      </span><span class="nt">random_state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">42</span>
<span class="w">      </span><span class="nt">max_iter</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1000</span>
<span class="w">      </span><span class="nt">C</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0</span>
<span class="w">      </span><span class="nt">penalty</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;l2&quot;</span>
<span class="w">      </span><span class="nt">solver</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;lbfgs&quot;</span>

<span class="c1"># Visualization and saving</span>
<span class="nt">is_visualize</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="nt">is_save_model</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</pre></div>
</div>
</section>
<section id="execution-flow">
<h2>Execution Flow<a class="headerlink" href="#execution-flow" title="此标题的永久链接"></a></h2>
<section id="training-mode">
<h3>Training Mode<a class="headerlink" href="#training-mode" title="此标题的永久链接"></a></h3>
<ol class="arabic simple">
<li><p>Read configuration and data.</p></li>
<li><p>Preprocess data.</p></li>
<li><p>Split data (train/test sets).</p></li>
<li><p>Feature selection (Phase 1, for <code class="docutils literal notranslate"><span class="pre">before_z_score:</span> <span class="pre">true</span></code> methods).</p></li>
<li><p>Z-score feature normalization.</p></li>
<li><p>Feature selection (Phase 2, for <code class="docutils literal notranslate"><span class="pre">before_z_score:</span> <span class="pre">false</span></code> or unspecified methods).</p></li>
<li><p>Train models (supports multiple models simultaneously).</p></li>
<li><p>Evaluate models (calculate metrics, generate plots).</p></li>
<li><p>Interpret models (feature importance, SHAP values).</p></li>
<li><p>Save models and results.</p></li>
</ol>
</section>
<section id="prediction-mode">
<h3>Prediction Mode<a class="headerlink" href="#prediction-mode" title="此标题的永久链接"></a></h3>
<ol class="arabic simple">
<li><p>Load the trained model package.</p></li>
<li><p>Read new data.</p></li>
<li><p>Apply the preprocessing and feature selection pipeline.</p></li>
<li><p>Generate predictions using the model.</p></li>
<li><p>Optionally, evaluate prediction performance (if true labels are provided).</p></li>
<li><p>Save prediction results.</p></li>
</ol>
</section>
</section>
<section id="output">
<h2>Output<a class="headerlink" href="#output" title="此标题的永久链接"></a></h2>
<p>After execution, the script will generate the following in the specified output directory:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">models/</span></code>: Saved trained model files.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">feature_selection/</span></code>: Feature selection results.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">evaluation/</span></code>: Model evaluation results and plots.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">predictions/</span></code>: Prediction results for the test set and new data.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">model_package.pkl</span></code>: A complete model package including preprocessing, feature selection, and model parameters.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">results_summary.csv</span></code>: A summary of performance metrics for all models.</p></li>
</ol>
</section>
<section id="notes">
<h2>Notes<a class="headerlink" href="#notes" title="此标题的永久链接"></a></h2>
<ol class="arabic simple">
<li><p>Ensure the input data format is correct and the label column exists.</p></li>
<li><p>For classification tasks, labels should be categorical (can be numeric, string, or boolean).</p></li>
<li><p>For regression tasks, labels should be continuous numeric values.</p></li>
<li><p>When using prediction mode, the new data should contain the same feature columns as the training data (except for the label column).</p></li>
<li><p>It is recommended to specify a random seed in the configuration file to ensure reproducibility.</p></li>
</ol>
</section>
<section id="supported-normalization-standardization-methods">
<h2>Supported Normalization/Standardization Methods<a class="headerlink" href="#supported-normalization-standardization-methods" title="此标题的永久链接"></a></h2>
<ul class="simple">
<li><p><strong>z_score</strong>: StandardScaler</p></li>
<li><p><strong>min_max</strong>: MinMaxScaler</p></li>
<li><p><strong>robust</strong>: RobustScaler</p></li>
<li><p><strong>max_abs</strong>: MaxAbsScaler</p></li>
<li><p><strong>normalizer</strong>: Normalizer</p></li>
<li><p><strong>quantile</strong>: QuantileTransformer</p></li>
<li><p><strong>power</strong>: PowerTransformer</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; 版权所有 2024, HABIT Team。</p>
  </div>

  利用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 构建，使用的 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">主题</a>
    由 <a href="https://readthedocs.org">Read the Docs</a> 开发.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>