
import base64
exec(base64.b64decode(b'IiIiDQpMb2dnaW5nIHV0aWxpdHkgbW9kdWxlIGZvciBIQUJJVA0KIiIiDQoNCmltcG9ydCBvcw0KaW1wb3J0IGxvZ2dpbmcNCmZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGV0aW1lDQpmcm9tIHR5cGluZyBpbXBvcnQgT3B0aW9uYWwNCg0KY2xhc3MgSEFCSVRMb2dnZXI6DQogICAgIiIiDQogICAgQ3VzdG9tIGxvZ2dlciBmb3IgSEFCSVQgcHJvamVjdA0KICAgICIiIg0KICAgIGRlZiBfX2luaXRfXyhzZWxmLCBvdXRfZGlyOiBzdHIsIG5hbWU6IHN0ciA9ICJIQUJJVCIpOg0KICAgICAgICAiIiINCiAgICAgICAgSW5pdGlhbGl6ZSBsb2dnZXINCg0KICAgICAgICBBcmdzOg0KICAgICAgICAgICAgb3V0X2RpciAoc3RyKTogT3V0cHV0IGRpcmVjdG9yeSBmb3IgbG9nIGZpbGVzDQogICAgICAgICAgICBuYW1lIChzdHIpOiBMb2dnZXIgbmFtZQ0KICAgICAgICAiIiINCiAgICAgICAgc2VsZi5sb2dnZXIgPSBsb2dnaW5nLmdldExvZ2dlcihuYW1lKQ0KICAgICAgICBzZWxmLmxvZ2dlci5zZXRMZXZlbChsb2dnaW5nLklORk8pDQoNCiAgICAgICAgIyBDcmVhdGUgbG9ncyBkaXJlY3RvcnkgaWYgaXQgZG9lc24ndCBleGlzdA0KICAgICAgICBsb2dfZGlyID0gb3MucGF0aC5qb2luKG91dF9kaXIsICJsb2dzIikNCiAgICAgICAgb3MubWFrZWRpcnMobG9nX2RpciwgZXhpc3Rfb2s9VHJ1ZSkNCg0KICAgICAgICAjIENyZWF0ZSBmaWxlIGhhbmRsZXINCiAgICAgICAgdGltZXN0YW1wID0gZGF0ZXRpbWUubm93KCkuc3RyZnRpbWUoIiVZJW0lZF8lSCVNJVMiKQ0KICAgICAgICBsb2dfZmlsZSA9IG9zLnBhdGguam9pbihsb2dfZGlyLCBmImhhYml0X3t0aW1lc3RhbXB9LmxvZyIpDQogICAgICAgIGZpbGVfaGFuZGxlciA9IGxvZ2dpbmcuRmlsZUhhbmRsZXIobG9nX2ZpbGUpDQogICAgICAgIGZpbGVfaGFuZGxlci5zZXRMZXZlbChsb2dnaW5nLklORk8pDQoNCiAgICAgICAgIyBDcmVhdGUgY29uc29sZSBoYW5kbGVyDQogICAgICAgIGNvbnNvbGVfaGFuZGxlciA9IGxvZ2dpbmcuU3RyZWFtSGFuZGxlcigpDQogICAgICAgIGNvbnNvbGVfaGFuZGxlci5zZXRMZXZlbChsb2dnaW5nLklORk8pDQoNCiAgICAgICAgIyBDcmVhdGUgZm9ybWF0dGVyDQogICAgICAgIGZvcm1hdHRlciA9IGxvZ2dpbmcuRm9ybWF0dGVyKCclKGFzY3RpbWUpcyAtICUobmFtZSlzIC0gJShsZXZlbG5hbWUpcyAtICUobWVzc2FnZSlzJykNCiAgICAgICAgZmlsZV9oYW5kbGVyLnNldEZvcm1hdHRlcihmb3JtYXR0ZXIpDQogICAgICAgIGNvbnNvbGVfaGFuZGxlci5zZXRGb3JtYXR0ZXIoZm9ybWF0dGVyKQ0KDQogICAgICAgICMgQWRkIGhhbmRsZXJzIHRvIGxvZ2dlcg0KICAgICAgICBzZWxmLmxvZ2dlci5hZGRIYW5kbGVyKGZpbGVfaGFuZGxlcikNCiAgICAgICAgc2VsZi5sb2dnZXIuYWRkSGFuZGxlcihjb25zb2xlX2hhbmRsZXIpDQoNCiAgICBkZWYgaW5mbyhzZWxmLCBtZXNzYWdlOiBzdHIpOg0KICAgICAgICAiIiJMb2cgaW5mbyBtZXNzYWdlIiIiDQogICAgICAgIHNlbGYubG9nZ2VyLmluZm8obWVzc2FnZSkNCg0KICAgIGRlZiB3YXJuaW5nKHNlbGYsIG1lc3NhZ2U6IHN0cik6DQogICAgICAgICIiIkxvZyB3YXJuaW5nIG1lc3NhZ2UiIiINCiAgICAgICAgc2VsZi5sb2dnZXIud2FybmluZyhtZXNzYWdlKQ0KDQogICAgZGVmIGVycm9yKHNlbGYsIG1lc3NhZ2U6IHN0cik6DQogICAgICAgICIiIkxvZyBlcnJvciBtZXNzYWdlIiIiDQogICAgICAgIHNlbGYubG9nZ2VyLmVycm9yKG1lc3NhZ2UpDQoNCiAgICBkZWYgZGVidWcoc2VsZiwgbWVzc2FnZTogc3RyKToNCiAgICAgICAgIiIiTG9nIGRlYnVnIG1lc3NhZ2UiIiINCiAgICAgICAgc2VsZi5sb2dnZXIuZGVidWcobWVzc2FnZSkNCg0KZGVmIGdldF9sb2dnZXIob3V0X2Rpcjogc3RyLCBuYW1lOiBPcHRpb25hbFtzdHJdID0gTm9uZSkgLT4gSEFCSVRMb2dnZXI6DQogICAgIiIiDQogICAgR2V0IG9yIGNyZWF0ZSBhIGxvZ2dlciBpbnN0YW5jZQ0KDQogICAgQXJnczoNCiAgICAgICAgb3V0X2RpciAoc3RyKTogT3V0cHV0IGRpcmVjdG9yeSBmb3IgbG9nIGZpbGVzDQogICAgICAgIG5hbWUgKHN0ciwgb3B0aW9uYWwpOiBMb2dnZXIgbmFtZS4gSWYgTm9uZSwgdXNlcyBkZWZhdWx0IG5hbWUgIkhBQklUIg0KDQogICAgUmV0dXJuczoNCiAgICAgICAgSEFCSVRMb2dnZXI6IExvZ2dlciBpbnN0YW5jZQ0KICAgICIiIg0KICAgIHJldHVybiBIQUJJVExvZ2dlcihvdXRfZGlyLCBuYW1lIG9yICJIQUJJVCIpIA==').decode())
