
import base64
exec(base64.b64decode(b'IiIiCkZlYXR1cmUgZXhwcmVzc2lvbiBwYXJzZXIgZm9yIHBhcnNpbmcgY29tcGxleCBmZWF0dXJlIGNvbnN0cnVjdGlvbiBleHByZXNzaW9ucwoiIiIKCmltcG9ydCByZQpmcm9tIHR5cGluZyBpbXBvcnQgRGljdCwgTGlzdCwgQW55LCBDYWxsYWJsZSwgT3B0aW9uYWwsIFR1cGxlLCBVbmlvbgoKY2xhc3MgRmVhdHVyZUV4cHJlc3Npb25QYXJzZXI6CiAgICAiIiJQYXJzZXIgZm9yIGZlYXR1cmUgY29uc3RydWN0aW9uIGV4cHJlc3Npb25zIiIiCiAgICBkZWYgX19pbml0X18oc2VsZik6CiAgICAgICAgIiIiSW5pdGlhbGl6ZSB0aGUgcGFyc2VyIiIiCiAgICAgICAgcGFzcwoKICAgIGRlZiBwYXJzZShzZWxmLCBjb25maWc6IFVuaW9uW3N0ciwgRGljdFtzdHIsIEFueV1dLCBwYXJhbXM6IE9wdGlvbmFsW0RpY3Rbc3RyLCBBbnldXSA9IE5vbmUpIC0+IFR1cGxlW3N0ciwgRGljdFtzdHIsIEFueV0sIExpc3RbRGljdFtzdHIsIEFueV1dXToKICAgICAgICAiIiJQYXJzZSBhIGZlYXR1cmUgY29uc3RydWN0aW9uIGV4cHJlc3Npb24KCiAgICAgICAgQXJnczoKICAgICAgICAgICAgY29uZmlnOiBGZWF0dXJlIGNvbnN0cnVjdGlvbiBleHByZXNzaW9uIHN0cmluZyBvciBjb25maWd1cmF0aW9uIGRpY3Rpb25hcnkKICAgICAgICAgICAgICAgIElmIGRpY3Rpb25hcnksIHNob3VsZCBoYXZlIGZvcm1hdDoKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAibWV0aG9kIjogImtpbmV0aWMocmF3KHByZV9jb250cmFzdCwgcDEpLCByYXcoTEFQLCBwMSksIHJhdyhQVlAsIHAyKSwgcmF3KGRlbGF5XzNtaW4sIHAzKSwgdGltZXN0YW1wcykiLAogICAgICAgICAgICAgICAgICAgICJwYXJhbXMiOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICJwMSI6IDEuMCwKICAgICAgICAgICAgICAgICAgICAgICAgInAyIjogVHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgInAzIjogRmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICJ0aW1lc3RhbXBzIjogInBhdGgvdG8vdGltZXN0YW1wcy54bHN4IgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIOS5n+aUr+aMgeWNleWbvuWDj+WkhOeQhuaWueW8j++8mgogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICJtZXRob2QiOiAicmF3KHByZV9jb250cmFzdCkiLAogICAgICAgICAgICAgICAgICAgICJwYXJhbXMiOiB7fQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAg5Lmf5pSv5oyB5YW25LuW5aSE55CG5pa55byP77yaCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgIm1ldGhvZCI6ICJzdXBlcnZveGVsX3JhZGlvbWljcyhwcmVfY29udHJhc3QpIiwKICAgICAgICAgICAgICAgICAgICAicGFyYW1zIjogewogICAgICAgICAgICAgICAgICAgICAgICAicGFyYW1zX2ZpbGUiOiAicGF0aC90by9yYWRpb21pY3NfcGFyYW1zLnlhbWwiCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICBwYXJhbXM6IE9wdGlvbmFsIGRpY3Rpb25hcnkgb2YgcGFyYW1ldGVycyBmb3IgdGhlIGV4cHJlc3Npb24KCiAgICAgICAgUmV0dXJuczoKICAgICAgICAgICAgVHVwbGVbc3RyLCBEaWN0W3N0ciwgQW55XSwgTGlzdFtEaWN0W3N0ciwgQW55XV1dOiBUdXBsZSBjb250YWluaW5nOgogICAgICAgICAgICAgICAgLSBjcm9zc19pbWFnZV9tZXRob2Q6IFRoZSBtYWluIG1ldGhvZCBuYW1lCiAgICAgICAgICAgICAgICAtIGNyb3NzX2ltYWdlX3BhcmFtczogUGFyYW1ldGVycyBmb3IgdGhlIGNyb3NzLWltYWdlIG1ldGhvZAogICAgICAgICAgICAgICAgLSBwcm9jZXNzaW5nX3N0ZXBzOiBMaXN0IG9mIHByb2Nlc3Npbmcgc3RlcHMKCiAgICAgICAgUmFpc2VzOgogICAgICAgICAgICBUeXBlRXJyb3I6IElmIGNvbmZpZyBpcyBub3QgYSBzdHJpbmcgb3IgZGljdGlvbmFyeQogICAgICAgICAgICBWYWx1ZUVycm9yOiBJZiBleHByZXNzaW9uIGZvcm1hdCBpcyBpbnZhbGlkIG9yIGNvbmZpZyBpcyBtaXNzaW5nIHJlcXVpcmVkIGZpZWxkcwogICAgICAgICIiIgogICAgICAgICMgRXh0cmFjdCBleHByZXNzaW9uIGFuZCBwYXJhbWV0ZXJzIGZyb20gY29uZmlnCiAgICAgICAgaWYgaXNpbnN0YW5jZShjb25maWcsIHN0cik6CiAgICAgICAgICAgIGV4cHJlc3Npb24gPSBjb25maWcKICAgICAgICAgICAgcGFyYW1zID0gcGFyYW1zIG9yIHt9CiAgICAgICAgZWxpZiBpc2luc3RhbmNlKGNvbmZpZywgZGljdCk6CiAgICAgICAgICAgIGlmICdtZXRob2QnIG5vdCBpbiBjb25maWc6CiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJDb25maWd1cmF0aW9uIGRpY3Rpb25hcnkgbXVzdCBjb250YWluICdtZXRob2QnIGZpZWxkIikKICAgICAgICAgICAgZXhwcmVzc2lvbiA9IGNvbmZpZ1snbWV0aG9kJ10KICAgICAgICAgICAgIyBHZXQgcGFyYW1ldGVycyBmcm9tIGNvbmZpZydzIHBhcmFtcyBmaWVsZAogICAgICAgICAgICBjb25maWdfcGFyYW1zID0gY29uZmlnLmdldCgncGFyYW1zJywge30pCiAgICAgICAgICAgICMgTWVyZ2Ugd2l0aCBwcm92aWRlZCBwYXJhbXMsIGdpdmluZyBwcmlvcml0eSB0byBwcm92aWRlZCBwYXJhbXMKICAgICAgICAgICAgaWYgcGFyYW1zOgogICAgICAgICAgICAgICAgY29uZmlnX3BhcmFtcy51cGRhdGUocGFyYW1zKQogICAgICAgICAgICBwYXJhbXMgPSBjb25maWdfcGFyYW1zCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKGYiQ29uZmlnIG11c3QgYmUgYSBzdHJpbmcgb3IgZGljdGlvbmFyeSwgZ290IHt0eXBlKGNvbmZpZyl9IikKCiAgICAgICAgIyBJbml0aWFsaXplIHJldHVybiB2YWx1ZXMKICAgICAgICBjcm9zc19pbWFnZV9tZXRob2QgPSBOb25lCiAgICAgICAgY3Jvc3NfaW1hZ2VfcGFyYW1zID0ge30KICAgICAgICBwcm9jZXNzaW5nX3N0ZXBzID0gW10KCiAgICAgICAgIyDmj5Dlj5bmnIDlpJblsYLnmoTmlrnms5XlkI0KICAgICAgICBtYWluX21ldGhvZF9tYXRjaCA9IHJlLm1hdGNoKHInXihcdyspXHMqXCgnLCBleHByZXNzaW9uKQogICAgICAgIGlmIG5vdCBtYWluX21ldGhvZF9tYXRjaDoKICAgICAgICAgICAgbWFpbl9tZXRob2RfbWF0Y2ggPSBleHByZXNzaW9uLnJlcGxhY2UoJygnLCAnJykucmVwbGFjZSgnKScsICcnKQogICAgICAgICAgICBjcm9zc19pbWFnZV9tZXRob2QgPSBtYWluX21ldGhvZF9tYXRjaAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIG1ldGhvZF9uYW1lID0gbWFpbl9tZXRob2RfbWF0Y2guZ3JvdXAoMSkKICAgICAgICAgICAgY3Jvc3NfaW1hZ2VfbWV0aG9kID0gbWV0aG9kX25hbWUKCiAgICAgICAgIyDmj5Dlj5bmlrnms5Xmi6zlj7flhoXnmoTlhoXlrrkKICAgICAgICB0cnk6CiAgICAgICAgICAgIGlubmVyX2V4cHIgPSBzZWxmLl9leHRyYWN0X2lubmVyX2V4cHJlc3Npb24oZXhwcmVzc2lvbikKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoZiJGYWlsZWQgdG8gZXh0cmFjdCBpbm5lciBleHByZXNzaW9uOiB7c3RyKGUpfSIpCgogICAgICAgICMg5aSE55CG5Y2V5pa55rOV6KGo6L6+5byP77yI5aaCcmF3KGltYWdlX25hbWUp5oiWc3VwZXJ2b3hlbF9yYWRpb21pY3MoaW1hZ2VfbmFtZSnvvIkKICAgICAgICBpZiBub3Qgc2VsZi5fY29udGFpbnNfZnVuY3Rpb25fY2FsbChpbm5lcl9leHByKToKICAgICAgICAgICAgIyDnroDljZXooajovr7lvI/vvIzkvovlpoIgcmF3KHByZV9jb250cmFzdCkg5oiWIHN1cGVydm94ZWxfcmFkaW9taWNzKHByZV9jb250cmFzdCkKICAgICAgICAgICAgaW1hZ2VfbmFtZSA9IGlubmVyX2V4cHIuc3RyaXAoKQoKICAgICAgICAgICAgIyDliJvlu7rlpITnkIbmraXpqqQKICAgICAgICAgICAgc3RlcCA9IHsKICAgICAgICAgICAgICAgICdtZXRob2QnOiBtZXRob2RfbmFtZSwKICAgICAgICAgICAgICAgICdpbWFnZSc6IGltYWdlX25hbWUsCiAgICAgICAgICAgICAgICAncGFyYW1zJzoge30KICAgICAgICAgICAgfQoKICAgICAgICAgICAgIyDmt7vliqDmlrnms5Xlj4LmlbAKICAgICAgICAgICAgZm9yIHBhcmFtX25hbWUsIHBhcmFtX3ZhbHVlIGluIHBhcmFtcy5pdGVtcygpOgogICAgICAgICAgICAgICAgaWYgcGFyYW1fbmFtZSAhPSAnaW1hZ2UnOiAgIyDpgb/lhY3opobnm5ZpbWFnZeWPguaVsAogICAgICAgICAgICAgICAgICAgIHN0ZXBbJ3BhcmFtcyddW3BhcmFtX25hbWVdID0gcGFyYW1fdmFsdWUKCiAgICAgICAgICAgIHByb2Nlc3Npbmdfc3RlcHMuYXBwZW5kKHN0ZXApCiAgICAgICAgICAgIHJldHVybiBjcm9zc19pbWFnZV9tZXRob2QsIGNyb3NzX2ltYWdlX3BhcmFtcywgcHJvY2Vzc2luZ19zdGVwcwoKICAgICAgICAjIOWkhOeQhuW1jOWll+aWueazleihqOi+vuW8jwogICAgICAgICMg5ouG5YiG5YaF6YOo6KGo6L6+5byPCiAgICAgICAgcGFydHMgPSBzZWxmLl9zcGxpdF9leHByZXNzaW9uKGlubmVyX2V4cHIpCgogICAgICAgICMg5aSE55CG5q+P5Liq6YOo5YiGCiAgICAgICAgZm9yIHBhcnQgaW4gcGFydHM6CiAgICAgICAgICAgIHBhcnQgPSBwYXJ0LnN0cmlwKCkKICAgICAgICAgICAgaWYgbm90IHBhcnQ6CiAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgIyDlpITnkIblh73mlbDosIPnlKgKICAgICAgICAgICAgaWYgc2VsZi5faXNfZnVuY3Rpb25fY2FsbChwYXJ0KToKICAgICAgICAgICAgICAgICMg6Kej5p6Q5Ye95pWw5ZKM5Y+C5pWwCiAgICAgICAgICAgICAgICBmdW5jX25hbWUsIGZ1bmNfYXJncyA9IHNlbGYuX3BhcnNlX2Z1bmN0aW9uX2NhbGwocGFydCkKCiAgICAgICAgICAgICAgICAjIOino+aekOWPguaVsOWIl+ihqAogICAgICAgICAgICAgICAgYXJnX2xpc3QgPSBzZWxmLl9zcGxpdF9leHByZXNzaW9uKGZ1bmNfYXJncykKCiAgICAgICAgICAgICAgICBpZiBsZW4oYXJnX2xpc3QpID09IDA6CiAgICAgICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihmIkVtcHR5IGFyZ3VtZW50cyBmb3IgZnVuY3Rpb246IHtmdW5jX25hbWV9IikKCiAgICAgICAgICAgICAgICAjIOesrOS4gOS4quWPguaVsOW6lOivpeaYr+WbvuWDj+WQjeensAogICAgICAgICAgICAgICAgaW1hZ2VfbmFtZSA9IGFyZ19saXN0WzBdLnN0cmlwKCkKCiAgICAgICAgICAgICAgICAjIOWIm+W7uuWkhOeQhuatpemqpAogICAgICAgICAgICAgICAgc3RlcCA9IHsKICAgICAgICAgICAgICAgICAgICAnbWV0aG9kJzogZnVuY19uYW1lLAogICAgICAgICAgICAgICAgICAgICdpbWFnZSc6IGltYWdlX25hbWUsCiAgICAgICAgICAgICAgICAgICAgJ3BhcmFtcyc6IHt9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgIyDlpITnkIblhbbku5blj4LmlbAKICAgICAgICAgICAgICAgIGZvciBpLCBhcmcgaW4gZW51bWVyYXRlKGFyZ19saXN0WzE6XSwgMSk6CiAgICAgICAgICAgICAgICAgICAgYXJnID0gYXJnLnN0cmlwKCkKICAgICAgICAgICAgICAgICAgICAjIOajgOafpeWPguaVsOWQjeaYr+WQpuWtmOWcqOS6jnBhcmFtc+Wtl+WFuOS4rQogICAgICAgICAgICAgICAgICAgIGlmIGFyZyBpbiBwYXJhbXM6CiAgICAgICAgICAgICAgICAgICAgICAgICMg5L2/55So5Y+C5pWw5ZCN56ew5L2c5Li6a2V5CiAgICAgICAgICAgICAgICAgICAgICAgIHN0ZXBbJ3BhcmFtcyddW2FyZ10gPSBwYXJhbXNbYXJnXQogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICMg5aaC5p6c5Y+C5pWw5ZCN5LiN5ZyocGFyYW1z5Lit77yM5bCd6K+V55u05o6l5L2/55So5Y+C5pWw5YC8CiAgICAgICAgICAgICAgICAgICAgICAgICMg5a+55LqOc3VwZXJ2b3hlbF9yYWRpb21pY3PnrYnmlrnms5XvvIzlj4LmlbDlkI3lj6/og73lsLHmmK/lj4LmlbDmnKzouqsKICAgICAgICAgICAgICAgICAgICAgICAgIyDkvovlpoLvvJpzdXBlcnZveGVsX3JhZGlvbWljcyhwcmVfY29udHJhc3QsIHBhcmFtZXRlcinkuK3nmoRwYXJhbWV0ZXIKICAgICAgICAgICAgICAgICAgICAgICAgIyDov5nph4zmiJHku6zkvb/nlKjlj4LmlbDlkI3kvZzkuLprZXnvvIzogIzkuI3mmK9wYXJhbXtpfQogICAgICAgICAgICAgICAgICAgICAgICBzdGVwWydwYXJhbXMnXVthcmddID0gYXJnCgogICAgICAgICAgICAgICAgcHJvY2Vzc2luZ19zdGVwcy5hcHBlbmQoc3RlcCkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICMg5qOA5p+l5piv5ZCm5piv5Y+C5pWw5ZCN56ewCiAgICAgICAgICAgICAgICBpZiBwYXJ0IGluIHBhcmFtczoKICAgICAgICAgICAgICAgICAgICAjIOi/meaYr+S4u+aWueazleeahOWPguaVsAogICAgICAgICAgICAgICAgICAgIGNyb3NzX2ltYWdlX3BhcmFtc1twYXJ0XSA9IHBhcmFtc1twYXJ0XQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAjIOS4jeaYr+WHveaVsOiwg+eUqOS5n+S4jeaYr+W3suefpeWPguaVsO+8jOWBh+iuvuaYr+WbvuWDj+WQjeensAogICAgICAgICAgICAgICAgICAgIHN0ZXAgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICdtZXRob2QnOiAncmF3JywgICMg6buY6K6k5L2/55SocmF3CiAgICAgICAgICAgICAgICAgICAgICAgICdpbWFnZSc6IHBhcnQsCiAgICAgICAgICAgICAgICAgICAgICAgICdwYXJhbXMnOiB7fQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBwcm9jZXNzaW5nX3N0ZXBzLmFwcGVuZChzdGVwKQoKICAgICAgICByZXR1cm4gY3Jvc3NfaW1hZ2VfbWV0aG9kLCBjcm9zc19pbWFnZV9wYXJhbXMsIHByb2Nlc3Npbmdfc3RlcHMKCiAgICBkZWYgX2V4dHJhY3RfaW5uZXJfZXhwcmVzc2lvbihzZWxmLCBleHByZXNzaW9uOiBzdHIpIC0+IHN0cjoKICAgICAgICAiIiLmj5Dlj5blh73mlbDosIPnlKjnmoTlhoXpg6jooajovr7lvI8KCiAgICAgICAgQXJnczoKICAgICAgICAgICAgZXhwcmVzc2lvbjog6KGo6L6+5byP5a2X56ym5LiyCgogICAgICAgIFJldHVybnM6CiAgICAgICAgICAgIHN0cjog5YaF6YOo6KGo6L6+5byPCiAgICAgICAgIiIiCiAgICAgICAgIyDmib7liLDnrKzkuIDkuKrlt6bmi6zlj7cKICAgICAgICBmaXJzdF9wYXJlbiA9IGV4cHJlc3Npb24uZmluZCgnKCcpCiAgICAgICAgaWYgZmlyc3RfcGFyZW4gPT0gLTE6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoZiJObyBvcGVuaW5nIHBhcmVudGhlc2lzIGZvdW5kIGluIGV4cHJlc3Npb246IHtleHByZXNzaW9ufSIpCgogICAgICAgICMg5om+5Yiw5Yy56YWN55qE5Y+z5ous5Y+3CiAgICAgICAgcGFyZW5fY291bnQgPSAxCiAgICAgICAgZm9yIGkgaW4gcmFuZ2UoZmlyc3RfcGFyZW4gKyAxLCBsZW4oZXhwcmVzc2lvbikpOgogICAgICAgICAgICBpZiBleHByZXNzaW9uW2ldID09ICcoJzoKICAgICAgICAgICAgICAgIHBhcmVuX2NvdW50ICs9IDEKICAgICAgICAgICAgZWxpZiBleHByZXNzaW9uW2ldID09ICcpJzoKICAgICAgICAgICAgICAgIHBhcmVuX2NvdW50IC09IDEKICAgICAgICAgICAgICAgIGlmIHBhcmVuX2NvdW50ID09IDA6CiAgICAgICAgICAgICAgICAgICAgIyDov5Tlm57lhoXpg6jooajovr7lvI/vvIzkuI3ljIXmi6zmnIDlpJblsYLnmoTmi6zlj7cKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXhwcmVzc2lvbltmaXJzdF9wYXJlbiArIDE6aV0KCiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihmIlVubWF0Y2hlZCBvcGVuaW5nIHBhcmVudGhlc2lzIGluIGV4cHJlc3Npb246IHtleHByZXNzaW9ufSIpCgogICAgZGVmIF9pc19mdW5jdGlvbl9jYWxsKHNlbGYsIGV4cHI6IHN0cikgLT4gYm9vbDoKICAgICAgICAiIiLmo4Dmn6Xooajovr7lvI/mmK/lkKbmmK/lh73mlbDosIPnlKgKCiAgICAgICAgQXJnczoKICAgICAgICAgICAgZXhwcjog6KGo6L6+5byP5a2X56ym5LiyCgogICAgICAgIFJldHVybnM6CiAgICAgICAgICAgIGJvb2w6IOWmguaenOihqOi+vuW8j+aYr+WHveaVsOiwg+eUqOWImeS4ulRydWUKICAgICAgICAiIiIKICAgICAgICByZXR1cm4gcmUubWF0Y2gocideXHcrXHMqXCgnLCBleHByKSBpcyBub3QgTm9uZQoKICAgIGRlZiBfY29udGFpbnNfZnVuY3Rpb25fY2FsbChzZWxmLCBleHByOiBzdHIpIC0+IGJvb2w6CiAgICAgICAgIiIi5qOA5p+l6KGo6L6+5byP5piv5ZCm5YyF5ZCr5Ye95pWw6LCD55SoCgogICAgICAgIEFyZ3M6CiAgICAgICAgICAgIGV4cHI6IOihqOi+vuW8j+Wtl+espuS4sgoKICAgICAgICBSZXR1cm5zOgogICAgICAgICAgICBib29sOiDlpoLmnpzooajovr7lvI/ljIXlkKvlh73mlbDosIPnlKjliJnkuLpUcnVlCiAgICAgICAgIiIiCiAgICAgICAgcmV0dXJuIHJlLnNlYXJjaChyJ1x3K1xzKlwoJywgZXhwcikgaXMgbm90IE5vbmUKCiAgICBkZWYgX3BhcnNlX2Z1bmN0aW9uX2NhbGwoc2VsZiwgZXhwcjogc3RyKSAtPiBUdXBsZVtzdHIsIHN0cl06CiAgICAgICAgIiIi6Kej5p6Q5Ye95pWw6LCD55So77yM5o+Q5Y+W5Ye95pWw5ZCN5ZKM5Y+C5pWwCgogICAgICAgIEFyZ3M6CiAgICAgICAgICAgIGV4cHI6IOWHveaVsOiwg+eUqOihqOi+vuW8jwoKICAgICAgICBSZXR1cm5zOgogICAgICAgICAgICBUdXBsZVtzdHIsIHN0cl06IOWHveaVsOWQjeWSjOWPguaVsOWtl+espuS4sgogICAgICAgICIiIgogICAgICAgIG1hdGNoID0gcmUubWF0Y2gocideKFx3KylccypcKCguKilcKSQnLCBleHByKQogICAgICAgIGlmIG5vdCBtYXRjaDoKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihmIkludmFsaWQgZnVuY3Rpb24gY2FsbCBmb3JtYXQ6IHtleHByfSIpCgogICAgICAgIGZ1bmNfbmFtZSA9IG1hdGNoLmdyb3VwKDEpCiAgICAgICAgZnVuY19hcmdzID0gbWF0Y2guZ3JvdXAoMikKCiAgICAgICAgcmV0dXJuIGZ1bmNfbmFtZSwgZnVuY19hcmdzCgogICAgZGVmIF9zcGxpdF9leHByZXNzaW9uKHNlbGYsIGV4cHJlc3Npb246IHN0cikgLT4gTGlzdFtzdHJdOgogICAgICAgICIiIlNwbGl0IGFuIGV4cHJlc3Npb24gaW50byBwYXJ0cywgaGFuZGxpbmcgbmVzdGVkIHBhcmVudGhlc2VzCgogICAgICAgIEFyZ3M6CiAgICAgICAgICAgIGV4cHJlc3Npb246IEV4cHJlc3Npb24gc3RyaW5nIHRvIHNwbGl0CgogICAgICAgIFJldHVybnM6CiAgICAgICAgICAgIExpc3Rbc3RyXTogTGlzdCBvZiBleHByZXNzaW9uIHBhcnRzCiAgICAgICAgIiIiCiAgICAgICAgaWYgbm90IGV4cHJlc3Npb246CiAgICAgICAgICAgIHJldHVybiBbXQoKICAgICAgICBwYXJ0cyA9IFtdCiAgICAgICAgY3VycmVudCA9ICIiCiAgICAgICAgcGFyZW5fY291bnQgPSAwCgogICAgICAgIGZvciBjaGFyIGluIGV4cHJlc3Npb246CiAgICAgICAgICAgIGlmIGNoYXIgPT0gJygnOgogICAgICAgICAgICAgICAgcGFyZW5fY291bnQgKz0gMQogICAgICAgICAgICAgICAgY3VycmVudCArPSBjaGFyCiAgICAgICAgICAgIGVsaWYgY2hhciA9PSAnKSc6CiAgICAgICAgICAgICAgICBwYXJlbl9jb3VudCAtPSAxCiAgICAgICAgICAgICAgICBjdXJyZW50ICs9IGNoYXIKICAgICAgICAgICAgICAgIGlmIHBhcmVuX2NvdW50IDwgMDoKICAgICAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJVbm1hdGNoZWQgY2xvc2luZyBwYXJlbnRoZXNpcyIpCiAgICAgICAgICAgIGVsaWYgY2hhciA9PSAnLCcgYW5kIHBhcmVuX2NvdW50ID09IDA6CiAgICAgICAgICAgICAgICBwYXJ0cy5hcHBlbmQoY3VycmVudC5zdHJpcCgpKQogICAgICAgICAgICAgICAgY3VycmVudCA9ICIiCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBjdXJyZW50ICs9IGNoYXIKCiAgICAgICAgaWYgcGFyZW5fY291bnQgIT0gMDoKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiVW5tYXRjaGVkIG9wZW5pbmcgcGFyZW50aGVzaXMiKQoKICAgICAgICBpZiBjdXJyZW50OgogICAgICAgICAgICBwYXJ0cy5hcHBlbmQoY3VycmVudC5zdHJpcCgpKQoKICAgICAgICByZXR1cm4gW3AgZm9yIHAgaW4gcGFydHMgaWYgcF0=').decode())
