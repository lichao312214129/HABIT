
import base64
exec(base64.b64decode(b'IyEvdXNyL2Jpbi9lbnYgcHl0aG9uCiIiIgrkvKDnu5/nu4TlrabnibnlvoHmj5Dlj5blt6XlhbcK6K+l5bel5YW35o+Q5L6b5LuO5Yy75a2m5b2x5YOP5Lit5o+Q5Y+W5Lyg57uf5pS+5bCE57uE5a2m54m55b6B55qE5Yqf6IO9CuS9v+eUqOWkmui/m+eoi+W5tuihjOWkhOeQhuS7peaPkOmrmOaViOeOhwoK5pWw5o2u57uT5p6E5aaC5LiLOgpkYXRhc2V0LwrilJzilIDilIAgaW1hZ2VzLwrilIIgICDilJzilIDilIAgc3ViajAwMS8K4pSCICAg4pSCICAg4pSc4pSA4pSAIGltZzEKfCAgIHwgICB8ICAg4pSc4pSA4pSAIGltZy5uaWkuZ3ogKE9SIGltZy5ucnJkKQrilIIgICDilIIgICDilJzilIDilIAgaW1nMgp8ICAgfCAgIHwgICDilJzilIDilIAgaW1nLm5paS5neiAoT1IgaW1nLm5ycmQpCuKUgiAgIOKUnOKUgOKUgCBzdWJqMDAyLwrilIIgICDilIIgICDilJzilIDilIAgaW1nMQp8ICAgfCAgIHwgICDilJzilIDilIAgaW1nLm5paS5neiAoT1IgaW1nLm5ycmQpCuKUgiAgIOKUgiAgIOKUnOKUgOKUgCBpbWcyCnwgICB8ICAgfCAgIOKUnOKUgOKUgCBpbWcubmlpLmd6IChPUiBpbWcubnJyZCkK4pSc4pSA4pSAIG1hc2tzLwrilIIgICDilJzilIDilIAgc3ViajAwMS8K4pSCICAg4pSCICAg4pSc4pSA4pSAIGltZzEKfCAgIHwgICB8ICAg4pSc4pSA4pSAIG1hc2submlpLmd6IChPUiBtYXNrLm5ycmQpCuKUgiAgIOKUgiAgIOKUnOKUgOKUgCBpbWcyCnwgICB8ICAgfCAgIOKUnOKUgOKUgCBtYXNrLm5paS5neiAoT1IgbWFzay5ucnJkKQrilIIgICDilJzilIDilIAgc3ViajAwMi8K4pSCICAg4pSCICAg4pSc4pSA4pSAIGltZzEKfCAgIHwgICB8ICAg4pSc4pSA4pSAIG1hc2submlpLmd6IChPUiBtYXNrLm5ycmQpCuKUgiAgIOKUgiAgIOKUnOKUgOKUgCBpbWcyCnwgICB8ICAgfCAgIOKUnOKUgOKUgCBtYXNrLm5paS5neiAoT1IgbWFzay5ucnJkKQoiIiIKCmltcG9ydCB0aW1lCmltcG9ydCBsb2dnaW5nCmltcG9ydCBudW1weSBhcyBucAppbXBvcnQgb3MKaW1wb3J0IFNpbXBsZUlUSyBhcyBzaXRrCmZyb20gcmFkaW9taWNzIGltcG9ydCBmZWF0dXJlZXh0cmFjdG9yCmltcG9ydCB3YXJuaW5ncwppbXBvcnQgbXVsdGlwcm9jZXNzaW5nCmZyb20gZnVuY3Rvb2xzIGltcG9ydCBwYXJ0aWFsCmltcG9ydCBhcmdwYXJzZQppbXBvcnQgc3lzCmltcG9ydCBwYW5kYXMgYXMgcGQKZnJvbSB0eXBpbmcgaW1wb3J0IERpY3QsIExpc3QsIE9wdGlvbmFsLCBVbmlvbgoKIyDnpoHnlKjorablkYoKd2FybmluZ3MuZmlsdGVyd2FybmluZ3MoJ2lnbm9yZScpCgojIOWvvOWFpei/m+W6puadoeW3peWFtwpmcm9tIGhhYml0LmNvcmUuaGFiaXRhdF9hbmFseXNpcy51dGlscy5wcm9ncmVzc191dGlscyBpbXBvcnQgQ3VzdG9tVHFkbQoKY2xhc3MgVHJhZGl0aW9uYWxSYWRpb21pY3NFeHRyYWN0b3I6CiAgICAiIiLkvKDnu5/nu4TlrabnibnlvoHmj5Dlj5bnsbsiIiIKCiAgICBkZWYgX19pbml0X18oc2VsZiwKICAgICAgICAgICAgICAgIHBhcmFtc19maWxlPU5vbmUsCiAgICAgICAgICAgICAgICBpbWFnZXNfZm9sZGVyPU5vbmUsCiAgICAgICAgICAgICAgICBtYXNrc19mb2xkZXI9Tm9uZSwKICAgICAgICAgICAgICAgIG91dF9kaXI9Tm9uZSwKICAgICAgICAgICAgICAgIG5fcHJvY2Vzc2VzPU5vbmUpOgogICAgICAgICIiIgogICAgICAgIOWIneWni+WMluS8oOe7n+e7hOWtpueJueW+geaPkOWPluWZqAoKICAgICAgICBBcmdzOgogICAgICAgICAgICBwYXJhbXNfZmlsZTog55So5LqO5o+Q5Y+W57uE5a2m54m55b6B55qE5Y+C5pWw5paH5Lu2CiAgICAgICAgICAgIGltYWdlc19mb2xkZXI6IOW9seWDj+agueebruW9lQogICAgICAgICAgICBtYXNrc19mb2xkZXI6IOaOqeeggeagueebruW9lQogICAgICAgICAgICBvdXRfZGlyOiDovpPlh7rnm67lvZUKICAgICAgICAgICAgbl9wcm9jZXNzZXM6IOi/m+eoi+aVsAogICAgICAgICIiIgogICAgICAgICMg54m55b6B5o+Q5Y+W55u45YWz5Y+C5pWwCiAgICAgICAgc2VsZi5wYXJhbXNfZmlsZSA9IHBhcmFtc19maWxlCiAgICAgICAgc2VsZi5pbWFnZXNfZm9sZGVyID0gaW1hZ2VzX2ZvbGRlcgogICAgICAgIHNlbGYubWFza3NfZm9sZGVyID0gbWFza3NfZm9sZGVyCiAgICAgICAgc2VsZi5vdXRfZGlyID0gb3V0X2RpcgoKICAgICAgICAjIOi/m+eoi+aVsOiuvue9rgogICAgICAgIGlmIG5fcHJvY2Vzc2VzIGlzIE5vbmU6CiAgICAgICAgICAgIHNlbGYubl9wcm9jZXNzZXMgPSBtYXgoMSwgbXVsdGlwcm9jZXNzaW5nLmNwdV9jb3VudCgpIC8vIDIpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2VsZi5uX3Byb2Nlc3NlcyA9IG1pbihuX3Byb2Nlc3NlcywgbXVsdGlwcm9jZXNzaW5nLmNwdV9jb3VudCgpIC0gMikKCiAgICAgICAgIyDorr7nva7ml6Xlv5cKICAgICAgICBzZWxmLl9zZXR1cF9sb2dnaW5nKCkKCiAgICAgICAgIyDkv53lrZjorr7nva4KICAgICAgICBzZWxmLnNhdmVfZXZlcnlfbl9maWxlcyA9IDUKCiAgICBkZWYgX3NldHVwX2xvZ2dpbmcoc2VsZik6CiAgICAgICAgIiIi6K6+572u5pel5b+X6YWN572uIiIiCiAgICAgICAgIyDojrflj5bml7bpl7TmiLMKICAgICAgICBkYXRhID0gdGltZS50aW1lKCkKICAgICAgICB0aW1lQXJyYXkgPSB0aW1lLmxvY2FsdGltZShkYXRhKQogICAgICAgIHRpbWVzdHIgPSB0aW1lLnN0cmZ0aW1lKCclWV8lbV8lZCAlSF8lTV8lUycsIHRpbWVBcnJheSkKCiAgICAgICAgIyDliJvlu7rovpPlh7rnm67lvZUKICAgICAgICBpZiBub3Qgb3MucGF0aC5leGlzdHMoc2VsZi5vdXRfZGlyKToKICAgICAgICAgICAgb3MubWFrZWRpcnMoc2VsZi5vdXRfZGlyKQogICAgICAgIGxvZ19maWxlID0gb3MucGF0aC5qb2luKHNlbGYub3V0X2RpciwgZidyYWRpb21pY3NfZXh0cmFjdGlvbl97dGltZXN0cn0ubG9nJykKCiAgICAgICAgIyDphY3nva7ml6Xlv5cKICAgICAgICBsb2dnaW5nLmJhc2ljQ29uZmlnKAogICAgICAgICAgICBsZXZlbD1sb2dnaW5nLklORk8sCiAgICAgICAgICAgIGZvcm1hdD0nJShhc2N0aW1lKXMgLSAlKGxldmVsbmFtZSlzIC0gJShtZXNzYWdlKXMnLAogICAgICAgICAgICBoYW5kbGVycz1bCiAgICAgICAgICAgICAgICBsb2dnaW5nLlN0cmVhbUhhbmRsZXIoKSwKICAgICAgICAgICAgICAgIGxvZ2dpbmcuRmlsZUhhbmRsZXIobG9nX2ZpbGUpCiAgICAgICAgICAgIF0KICAgICAgICApCgogICAgICAgIGxvZ2dpbmcuaW5mbyhmIuaXpeW/l+aWh+S7tuWwhuS/neWtmOWIsDoge2xvZ19maWxlfSIpCgogICAgQHN0YXRpY21ldGhvZAogICAgZGVmIGV4dHJhY3RfcmFkaW9taWNzX2ZlYXR1cmVzKGltYWdlX3BhdGgsIG1hc2tfcGF0aCwgc3ViamVjdF9pZCwgcGFyYW1zX2ZpbGUpOgogICAgICAgICIiIuaPkOWPlue7hOWtpueJueW+gSIiIgogICAgICAgIHRyeToKICAgICAgICAgICAgZXh0cmFjdG9yID0gZmVhdHVyZWV4dHJhY3Rvci5SYWRpb21pY3NGZWF0dXJlRXh0cmFjdG9yKHBhcmFtc19maWxlKQoKICAgICAgICAgICAgbWFza19pbWcgPSBzaXRrLlJlYWRJbWFnZShtYXNrX3BhdGgpCiAgICAgICAgICAgIHJhd19pbWcgPSBzaXRrLlJlYWRJbWFnZShpbWFnZV9wYXRoKQoKICAgICAgICAgICAgIyDnoa7kv53lm77lg4/lkozmjqnnoIHmnInnm7jlkIznmoTmlrnlkJHjgIHljp/ngrnlkozpl7Tot50KICAgICAgICAgICAgaWYgcmF3X2ltZy5HZXREaXJlY3Rpb24oKSAhPSBtYXNrX2ltZy5HZXREaXJlY3Rpb24oKToKICAgICAgICAgICAgICAgIGxvZ2dpbmcuaW5mbyhmIuWbvuWDj+WSjOaOqeeggeaWueWQkeS4jeWQjDoge3N1YmplY3RfaWR9IikKICAgICAgICAgICAgICAgIG1hc2tfaW1nLlNldERpcmVjdGlvbihyYXdfaW1nLkdldERpcmVjdGlvbigpKQoKICAgICAgICAgICAgaWYgcmF3X2ltZy5HZXRPcmlnaW4oKSAhPSBtYXNrX2ltZy5HZXRPcmlnaW4oKToKICAgICAgICAgICAgICAgIGxvZ2dpbmcuaW5mbyhmIuWbvuWDj+WSjOaOqeeggeWOn+eCueS4jeWQjDoge3N1YmplY3RfaWR9IikKICAgICAgICAgICAgICAgIG1hc2tfaW1nLlNldE9yaWdpbihyYXdfaW1nLkdldE9yaWdpbigpKQoKICAgICAgICAgICAgaWYgcmF3X2ltZy5HZXRTcGFjaW5nKCkgIT0gbWFza19pbWcuR2V0U3BhY2luZygpOgogICAgICAgICAgICAgICAgbG9nZ2luZy5pbmZvKGYi5Zu+5YOP5ZKM5o6p56CB6Ze06Led5LiN5ZCMOiB7c3ViamVjdF9pZH0iKQogICAgICAgICAgICAgICAgbWFza19pbWcuU2V0U3BhY2luZyhyYXdfaW1nLkdldFNwYWNpbmcoKSkKCiAgICAgICAgICAgICMg5L2/55SobGFiZWw9MeaPkOWPlueJueW+gQogICAgICAgICAgICByZXR1cm4gZXh0cmFjdG9yLmV4ZWN1dGUoCiAgICAgICAgICAgICAgICBpbWFnZUZpbGVwYXRoPXJhd19pbWcsCiAgICAgICAgICAgICAgICBtYXNrRmlsZXBhdGg9bWFza19pbWcsCiAgICAgICAgICAgICAgICBsYWJlbD0xCiAgICAgICAgICAgICkKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIGxvZ2dpbmcuZXJyb3IoZiLmj5Dlj5bnu4TlrabnibnlvoHml7blh7rplJk6IHtzdHIoZSl9IikKICAgICAgICAgICAgcmV0dXJuIHsiZXJyb3IiOiBmIueJueW+geaPkOWPlumUmeivrzoge3N0cihlKX0ifQoKICAgIGRlZiBnZXRfaW1hZ2VfYW5kX21hc2tfZmlsZXMoc2VsZik6CiAgICAgICAgIiIi6I635Y+W5omA5pyJ5b2x5YOP5ZKM5o6p56CB5paH5Lu26Lev5b6EIiIiCiAgICAgICAgaW1hZ2VzX3BhdGhzID0ge30KICAgICAgICBpbWFnZXNfcm9vdCA9IG9zLnBhdGguam9pbihzZWxmLmltYWdlc19mb2xkZXIsICJpbWFnZXMiKQogICAgICAgIHN1YmpzID0gb3MubGlzdGRpcihpbWFnZXNfcm9vdCkKICAgICAgICBmb3Igc3ViaiBpbiBzdWJqczoKICAgICAgICAgICAgaW1hZ2VzX3BhdGhzW3N1YmpdID0ge30KICAgICAgICAgICAgc3Vial9wYXRoID0gb3MucGF0aC5qb2luKGltYWdlc19yb290LCBzdWJqKQogICAgICAgICAgICBpbWdfc3ViZm9sZGVycyA9IG9zLmxpc3RkaXIoc3Vial9wYXRoKQogICAgICAgICAgICBmb3IgaW1nX3N1YmZvbGRlciBpbiBpbWdfc3ViZm9sZGVyczoKICAgICAgICAgICAgICAgIGltZ19zdWJmb2xkZXJfcGF0aCA9IG9zLnBhdGguam9pbihzdWJqX3BhdGgsIGltZ19zdWJmb2xkZXIpCiAgICAgICAgICAgICAgICBpZiBvcy5wYXRoLmlzZGlyKGltZ19zdWJmb2xkZXJfcGF0aCk6CiAgICAgICAgICAgICAgICAgICAgaW1nX2ZpbGVzID0gb3MubGlzdGRpcihpbWdfc3ViZm9sZGVyX3BhdGgpCiAgICAgICAgICAgICAgICAgICAgaWYgbGVuKGltZ19maWxlcykgPiAxOgogICAgICAgICAgICAgICAgICAgICAgICBsb2dnaW5nLndhcm5pbmcoZiLmlofku7blpLkge3N1Ymp9L3tpbWdfc3ViZm9sZGVyfSDkuK3ljIXlkKvlpJrkuKrlvbHlg4/mlofku7YiKQogICAgICAgICAgICAgICAgICAgIGltZ19maWxlID0gaW1nX2ZpbGVzWzBdCiAgICAgICAgICAgICAgICAgICAgaW1hZ2VzX3BhdGhzW3N1YmpdW2ltZ19zdWJmb2xkZXJdID0gb3MucGF0aC5qb2luKGltZ19zdWJmb2xkZXJfcGF0aCwgaW1nX2ZpbGUpCgogICAgICAgIG1hc2tzX3BhdGhzID0ge30KICAgICAgICBtYXNrc19yb290ID0gb3MucGF0aC5qb2luKHNlbGYuaW1hZ2VzX2ZvbGRlciwgIm1hc2tzIikKICAgICAgICBzdWJqcyA9IG9zLmxpc3RkaXIobWFza3Nfcm9vdCkKICAgICAgICBmb3Igc3ViaiBpbiBzdWJqczoKICAgICAgICAgICAgbWFza3NfcGF0aHNbc3Vial0gPSB7fQogICAgICAgICAgICBzdWJqX3BhdGggPSBvcy5wYXRoLmpvaW4obWFza3Nfcm9vdCwgc3ViaikKICAgICAgICAgICAgbWFza19zdWJmb2xkZXJzID0gb3MubGlzdGRpcihzdWJqX3BhdGgpCiAgICAgICAgICAgIGZvciBtYXNrX3N1YmZvbGRlciBpbiBtYXNrX3N1YmZvbGRlcnM6CiAgICAgICAgICAgICAgICBtYXNrX3N1YmZvbGRlcl9wYXRoID0gb3MucGF0aC5qb2luKHN1YmpfcGF0aCwgbWFza19zdWJmb2xkZXIpCiAgICAgICAgICAgICAgICBpZiBvcy5wYXRoLmlzZGlyKG1hc2tfc3ViZm9sZGVyX3BhdGgpOgogICAgICAgICAgICAgICAgICAgIG1hc2tfZmlsZXMgPSBvcy5saXN0ZGlyKG1hc2tfc3ViZm9sZGVyX3BhdGgpCiAgICAgICAgICAgICAgICAgICAgaWYgbGVuKG1hc2tfZmlsZXMpID4gMToKICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2luZy53YXJuaW5nKGYi5paH5Lu25aS5IHtzdWJqfS97bWFza19zdWJmb2xkZXJ9IOS4reWMheWQq+WkmuS4quaOqeeggeaWh+S7tiIpCiAgICAgICAgICAgICAgICAgICAgbWFza19maWxlID0gbWFza19maWxlc1swXQogICAgICAgICAgICAgICAgICAgIG1hc2tzX3BhdGhzW3N1YmpdW21hc2tfc3ViZm9sZGVyXSA9IG9zLnBhdGguam9pbihtYXNrX3N1YmZvbGRlcl9wYXRoLCBtYXNrX2ZpbGUpCgogICAgICAgIHJldHVybiBpbWFnZXNfcGF0aHMsIG1hc2tzX3BhdGhzCgogICAgZGVmIHByb2Nlc3Nfc3ViamVjdChzZWxmLCBzdWJqLCBpbWFnZXNfcGF0aHMsIG1hc2tzX3BhdGhzKToKICAgICAgICAiIiLlpITnkIbljZXkuKrlj5for5XogIXnmoTnibnlvoHmj5Dlj5YiIiIKICAgICAgICBzdWJqZWN0X2ZlYXR1cmVzID0ge30KCiAgICAgICAgIyDojrflj5bmiYDmnInlvbHlg4/nsbvlnosKICAgICAgICBpbWdzID0gbGlzdChzZXQoaW1hZ2VzX3BhdGhzW3N1YmpdLmtleXMoKSkgJiBzZXQobWFza3NfcGF0aHNbc3Vial0ua2V5cygpKSkKCiAgICAgICAgaWYgbm90IGltZ3M6CiAgICAgICAgICAgIGxvZ2dpbmcud2FybmluZyhmIuWPl+ivleiAhSB7c3Vian0g5rKh5pyJ5om+5Yiw5Yy56YWN55qE5b2x5YOP5ZKM5o6p56CBIikKICAgICAgICAgICAgcmV0dXJuIHN1YmosIHt9CgogICAgICAgIGZvciBpbWcgaW4gaW1nczoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgZmVhdHVyZXMgPSBzZWxmLmV4dHJhY3RfcmFkaW9taWNzX2ZlYXR1cmVzKAogICAgICAgICAgICAgICAgICAgIGltYWdlc19wYXRoc1tzdWJqXVtpbWddLAogICAgICAgICAgICAgICAgICAgIG1hc2tzX3BhdGhzW3N1YmpdW2ltZ10sCiAgICAgICAgICAgICAgICAgICAgZiJ7c3Vian0ve2ltZ30iLAogICAgICAgICAgICAgICAgICAgIHNlbGYucGFyYW1zX2ZpbGUKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIHN1YmplY3RfZmVhdHVyZXNbaW1nXSA9IGZlYXR1cmVzCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgIGxvZ2dpbmcuZXJyb3IoZiLlpITnkIblj5for5XogIUge3N1Ymp9IOeahOW9seWDjyB7aW1nfSDml7blh7rplJk6IHtzdHIoZSl9IikKICAgICAgICAgICAgICAgIHN1YmplY3RfZmVhdHVyZXNbaW1nXSA9IHsiZXJyb3IiOiBzdHIoZSl9CgogICAgICAgIHJldHVybiBzdWJqLCBzdWJqZWN0X2ZlYXR1cmVzCgogICAgZGVmIGV4dHJhY3RfZmVhdHVyZXMoc2VsZik6CiAgICAgICAgIiIi5o+Q5Y+W5omA5pyJ5Y+X6K+V6ICF55qE57uE5a2m54m55b6BIiIiCiAgICAgICAgaW1hZ2VzX3BhdGhzLCBtYXNrc19wYXRocyA9IHNlbGYuZ2V0X2ltYWdlX2FuZF9tYXNrX2ZpbGVzKCkKICAgICAgICBmZWF0dXJlcyA9IHt9CgogICAgICAgICMg5om+5Yiw5ZCM5pe25a2Y5Zyo5LqO5b2x5YOP5ZKM5o6p56CB5Lit55qE5Y+X6K+V6ICFCiAgICAgICAgc3VianMgPSBsaXN0KHNldChpbWFnZXNfcGF0aHMua2V5cygpKSAmIHNldChtYXNrc19wYXRocy5rZXlzKCkpKQoKICAgICAgICBpZiBub3Qgc3VianM6CiAgICAgICAgICAgIGxvZ2dpbmcuZXJyb3IoIuacquWcqOW9seWDj+WSjOaOqeeggeaWh+S7tuWkueS4reaJvuWIsOWMuemFjeeahOWPl+ivleiAhSIpCiAgICAgICAgICAgIHJldHVybiBzZWxmCgogICAgICAgIHByaW50KGYiKioqKioqKioqKioqKirlvIDlp4vkuLoge2xlbihzdWJqcyl9IOS4quWPl+ivleiAheaPkOWPlue7hOWtpueJueW+ge+8jOS9v+eUqCB7c2VsZi5uX3Byb2Nlc3Nlc30g5Liq6L+b56iLKioqKioqKioqKioqKioiKQoKICAgICAgICAjIOWIm+W7uuS4tOaXtuebruW9leeUqOS6juS/neWtmOS4remXtOe7k+aenAogICAgICAgIHRlbXBfZGlyID0gb3MucGF0aC5qb2luKHNlbGYub3V0X2RpciwgInRlbXAiKQogICAgICAgIGlmIG5vdCBvcy5wYXRoLmV4aXN0cyh0ZW1wX2Rpcik6CiAgICAgICAgICAgIG9zLm1ha2VkaXJzKHRlbXBfZGlyKQoKICAgICAgICB3aXRoIG11bHRpcHJvY2Vzc2luZy5Qb29sKHByb2Nlc3Nlcz1zZWxmLm5fcHJvY2Vzc2VzKSBhcyBwb29sOgogICAgICAgICAgICBwcm9jZXNzX2Z1bmMgPSBwYXJ0aWFsKHNlbGYucHJvY2Vzc19zdWJqZWN0LCBpbWFnZXNfcGF0aHM9aW1hZ2VzX3BhdGhzLCBtYXNrc19wYXRocz1tYXNrc19wYXRocykKCiAgICAgICAgICAgIHRvdGFsID0gbGVuKHN1YmpzKQogICAgICAgICAgICBwcm9ncmVzc19iYXIgPSBDdXN0b21UcWRtKHRvdGFsPXRvdGFsLCBkZXNjPSJFeHRyYWN0aW5nIFJhZGlvbWljcyBGZWF0dXJlcyIpCgogICAgICAgICAgICBmb3Igc3Viaiwgc3ViamVjdF9mZWF0dXJlcyBpbiBwb29sLmltYXBfdW5vcmRlcmVkKHByb2Nlc3NfZnVuYywgc3VianMpOgogICAgICAgICAgICAgICAgZmVhdHVyZXNbc3Vial0gPSBzdWJqZWN0X2ZlYXR1cmVzCiAgICAgICAgICAgICAgICBwcm9ncmVzc19iYXIudXBkYXRlKDEpCgogICAgICAgICAgICAgICAgIyDlrprmnJ/kv53lrZjkuK3pl7Tnu5PmnpzvvIjku4XlnKjov5vnqIvkuK3kv53lrZjvvIkKCiAgICAgICAgIyDnm7TmjqXovazmjaLkuLpDU1bmoLzlvI8KICAgICAgICBzZWxmLmNvbnZlcnRfdG9fY3N2KGZlYXR1cmVzKQoKICAgICAgICByZXR1cm4gc2VsZgoKICAgIGRlZiBjb252ZXJ0X3RvX2NzdihzZWxmLCBmZWF0dXJlcyk6CiAgICAgICAgIiIi5bCG54m55b6B6L2s5o2i5Li6Q1NW5qC85byPIiIiCiAgICAgICAgdHJ5OgogICAgICAgICAgICAjIOWIm+W7uuS4gOS4quWtl+WFuO+8jOeUqOS6juWtmOWCqOavj+enjeW9seWDj+exu+Wei+eahOeJueW+gQogICAgICAgICAgICBpbWFnZV90eXBlcyA9IHNldCgpCiAgICAgICAgICAgIGZvciBzdWJqIGluIGZlYXR1cmVzOgogICAgICAgICAgICAgICAgaW1hZ2VfdHlwZXMudXBkYXRlKGZlYXR1cmVzW3N1YmpdLmtleXMoKSkKCiAgICAgICAgICAgIGZvciBpbWdfdHlwZSBpbiBpbWFnZV90eXBlczoKICAgICAgICAgICAgICAgICMg5pS26ZuG5omA5pyJ5Y+X6K+V6ICF6K+l5b2x5YOP57G75Z6L55qE54m55b6BCiAgICAgICAgICAgICAgICBzdWJqcyA9IFtdCiAgICAgICAgICAgICAgICBmZWF0dXJlX2RmcyA9IFtdCgogICAgICAgICAgICAgICAgZm9yIHN1YmogaW4gZmVhdHVyZXM6CiAgICAgICAgICAgICAgICAgICAgaWYgaW1nX3R5cGUgaW4gZmVhdHVyZXNbc3Vial06CiAgICAgICAgICAgICAgICAgICAgICAgIHN1YmpzLmFwcGVuZChzdWJqKQogICAgICAgICAgICAgICAgICAgICAgICAjIOWwhueJueW+geWtl+WFuOi9rOaNouS4ukRhdGFGcmFtZQogICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlX2RpY3QgPSBmZWF0dXJlc1tzdWJqXVtpbWdfdHlwZV0KICAgICAgICAgICAgICAgICAgICAgICAgIyDmjpLpmaTor4rmlq3nm7jlhbPliJcKICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZV9kaWN0ID0ge2s6IHYgZm9yIGssIHYgaW4gZmVhdHVyZV9kaWN0Lml0ZW1zKCkgaWYgJ2RpYWdub3N0aWMnIG5vdCBpbiBrfQogICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlX2RmID0gcGQuRGF0YUZyYW1lKFtmZWF0dXJlX2RpY3RdKQogICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlX2Rmcy5hcHBlbmQoZmVhdHVyZV9kZikKCiAgICAgICAgICAgICAgICBpZiBmZWF0dXJlX2RmczoKICAgICAgICAgICAgICAgICAgICAjIOWQiOW5tuaJgOacieWPl+ivleiAheeahOeJueW+gQogICAgICAgICAgICAgICAgICAgIGNvbWJpbmVkX2RmID0gcGQuY29uY2F0KGZlYXR1cmVfZGZzLCBpZ25vcmVfaW5kZXg9VHJ1ZSkKICAgICAgICAgICAgICAgICAgICBjb21iaW5lZF9kZi5pbmRleCA9IHN1YmpzCgogICAgICAgICAgICAgICAgICAgICMg5L+d5a2Y5Li6Q1NWCiAgICAgICAgICAgICAgICAgICAgb3V0X2ZpbGUgPSBvcy5wYXRoLmpvaW4oc2VsZi5vdXRfZGlyLCBmInJhZGlvbWljc19mZWF0dXJlc197aW1nX3R5cGV9LmNzdiIpCiAgICAgICAgICAgICAgICAgICAgY29tYmluZWRfZGYudG9fY3N2KG91dF9maWxlKQogICAgICAgICAgICAgICAgICAgIHByaW50KGYi5bey5bCGIHtpbWdfdHlwZX0g55qE57uE5a2m54m55b6B5L+d5a2Y5YiwIHtvdXRfZmlsZX0iKQoKICAgICAgICAgICAgIyDliJvlu7rlkIjlubbmiYDmnInlvbHlg4/nsbvlnovnmoTnibnlvoHmlofku7YKICAgICAgICAgICAgYWxsX2ZlYXR1cmVzID0ge30KICAgICAgICAgICAgZm9yIHN1YmogaW4gZmVhdHVyZXM6CiAgICAgICAgICAgICAgICBhbGxfZmVhdHVyZXNbc3Vial0gPSB7fQogICAgICAgICAgICAgICAgZm9yIGltZ190eXBlIGluIGZlYXR1cmVzW3N1YmpdOgogICAgICAgICAgICAgICAgICAgIGZlYXR1cmVfZGljdCA9IGZlYXR1cmVzW3N1YmpdW2ltZ190eXBlXQogICAgICAgICAgICAgICAgICAgICMg5o6S6Zmk6K+K5pat55u45YWz5YiXCiAgICAgICAgICAgICAgICAgICAgZmVhdHVyZV9kaWN0ID0ge2s6IHYgZm9yIGssIHYgaW4gZmVhdHVyZV9kaWN0Lml0ZW1zKCkgaWYgJ2RpYWdub3N0aWMnIG5vdCBpbiBrfQogICAgICAgICAgICAgICAgICAgICMg5re75Yqg5b2x5YOP57G75Z6L5YmN57yACiAgICAgICAgICAgICAgICAgICAgcHJlZml4ZWRfZGljdCA9IHtmIntpbWdfdHlwZX1fe2t9IjogdiBmb3IgaywgdiBpbiBmZWF0dXJlX2RpY3QuaXRlbXMoKX0KICAgICAgICAgICAgICAgICAgICBhbGxfZmVhdHVyZXNbc3Vial0udXBkYXRlKHByZWZpeGVkX2RpY3QpCgogICAgICAgICAgICAjIOi9rOaNouS4ukRhdGFGcmFtZQogICAgICAgICAgICBhbGxfZGYgPSBwZC5EYXRhRnJhbWUuZnJvbV9kaWN0KGFsbF9mZWF0dXJlcywgb3JpZW50PSdpbmRleCcpCgogICAgICAgICAgICAjIOS/neWtmOS4ukNTVgogICAgICAgICAgICBvdXRfZmlsZSA9IG9zLnBhdGguam9pbihzZWxmLm91dF9kaXIsICJyYWRpb21pY3NfZmVhdHVyZXNfYWxsLmNzdiIpCiAgICAgICAgICAgIGFsbF9kZi50b19jc3Yob3V0X2ZpbGUpCiAgICAgICAgICAgIHByaW50KGYi5bey5bCG5omA5pyJ57uE5a2m54m55b6B5L+d5a2Y5YiwIHtvdXRfZmlsZX0iKQoKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIGxvZ2dpbmcuZXJyb3IoZiLovazmjaLnibnlvoHkuLpDU1bml7blh7rplJk6IHtzdHIoZSl9IikKCmRlZiBwYXJzZV9hcmd1bWVudHMoKToKICAgICIiIuino+aekOWRveS7pOihjOWPguaVsCIiIgogICAgcGFyc2VyID0gYXJncGFyc2UuQXJndW1lbnRQYXJzZXIoZGVzY3JpcHRpb249J+S8oOe7n+e7hOWtpueJueW+geaPkOWPluW3peWFtycpCgogICAgIyDnibnlvoHmj5Dlj5bnm7jlhbPlj4LmlbAKICAgIHBhcnNlci5hZGRfYXJndW1lbnQoJy0tcGFyYW1zX2ZpbGUnLCB0eXBlPXN0ciwgcmVxdWlyZWQ9VHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgaGVscD0n55So5LqO5o+Q5Y+W57uE5a2m54m55b6B55qE5Y+C5pWw5paH5Lu2JykKICAgIHBhcnNlci5hZGRfYXJndW1lbnQoJy0taW1hZ2VzX2ZvbGRlcicsIHR5cGU9c3RyLCByZXF1aXJlZD1UcnVlLAogICAgICAgICAgICAgICAgICAgICAgICBoZWxwPSflvbHlg4/moLnnm67lvZXvvIzlupTljIXlkKtpbWFnZXPlkoxtYXNrc+WtkOebruW9lScpCiAgICBwYXJzZXIuYWRkX2FyZ3VtZW50KCctLW91dF9kaXInLCB0eXBlPXN0ciwgcmVxdWlyZWQ9VHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgaGVscD0n6L6T5Ye655uu5b2VJykKICAgIHBhcnNlci5hZGRfYXJndW1lbnQoJy0tbl9wcm9jZXNzZXMnLCB0eXBlPWludCwKICAgICAgICAgICAgICAgICAgICAgICAgaGVscD0n5L2/55So55qE6L+b56iL5pWw77yM6buY6K6k5Li6Q1BV5qC45b+D5pWw55qE5LiA5Y2KJykKCiAgICByZXR1cm4gcGFyc2VyLnBhcnNlX2FyZ3MoKQoKaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoKICAgICMg5aaC5p6c5pyq5o+Q5L6b5ZG95Luk6KGM5Y+C5pWw77yM5L2/55So6buY6K6k5YC8CiAgICBpZiBsZW4oc3lzLmFyZ3YpID09IDE6CiAgICAgICAgc3lzLmFyZ3YuZXh0ZW5kKFsKICAgICAgICAgICAgJy0tcGFyYW1zX2ZpbGUnLCAnRjpcXHdvcmtcXHJlc2VhcmNoXFxyYWRpb21pY3NfVExTc1xcY29kZV9mb3JfaGFiaXRhdF9hbmFseXNpc1xccGFyYW1ldGVyLnlhbWwnLAogICAgICAgICAgICAnLS1pbWFnZXNfZm9sZGVyJywgJ0Y6XFx3b3JrXFx3b3Jrc3RhdGlvbl9iXFxkaW5nSHVZaW5nWGlhbmdcXHRoZV90aGlyZF90cmFpbmluZ18yMDI1MDRcXGRlbW9fZGF0YVxcZGF0YXNldHMnLAogICAgICAgICAgICAnLS1vdXRfZGlyJywgJ0Y6XFx3b3JrXFx3b3Jrc3RhdGlvbl9iXFxkaW5nSHVZaW5nWGlhbmdcXHRoZV90aGlyZF90cmFpbmluZ18yMDI1MDRcXGRlbW9fZGF0YVxccmVzdWx0cycsCiAgICAgICAgICAgICctLW5fcHJvY2Vzc2VzJywgJzQnCiAgICAgICAgXSkKCiAgICAjIOino+aekOWRveS7pOihjOWPguaVsAogICAgYXJncyA9IHBhcnNlX2FyZ3VtZW50cygpCgogICAgIyDliJvlu7rnibnlvoHmj5Dlj5blmajlrp7kvovlubbov5DooYwKICAgIHN0YXJ0X3RpbWUgPSB0aW1lLnRpbWUoKQogICAgZXh0cmFjdG9yID0gVHJhZGl0aW9uYWxSYWRpb21pY3NFeHRyYWN0b3IoCiAgICAgICAgcGFyYW1zX2ZpbGU9YXJncy5wYXJhbXNfZmlsZSwKICAgICAgICBpbWFnZXNfZm9sZGVyPWFyZ3MuaW1hZ2VzX2ZvbGRlciwKICAgICAgICBvdXRfZGlyPWFyZ3Mub3V0X2RpciwKICAgICAgICBuX3Byb2Nlc3Nlcz1hcmdzLm5fcHJvY2Vzc2VzCiAgICApCiAgICBleHRyYWN0b3IuZXh0cmFjdF9mZWF0dXJlcygpCiAgICBlbmRfdGltZSA9IHRpbWUudGltZSgpCiAgICBwcmludChmIuaAu+iAl+aXtjoge2VuZF90aW1lIC0gc3RhcnRfdGltZTouMmZ9IOenkiIpCgogICAgIyDlkb3ku6TooYzlvaLlvI/kuLrvvIjnlKhzeXPnnJ/lrp7lj4LmlbDvvInvvJoKICAgICMgcHl0aG9uIHRyYWRpdGlvbmFsX3JhZGlvbWljc19leHRyYWN0b3IucHkgLS1wYXJhbXNfZmlsZSBwYXJhbWV0ZXIueWFtbCAtLWltYWdlc19mb2xkZXIgRjpcd29ya1x3b3Jrc3RhdGlvbl9iXGRpbmdIdVlpbmdYaWFuZ1x0aGVfdGhpcmRfdHJhaW5pbmdfMjAyNTA0XGRlbW9fZGF0YVxkYXRhc2V0cyAtLW91dF9kaXIgRjpcd29ya1x3b3Jrc3RhdGlvbl9iXGRpbmdIdVlpbmdYaWFuZ1x0aGVfdGhpcmRfdHJhaW5pbmdfMjAyNTA0XGRlbW9fZGF0YVxyZXN1bHRzIC0tbl9wcm9jZXNzZXMgNA==').decode())
