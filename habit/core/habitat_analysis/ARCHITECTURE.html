<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'><style type='text/css'>html {overflow-x: initial !important;}</style>
<style type='text/css'  id="style-mermaid">:root { --mermaid-theme: default; --mermaid-sequence-numbers: off; --mermaid-flowchart-curve: linear; --mermaid--gantt-left-padding: 75; --sequence-theme: simple; }
.privacy { display: none; }

</style>
<style type='text/css'  id="style-base">:root { --bg-color: #ffffff; --text-color: #333333; --select-text-bg-color: #B5D6FC; --select-text-font-color: auto; --monospace: "Lucida Console",Consolas,"Courier",monospace; --title-bar-height: 20px; }
.mac-os-11 { --title-bar-height: 28px; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, "Segoe UI Emoji", "SF Pro", sans-serif; -webkit-font-smoothing: antialiased; }
h1, h2, h3, h4, h5 { white-space: pre-wrap; }
body { margin: 0px; padding: 0px; height: auto; inset: 0px; font-size: 1rem; line-height: 1.42857; overflow-x: hidden; background: inherit; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; overflow-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 36px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p *, #write.first-line-indent svg * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
.typora-export .task-list-item input { pointer-events: none; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
}
#write li > figure:last-child { margin-bottom: 0.5rem; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; image-orientation: from-image; }
button, input, select, textarea { color: inherit; font: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; position: relative; }
#write svg h1, #write svg h2, #write svg h3, #write svg h4, #write svg h5, #write svg h6, #write svg p { position: static; white-space: nowrap; overflow: visible; }
foreignobject { overflow: visible; }
p { line-height: inherit; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 4; }
p { orphans: 4; }
li p { orphans: 1; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px; }
thead, tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right: 0px; background-color: inherit; }
.CodeMirror-linenumber { user-select: none; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-fences-adv-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
svg { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: 0px 0px; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; -webkit-tap-highlight-color: transparent; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li blockquote { margin: 1rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; font-variant-ligatures: no-common-ligatures; }
  #write { margin-top: 0px; border-color: transparent !important; padding-top: 0px !important; padding-bottom: 0px !important; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  .typora-export #write { break-after: avoid; }
  .typora-export #write::after { height: 0px; }
  .is-mac table { break-inside: avoid; }
  #write > p:nth-child(1) { margin-top: 0px; }
  .typora-export-show-outline .typora-export-sidebar { display: none; }
  figure { overflow-x: visible; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
#write.first-line-indent p > .md-image:only-child:not(.md-img-error) img { left: -2em; position: relative; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
.MathJax_ref { fill: currentcolor; }
[contenteditable="true"]:active, [contenteditable="true"]:focus, [contenteditable="false"]:active, [contenteditable="false"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); border: none; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.reversefootnote { font-family: ui-monospace, sans-serif; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.6; font-family: var(--monospace); }
code { text-align: left; vertical-align: initial; }
a.md-print-anchor { white-space: pre !important; border-width: initial !important; border-style: none !important; border-color: initial !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="flow"] svg, [lang="mermaid"] svg { max-width: 100%; height: auto; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom: 0px; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: none; }
.highlight td, .highlight tr { border: 0px; }
mark { background: rgb(255, 255, 0); color: rgb(0, 0, 0); }
.md-html-inline .md-plain, .md-html-inline strong, mark .md-inline-math, mark strong { color: inherit; }
.md-expand mark .md-meta { opacity: 0.3 !important; }
mark .md-meta { color: rgb(0, 0, 0); }
@media print {
  .typora-export h1, .typora-export h2, .typora-export h3, .typora-export h4, .typora-export h5, .typora-export h6 { break-inside: avoid; }
}
.md-diagram-panel .messageText { stroke: none !important; }
.md-diagram-panel .start-state { fill: var(--node-fill); }
.md-diagram-panel .edgeLabel rect { opacity: 1 !important; }
.md-fences.md-fences-math { font-size: 1em; }
.md-fences-advanced:not(.md-focus) { padding: 0px; white-space: nowrap; border: 0px; }
.md-fences-advanced:not(.md-focus) { background: inherit; }
.mermaid-svg { margin: auto; }
.typora-export-show-outline .typora-export-content { max-width: 1440px; margin: auto; display: flex; flex-direction: row; }
.typora-export-sidebar { width: 300px; font-size: 0.8rem; margin-top: 80px; margin-right: 18px; }
.typora-export-show-outline #write { --webkit-flex: 2; flex: 2 1 0%; }
.typora-export-sidebar .outline-content { position: fixed; top: 0px; max-height: 100%; overflow: hidden auto; padding-bottom: 30px; padding-top: 60px; width: 300px; }
@media screen and (max-width: 1024px) {
  .typora-export-sidebar, .typora-export-sidebar .outline-content { width: 240px; }
}
@media screen and (max-width: 800px) {
  .typora-export-sidebar { display: none; }
}
.outline-content li, .outline-content ul { margin-left: 0px; margin-right: 0px; padding-left: 0px; padding-right: 0px; list-style: none; overflow-wrap: anywhere; }
.outline-content ul { margin-top: 0px; margin-bottom: 0px; }
.outline-content strong { font-weight: 400; }
.outline-expander { width: 1rem; height: 1.42857rem; position: relative; display: table-cell; vertical-align: middle; cursor: pointer; padding-left: 4px; }
.outline-expander::before { content: ""; position: relative; font-family: Ionicons; display: inline-block; font-size: 8px; vertical-align: middle; }
.outline-item { padding-top: 3px; padding-bottom: 3px; cursor: pointer; }
.outline-expander:hover::before { content: ""; }
.outline-h1 > .outline-item { padding-left: 0px; }
.outline-h2 > .outline-item { padding-left: 1em; }
.outline-h3 > .outline-item { padding-left: 2em; }
.outline-h4 > .outline-item { padding-left: 3em; }
.outline-h5 > .outline-item { padding-left: 4em; }
.outline-h6 > .outline-item { padding-left: 5em; }
.outline-label { cursor: pointer; display: table-cell; vertical-align: middle; text-decoration: none; color: inherit; }
.outline-label:hover { text-decoration: underline; }
.outline-item:hover { border-color: rgb(245, 245, 245); background-color: var(--item-hover-bg-color); }
.outline-item:hover { margin-left: -28px; margin-right: -28px; border-left: 28px solid transparent; border-right: 28px solid transparent; }
.outline-item-single .outline-expander::before, .outline-item-single .outline-expander:hover::before { display: none; }
.outline-item-open > .outline-item > .outline-expander::before { content: ""; }
.outline-children { display: none; }
.info-panel-tab-wrapper { display: none; }
.outline-item-open > .outline-children { display: block; }
.typora-export .outline-item { padding-top: 1px; padding-bottom: 1px; }
.typora-export .outline-item:hover { margin-right: -8px; border-right: 8px solid transparent; }
.typora-export .outline-expander::before { content: "+"; font-family: inherit; top: -1px; }
.typora-export .outline-expander:hover::before, .typora-export .outline-item-open > .outline-item > .outline-expander::before { content: "−"; }
.typora-export-collapse-outline .outline-children { display: none; }
.typora-export-collapse-outline .outline-item-open > .outline-children, .typora-export-no-collapse-outline .outline-children { display: block; }
.typora-export-no-collapse-outline .outline-expander::before { content: "" !important; }
.typora-export-show-outline .outline-item-active > .outline-item .outline-label { font-weight: 700; }
.md-inline-math-container mjx-container { zoom: 0.95; }
mjx-container { break-inside: avoid; }
.md-alert.md-alert-note { border-left-color: rgb(9, 105, 218); }
.md-alert.md-alert-important { border-left-color: rgb(130, 80, 223); }
.md-alert.md-alert-warning { border-left-color: rgb(154, 103, 0); }
.md-alert.md-alert-tip { border-left-color: rgb(31, 136, 61); }
.md-alert.md-alert-caution { border-left-color: rgb(207, 34, 46); }
.md-alert { padding: 0px 1em; margin-bottom: 16px; color: inherit; border-left: 0.25em solid rgb(0, 0, 0); }
.md-alert-text-note { color: rgb(9, 105, 218); }
.md-alert-text-important { color: rgb(130, 80, 223); }
.md-alert-text-warning { color: rgb(154, 103, 0); }
.md-alert-text-tip { color: rgb(31, 136, 61); }
.md-alert-text-caution { color: rgb(207, 34, 46); }
.md-alert-text { font-size: 0.9rem; font-weight: 700; }
.md-alert-text svg { fill: currentcolor; position: relative; top: 0.125em; margin-right: 1ch; overflow: visible; }
.md-alert-text-container::after { content: attr(data-text); text-transform: capitalize; pointer-events: none; margin-right: 1ch; }

</style>
<style type='text/css'  id="style-codemirror">.CodeMirror { height: auto; }
.CodeMirror.cm-s-inner { background: inherit; }
.CodeMirror-scroll { overflow: auto hidden; z-index: 3; }
.CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler { background-color: rgb(255, 255, 255); }
.CodeMirror-gutters { border-right: 1px solid rgb(221, 221, 221); background: inherit; white-space: nowrap; }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: rgb(0, 0, 0); }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-property { color: rgb(0, 0, 0); }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: rgb(0, 0, 255); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: 700; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: red; }
.cm-invalidchar { color: red; }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background: inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { height: 100%; outline: 0px; position: relative; box-sizing: content-box; background: inherit; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar { position: absolute; z-index: 6; display: none; outline: 0px; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow: hidden; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow: auto hidden; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 10px; z-index: 3; overflow-y: hidden; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; background: 0px 0px !important; border: none !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-radius: 0px; border-width: 0px; background: 0px 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; overflow-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; }
.CodeMirror-wrap pre { overflow-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right: 30px solid transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right: none; width: auto; }
.CodeMirror-linebackground { position: absolute; inset: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right: none; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.cm-searching { background: rgba(255, 255, 0, 0.4); }
span.cm-underlined { text-decoration: underline; }
span.cm-strikethrough { text-decoration: line-through; }
.cm-tw-syntaxerror { color: rgb(255, 255, 255); background-color: rgb(153, 0, 0); }
.cm-tw-deleted { text-decoration: line-through; }
.cm-tw-header5 { font-weight: 700; }
.cm-tw-listitem:first-child { padding-left: 10px; }
.cm-tw-box { border-style: solid; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-color: inherit; border-top-width: 0px !important; }
.cm-tw-underline { text-decoration: underline; }
@media print {
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}

</style>
<link rel='stylesheet' href='https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700,700italic&amp;subset=latin,cyrillic-ext,cyrillic,latin-ext' type='text/css' />
<style type='text/css'  id="style-theme_css">/* meyer reset -- http://meyerweb.com/eric/tools/css/reset/ , v2.0 | 20110126 | License: none (public domain) */

@include-when-export url(https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700,700italic&subset=latin,cyrillic-ext,cyrillic,latin-ext);

/* =========== */

/* pt-serif-regular - latin */
/* pt-serif-italic - latin */
/* pt-serif-700 - latin */
/* pt-serif-700italic - latin */
:root {
	--active-file-bg-color: #dadada;
	--active-file-bg-color: rgba(32, 43, 51, 0.63);
	--active-file-text-color: white;
	--bg-color: #f3f2ee;
	--text-color: #1f0909;
	--control-text-color: #444;
	--rawblock-edit-panel-bd: #e5e5e5;

	--select-text-bg-color: rgba(32, 43, 51, 0.63);
  --select-text-font-color: white;
}

pre {
	--select-text-bg-color: #36284e;
	--select-text-font-color: #fff;
}

html {
	font-size: 16px;
	-webkit-font-smoothing: antialiased;
}

html, body {
	background-color: #f3f2ee;
	font-family: "PT Serif", 'Times New Roman', 'SF Pro', Times, serif;
	color: #1f0909;
	line-height: 1.5em;
}

/*#write {
	overflow-x: auto;
    max-width: initial;
	padding-left: calc(50% - 17em);
    padding-right: calc(50% - 17em);
}

@media (max-width: 36em) {
 	#write {
 		padding-left: 1em;
    	padding-right: 1em;
 	}
}*/

#write {
	max-width: 40em;
}

@media only screen and (min-width: 1400px) {
	#write {
			max-width: 914px;
	}
}

ol li {
	list-style-type: decimal;
	list-style-position: outside;
}
ul li {
	list-style-type: disc;
	list-style-position: outside;
}

ol,
ul {
	list-style: none;
}

blockquote,
q {
	quotes: none;
}
blockquote:before,
blockquote:after,
q:before,
q:after {
	content: '';
	content: none;
}
table {
	border-collapse: collapse;
	border-spacing: 0;
}
/* styles */

/* ====== */

/* headings */

h1,
h2,
h3,
h4,
h5,
h6 {
	font-weight: bold;
}
h1 {
	font-size: 1.875em;
	/*30 / 16*/
	line-height: 1.6em;
	/* 48 / 30*/
	margin-top: 2em;
}
h2,
h3 {
	font-size: 1.3125em;
	/*21 / 16*/
	line-height: 1.15;
	/*24 / 21*/
	margin-top: 2.285714em;
	/*48 / 21*/
	margin-bottom: 1.15em;
	/*24 / 21*/
}
h3 {
	font-weight: normal;
}
h4 {
	font-size: 1.125em;
	/*18 / 16*/
	margin-top: 2.67em;
	/*48 / 18*/
}
h5,
h6 {
	font-size: 1em;
	/*16*/
}
h1 {
	border-bottom: 1px solid;
	margin-bottom: 1.875em;
	padding-bottom: 0.8125em;
}
/* links */

a {
	text-decoration: none;
	color: #065588;
}
a:hover,
a:active {
	text-decoration: underline;
}
/* block spacing */

p,
blockquote,
.md-fences {
	margin-bottom: 1.5em;
}
h1,
h2,
h3,
h4,
h5,
h6 {
	margin-bottom: 1.5em;
}
/* blockquote */

blockquote {
	font-style: italic;
	border-left: 5px solid;
	margin-left: 2em;
	padding-left: 1em;
}
/* lists */

ul,
ol {
	margin: 0 0 1.5em 1.5em;
}
/* tables */
.md-meta,.md-before, .md-after {
	color:#999;
}

table {
	margin-bottom: 1.5em;
	/*24 / 16*/
	font-size: 1em;
	/* width: 100%; */
}
thead th,
tfoot th {
	padding: .25em .25em .25em .4em;
	text-transform: uppercase;
}
th {
	text-align: left;
}
td {
	vertical-align: top;
	padding: .25em .25em .25em .4em;
}

code,
.md-fences {
	background-color: #dadada;
}

code {
	padding-left: 2px;
	padding-right: 2px;
}

.md-fences {
	margin-left: 2em;
	margin-bottom: 3em;
	padding-left: 1ch;
	padding-right: 1ch;
}

pre,
code,
tt {
	font-size: .875em;
	line-height: 1.714285em;
}
/* some fixes */

h1 {
	line-height: 1.3em;
	font-weight: normal;
	margin-bottom: 0.5em;
}

p + ul,
p + ol{
	margin-top: .5em;
}

h3 + ul,
h4 + ul,
h5 + ul,
h6 + ul,
h3 + ol,
h4 + ol,
h5 + ol,
h6 + ol {
	margin-top: .5em;
}

li > ul,
li > ol {
	margin-top: inherit;
	margin-bottom: 0;
}

li ol>li {
	list-style-type: lower-alpha;
}

li li ol>li{
	list-style-type: lower-roman;
}

h2,
h3 {
	margin-bottom: .75em;
}
hr {
	border-top: none;
	border-right: none;
	border-bottom: 1px solid;
	border-left: none;
}
h1 {
	border-color: #c5c5c5;
}
blockquote {
	border-color: #bababa;
	color: #656565;
}

blockquote ul,
blockquote ol {
	margin-left:0;
}

.ty-table-edit {
	background-color: transparent;
}
thead {
	background-color: #dadada;
}
tr:nth-child(even) {
	background: #e8e7e7;
}
hr {
	border-color: #c5c5c5;
}
.task-list{
	padding-left: 1rem;
}

.md-task-list-item {
	padding-left: 1.5rem;
	list-style-type: none;
}

.md-task-list-item > input:before {
	content: '\221A';
	display: inline-block;
	width: 1.25rem;
  	height: 1.6rem;
	vertical-align: middle;
	text-align: center;
	color: #ddd;
	background-color: #F3F2EE;
}

.md-task-list-item > input:checked:before,
.md-task-list-item > input[checked]:before{
	color: inherit;
}

#write pre.md-meta-block {
	min-height: 1.875rem;
	color: #555;
	border: 0px;
	background: transparent;
	margin-top: -4px;
	margin-left: 1em;
	margin-top: 1em;
}

.md-image>.md-meta {
	color: #9B5146;
}

.md-image>.md-meta{
	font-family: Menlo, 'Ubuntu Mono', Consolas, 'Courier New', 'Microsoft Yahei', 'Hiragino Sans GB', 'WenQuanYi Micro Hei', serif;
}


#write>h3.md-focus:before{
	left: -1.5rem;
	color:#999;
	border-color:#999;
}
#write>h4.md-focus:before{
	left: -1.5rem;
	top: .25rem;
	color:#999;
	border-color:#999;
}
#write>h5.md-focus:before{
	left: -1.5rem;
	top: .0.3125rem;
	color:#999;
	border-color:#999;
}
#write>h6.md-focus:before{
	left: -1.5rem;
	top: 0.3125rem;
	color:#999;
	border-color:#999;
}

.md-toc:focus .md-toc-content{
	margin-top: 19px;
}

.md-toc-content:empty:before{
	color: #065588;
}
.md-toc-item {
	color: #065588;
}
#write div.md-toc-tooltip {
	background-color: #f3f2ee;
}

#typora-sidebar {
	background-color: #f3f2ee;
	-webkit-box-shadow: 0 6px 12px rgba(0, 0, 0, 0.375);
  	box-shadow: 0 6px 12px rgba(0, 0, 0, 0.375);
}

.pin-outline #typora-sidebar {
	background: inherit;
	box-shadow: none;
	border-right: 1px dashed;
}

.pin-outline #typora-sidebar:hover .outline-title-wrapper {
	border-left:1px dashed;
}

.outline-item:hover {
  background-color: #dadada;
  border-left: 28px solid #dadada;
  border-right: 18px solid #dadada;
}

.typora-node .outline-item:hover {
  	border-right: 28px solid #dadada;
}

.outline-expander:before {
  content: "\f0da";
  font-family: FontAwesome;
  font-size:14px;
  top: 1px;
}

.outline-expander:hover:before,
.outline-item-open>.outline-item>.outline-expander:before {
  content: "\f0d7";
}

.modal-content {
	background-color: #f3f2ee;
}

.auto-suggest-container ul li {
	list-style-type: none;
}

/** UI for electron */

.megamenu-menu,
#top-titlebar, #top-titlebar *,
.megamenu-content {
	background: #f3f2ee;
	color: #1f0909;
}

.megamenu-menu-header {
	border-bottom: 1px dashed #202B33;
}

.megamenu-menu {
	box-shadow: none;
	border-right: 1px dashed;
}

header, .context-menu, .megamenu-content, footer {
	font-family: "PT Serif", 'Times New Roman', Times, serif;
    color: #1f0909;
}

#megamenu-back-btn {
	color: #1f0909;
	border-color: #1f0909;
}

.megamenu-menu-header #megamenu-menu-header-title:before {
	color: #1f0909;
}

.megamenu-menu-list li a:hover, .megamenu-menu-list li a.active {
	color: inherit;
	background-color: #e8e7df;
}

.long-btn:hover {
	background-color: #e8e7df;
}

#recent-file-panel tbody tr:nth-child(2n-1) {
    background-color: transparent !important;
}

.megamenu-menu-panel tbody tr:hover td:nth-child(2) {
    color: inherit;
}

.megamenu-menu-panel .btn {
	background-color: #D2D1D1;
}

.btn-default {
	background-color: transparent;
}

.typora-sourceview-on #toggle-sourceview-btn,
.ty-show-word-count #footer-word-count {
	background: #c7c5c5;
}

#typora-quick-open {
    background-color: inherit;
}

.md-diagram-panel {
	margin-top: 8px;
}

.file-list-item-file-name {
	font-weight: initial;
}

.file-list-item-summary {
	opacity: 1;
}

.file-list-item {
	color: #777;
}

.file-list-item.active {
	background-color: inherit;
	color: black;
}

.ty-side-sort-btn.active {
	background-color: inherit;
}

.file-list-item.active .file-list-item-file-name  {
	font-weight: bold;
}

.file-list-item{
    opacity:1 !important;
}

.file-library-node.active>.file-node-background{
	background-color: rgba(32, 43, 51, 0.63);
	background-color: var(--active-file-bg-color);
}

.file-tree-node.active>.file-node-content{
	color: white;
	color: var(--active-file-text-color);
}

.md-task-list-item>input {
	margin-left: -1.7em;
	margin-top: calc(1rem - 12px);
	-webkit-appearance: button;
}

input {
	border: 1px solid #aaa;
}

.megamenu-menu-header #megamenu-menu-header-title,
.megamenu-menu-header:hover, 
.megamenu-menu-header:focus {
	color: inherit;
}

.dropdown-menu .divider {
	border-color: #e5e5e5;
	opacity: 1;
}

/* https://github.com/typora/typora-issues/issues/2046 */
.os-windows-7 strong,
.os-windows-7 strong  {
	font-weight: 760;
}

.ty-preferences .btn-default {
	background: transparent;
}

.ty-preferences .window-header {
	border-bottom: 1px dashed #202B33;
	box-shadow: none;
}

#sidebar-loading-template, #sidebar-loading-template.file-list-item {
	color: #777;
}

.searchpanel-search-option-btn.active {
	background: #777;
	color: white;
}

.export-detail, .light .export-detail, 
.light .export-item.active, 
.light .export-items-list-control {
	background: #e0e0e0;
	border-radius: 2px;
	font-weight: 700;
	color: inherit
}</style>
<style type='text/css'  id="style-lp">ol, ul {padding-left: 40px}</style>

<title>ARCHITECTURE</title>
</head>
<body class='typora-export os-windows'><div class='typora-export-content'>
<div id='write'  class=''><h1 id='habitat-analysis-architecture'><span>Habitat Analysis Architecture</span></h1><p><span>This document describes the architecture of the habitat analysis module, including component relationships, data flow, and execution patterns.</span></p><h2 id='table-of-contents'><span>Table of Contents</span></h2><ol start='' ><li><p><a href='#overview'><span>Overview</span></a></p></li><li><p><a href='#system-architecture'><span>System Architecture</span></a></p></li><li><p><a href='#component-hierarchy'><span>Component Hierarchy</span></a></p></li><li><p><a href='#data-flow'><span>Data Flow</span></a></p></li><li><p><a href='#clustering-strategies'><span>Clustering Strategies</span></a></p></li><li><p><a href='#pipeline-execution'><span>Pipeline Execution</span></a></p></li><li><p><a href='#manager-pattern'><span>Manager Pattern</span></a></p></li></ol><h2 id='overview'><span>Overview</span></h2><p><span>The habitat analysis module implements a flexible, sklearn-style pipeline for tumor habitat clustering. It supports three clustering strategies (two-step, one-step, and direct pooling) and provides both training and prediction modes.</span></p><h3 id='key-design-principles'><span>Key Design Principles</span></h3><ul><li><p><strong><span>Strategy Pattern</span></strong><span>: Different clustering approaches implemented as separate strategy classes</span></p></li><li><p><strong><span>Pipeline Pattern</span></strong><span>: sklearn-like pipeline with </span><code>fit()</code><span> and </span><code>transform()</code><span> methods</span></p></li><li><p><strong><span>Manager Pattern</span></strong><span>: Dedicated managers for features, clustering, and results</span></p></li><li><p><strong><span>Dependency Injection</span></strong><span>: Services created via </span><code>ServiceConfigurator</code><span> for testability</span></p></li></ul><h2 id='system-architecture'><span>System Architecture</span></h2><h3 id='high-level-architecture-diagram'><span>High-Level Architecture Diagram</span></h3><div class="md-diagram-panel md-fences-adv-panel" lang="mermaid"><svg id="mermaidChart36" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="flowchart mermaid-svg" style="max-width: 1107.9964599609375px;" viewBox="0 0 1107.9964599609375 1471.8681640625" role="graphics-document document" aria-roledescription="flowchart-v2"><style>#mermaidChart36{font-family:sans-serif;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaidChart36 .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaidChart36 .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaidChart36 .error-icon{fill:#552222;}#mermaidChart36 .error-text{fill:#552222;stroke:#552222;}#mermaidChart36 .edge-thickness-normal{stroke-width:1px;}#mermaidChart36 .edge-thickness-thick{stroke-width:3.5px;}#mermaidChart36 .edge-pattern-solid{stroke-dasharray:0;}#mermaidChart36 .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaidChart36 .edge-pattern-dashed{stroke-dasharray:3;}#mermaidChart36 .edge-pattern-dotted{stroke-dasharray:2;}#mermaidChart36 .marker{fill:#333333;stroke:#333333;}#mermaidChart36 .marker.cross{stroke:#333333;}#mermaidChart36 svg{font-family:sans-serif;font-size:16px;}#mermaidChart36 p{margin:0;}#mermaidChart36 .label{font-family:sans-serif;color:#333;}#mermaidChart36 .cluster-label text{fill:#333;}#mermaidChart36 .cluster-label span{color:#333;}#mermaidChart36 .cluster-label span p{background-color:transparent;}#mermaidChart36 .label text,#mermaidChart36 span{fill:#333;color:#333;}#mermaidChart36 .node rect,#mermaidChart36 .node circle,#mermaidChart36 .node ellipse,#mermaidChart36 .node polygon,#mermaidChart36 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaidChart36 .rough-node .label text,#mermaidChart36 .node .label text,#mermaidChart36 .image-shape .label,#mermaidChart36 .icon-shape .label{text-anchor:middle;}#mermaidChart36 .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaidChart36 .rough-node .label,#mermaidChart36 .node .label,#mermaidChart36 .image-shape .label,#mermaidChart36 .icon-shape .label{text-align:center;}#mermaidChart36 .node.clickable{cursor:pointer;}#mermaidChart36 .root .anchor path{fill:#333333!important;stroke-width:0;stroke:#333333;}#mermaidChart36 .arrowheadPath{fill:#333333;}#mermaidChart36 .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaidChart36 .flowchart-link{stroke:#333333;fill:none;}#mermaidChart36 .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaidChart36 .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#mermaidChart36 .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaidChart36 .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#mermaidChart36 .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaidChart36 .cluster text{fill:#333;}#mermaidChart36 .cluster span{color:#333;}#mermaidChart36 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaidChart36 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaidChart36 rect.text{fill:none;stroke-width:0;}#mermaidChart36 .icon-shape,#mermaidChart36 .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaidChart36 .icon-shape p,#mermaidChart36 .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#mermaidChart36 .icon-shape rect,#mermaidChart36 .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaidChart36 .label-icon{display:inline-block;height:1em;overflow:visible;vertical-align:-0.125em;}#mermaidChart36 .node .label-icon path{fill:currentColor;stroke:revert;stroke-width:revert;}#mermaidChart36 :root{--mermaid-alt-font-family:sans-serif;}</style><g><marker id="mermaidChart36_flowchart-v2-pointEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart36_flowchart-v2-pointStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="4.5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart36_flowchart-v2-circleEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart36_flowchart-v2-circleStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart36_flowchart-v2-crossEnd" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart36_flowchart-v2-crossStart" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><g class="root"><g class="clusters"><g class="cluster " id="subGraph4" data-look="classic"><rect style="" x="277.73523330688477" y="901.9235877990723" width="587.2894859313965" height="383.9583206176758"></rect><g class="cluster-label " transform="translate(518.2983837127686, 901.9235877990723)"><foreignObject width="106.1631851196289" height="23.993053436279297"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Pipeline Layer</p></span></div></foreignObject></g></g><g class="cluster " id="subGraph3" data-look="classic"><rect style="" x="207.65711212158203" y="619.9444274902344" width="788.0859184265137" height="231.9791603088379"></rect><g class="cluster-label " transform="translate(547.4162197113037, 619.9444274902344)"><foreignObject width="108.56770324707031" height="23.993053436279297"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Strategy Layer</p></span></div></foreignObject></g></g><g class="cluster " id="subGraph2" data-look="classic"><rect style="" x="8" y="1335.881908416748" width="983.2877311706543" height="127.9861068725586"></rect><g class="cluster-label " transform="translate(442.6603603363037, 1335.881908416748)"><foreignObject width="113.96701049804688" height="23.993053436279297"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Manager Layer</p></span></div></foreignObject></g></g><g class="cluster " id="subGraph1" data-look="classic"><rect style="" x="8.494789123535156" y="313.9722137451172" width="1091.5017127990723" height="255.9722137451172"></rect><g class="cluster-label " transform="translate(504.12846183776855, 313.9722137451172)"><foreignObject width="100.23436737060547" height="23.993053436279297"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Service Layer</p></span></div></foreignObject></g></g><g class="cluster " id="subGraph0" data-look="classic"><rect style="" x="280.4696159362793" y="8" width="298.9930419921875" height="255.9722137451172"></rect><g class="cluster-label " transform="translate(387.9522514343262, 8)"><foreignObject width="84.02777099609375" height="23.993053436279297"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Entry Point</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path d="M429.966,110.986L429.966,135.986L429.966,156.986" id="L_CLI_Config_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart36_flowchart-v2-pointEnd)"></path><path d="M429.966,238.972L429.966,263.972L429.966,288.972L429.966,313.972L429.966,334.972" id="L_Config_SC_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart36_flowchart-v2-pointEnd)"></path><path d="M429.966,416.958L429.966,441.958L429.966,462.958" id="L_SC_HA_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart36_flowchart-v2-pointEnd)"></path><path d="M332.184,524.633L95.01,569.944L95.01,594.944L95.01,619.944L95.01,683.937L95.01,747.931L95.01,799.927L95.01,851.924L95.01,876.924L95.01,901.924L95.01,965.917L95.01,1029.91L95.01,1093.903L95.01,1157.896L95.01,1221.889L95.01,1285.882L95.01,1310.882L95.01,1335.882L113.798,1357.842" id="L_HA_FM_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart36_flowchart-v2-pointEnd)"></path><path d="M332.184,526.319L122.748,569.944L122.748,594.944L122.748,619.944L122.748,683.937L122.748,747.931L122.748,799.927L122.748,851.924L122.748,876.924L122.748,901.924L122.748,965.917L122.748,1029.91L122.748,1093.903L122.748,1157.896L122.748,1221.889L122.748,1285.882L320.724,1310.882L320.724,1335.882L441.609,1368.363" id="L_HA_CM_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart36_flowchart-v2-pointEnd)"></path><path d="M527.748,516.634L1015.743,569.944L1015.743,594.944L1015.743,619.944L1015.743,683.937L1015.743,747.931L1015.743,799.927L1015.743,851.924L1015.743,876.924L1015.743,901.924L1015.743,965.917L1015.743,1029.91L1015.743,1093.903L1015.743,1157.896L1015.743,1221.889L1015.743,1285.882L783.267,1310.882L783.267,1335.882L802.521,1357.872" id="L_HA_RM_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart36_flowchart-v2-pointEnd)"></path><path d="M527.748,536.896L632.175,569.944L632.175,594.944L632.175,619.944L632.175,640.944" id="L_HA_BS_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart36_flowchart-v2-pointEnd)"></path><path d="M514.089,710.594L348.697,747.931L348.697,768.931" id="L_BS_TS_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart36_flowchart-v2-pointEnd)"></path><path d="M604.759,722.931L587.182,747.931L587.182,768.931" id="L_BS_OS_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart36_flowchart-v2-pointEnd)"></path><path d="M750.261,719.44L845.025,747.931L845.025,768.931" id="L_BS_DP_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart36_flowchart-v2-pointEnd)"></path><path d="M348.697,826.924L348.697,851.924L348.697,876.924L348.697,901.924L472.385,935.113" id="L_TS_HP_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart36_flowchart-v2-pointEnd)"></path><path d="M587.182,826.924L587.182,851.924L587.182,876.924L587.182,901.924L587.182,922.924" id="L_OS_HP_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart36_flowchart-v2-pointEnd)"></path><path d="M845.025,826.924L845.025,851.924L845.025,876.924L845.025,901.924L701.997,937.421" id="L_DP_HP_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart36_flowchart-v2-pointEnd)"></path><path d="M587.182,1004.91L587.182,1029.91L587.182,1050.91" id="L_HP_BPS_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart36_flowchart-v2-pointEnd)"></path><path d="M587.182,1132.896L587.182,1157.896L587.182,1178.896" id="L_BPS_Steps_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart36_flowchart-v2-pointEnd)"></path><path d="M483.873,1260.882L417.638,1285.882L300.724,1310.882L300.724,1335.882L245.429,1359.321" id="L_Steps_FM_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart36_flowchart-v2-pointEnd)"></path><path d="M620.495,1260.882L641.854,1285.882L641.854,1310.882L641.854,1335.882L612.609,1358.439" id="L_Steps_CM_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart36_flowchart-v2-pointEnd)"></path><path d="M696.349,1259.067L775.088,1285.882L905.292,1310.882L905.292,1335.882L882.381,1358.097" id="L_Steps_RM_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart36_flowchart-v2-pointEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default  " id="flowchart-CLI-0" transform="translate(429.96613693237305, 71.9930534362793)"><rect class="basic label-container" style="" x="-94.52690887451172" y="-38.9930534362793" width="189.05381774902344" height="77.9861068725586"></rect><g class="label" style="" transform="translate(-64.52690887451172, -23.993053436279297)"><rect></rect><foreignObject width="129.05381774902344" height="47.986106872558594"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>CLI Command<br/>habit get-habitat</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-Config-1" transform="translate(429.96613693237305, 199.9791603088379)"><rect class="basic label-container" style="" x="-114.49652099609375" y="-38.9930534362793" width="228.9930419921875" height="77.9861068725586"></rect><g class="label" style="" transform="translate(-84.49652099609375, -23.993053436279297)"><rect></rect><foreignObject width="168.9930419921875" height="47.986106872558594"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>YAML Config<br/>HabitatAnalysisConfig</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-SC-2" transform="translate(429.96613693237305, 377.9652671813965)"><rect class="basic label-container" style="" x="-113.50694274902344" y="-38.9930534362793" width="227.01388549804688" height="77.9861068725586"></rect><g class="label" style="" transform="translate(-83.50694274902344, -23.993053436279297)"><rect></rect><foreignObject width="167.01388549804688" height="47.986106872558594"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>ServiceConfigurator<br/>Dependency Injection</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-HA-3" transform="translate(429.96613693237305, 505.9513740539551)"><rect class="basic label-container" style="" x="-97.78211212158203" y="-38.9930534362793" width="195.56422424316406" height="77.9861068725586"></rect><g class="label" style="" transform="translate(-67.78211212158203, -23.993053436279297)"><rect></rect><foreignObject width="135.56422424316406" height="47.986106872558594"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>HabitatAnalysis<br/>Main Coordinator</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-FM-4" transform="translate(149.75780868530273, 1399.8749618530273)"><rect class="basic label-container" style="" x="-99.01909637451172" y="-38.9930534362793" width="198.03819274902344" height="77.9861068725586"></rect><g class="label" style="" transform="translate(-69.01909637451172, -23.993053436279297)"><rect></rect><foreignObject width="138.03819274902344" height="47.986106872558594"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>FeatureManager<br/>Feature Extraction</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-CM-5" transform="translate(558.8875770568848, 1399.8749618530273)"><rect class="basic label-container" style="" x="-113.4157943725586" y="-38.9930534362793" width="226.8315887451172" height="77.9861068725586"></rect><g class="label" style="" transform="translate(-83.4157943725586, -23.993053436279297)"><rect></rect><foreignObject width="166.8315887451172" height="47.986106872558594"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>ClusteringManager<br/>Clustering Algorithms</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-RM-6" transform="translate(839.2955513000488, 1399.8749618530273)"><rect class="basic label-container" style="" x="-116.99217987060547" y="-38.9930534362793" width="233.98435974121094" height="77.9861068725586"></rect><g class="label" style="" transform="translate(-86.99217987060547, -23.993053436279297)"><rect></rect><foreignObject width="173.98435974121094" height="47.986106872558594"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>ResultManager<br/>Results &amp; Visualization</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-BS-7" transform="translate(632.1753349304199, 683.9374809265137)"><rect class="basic label-container" style="" x="-118.08592987060547" y="-38.9930534362793" width="236.17185974121094" height="77.9861068725586"></rect><g class="label" style="" transform="translate(-88.08592987060547, -23.993053436279297)"><rect></rect><foreignObject width="176.17185974121094" height="47.986106872558594"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>BaseClusteringStrategy<br/>Abstract Interface</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-TS-8" transform="translate(348.6966018676758, 799.9270610809326)"><rect class="basic label-container" style="" x="-93.9930534362793" y="-26.99652671813965" width="187.9861068725586" height="53.9930534362793"></rect><g class="label" style="" transform="translate(-63.9930534362793, -11.996526718139648)"><rect></rect><foreignObject width="127.9861068725586" height="23.993053436279297"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>TwoStepStrategy</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-OS-9" transform="translate(587.1818389892578, 799.9270610809326)"><rect class="basic label-container" style="" x="-94.49217987060547" y="-26.99652671813965" width="188.98435974121094" height="53.9930534362793"></rect><g class="label" style="" transform="translate(-64.49217987060547, -11.996526718139648)"><rect></rect><foreignObject width="128.98435974121094" height="23.993053436279297"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>OneStepStrategy</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-DP-10" transform="translate(845.0247192382812, 799.9270610809326)"><rect class="basic label-container" style="" x="-113.35069274902344" y="-26.99652671813965" width="226.70138549804688" height="53.9930534362793"></rect><g class="label" style="" transform="translate(-83.35069274902344, -11.996526718139648)"><rect></rect><foreignObject width="166.70138549804688" height="23.993053436279297"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>DirectPoolingStrategy</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-HP-11" transform="translate(587.1818389892578, 965.9166412353516)"><rect class="basic label-container" style="" x="-110.93315124511719" y="-38.9930534362793" width="221.86630249023438" height="77.9861068725586"></rect><g class="label" style="" transform="translate(-80.93315124511719, -23.993053436279297)"><rect></rect><foreignObject width="161.86630249023438" height="47.986106872558594"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>HabitatPipeline<br/>sklearn-style Pipeline</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-BPS-12" transform="translate(587.1818389892578, 1093.9027481079102)"><rect class="basic label-container" style="" x="-94.98697662353516" y="-38.9930534362793" width="189.9739532470703" height="77.9861068725586"></rect><g class="label" style="" transform="translate(-64.98697662353516, -23.993053436279297)"><rect></rect><foreignObject width="129.9739532470703" height="47.986106872558594"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>BasePipelineStep<br/>Step Interface</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-Steps-13" transform="translate(587.1818389892578, 1221.8888549804688)"><rect class="basic label-container" style="" x="-109.16666412353516" y="-38.9930534362793" width="218.3333282470703" height="77.9861068725586"></rect><g class="label" style="" transform="translate(-79.16666412353516, -23.993053436279297)"><rect></rect><foreignObject width="158.3333282470703" height="47.986106872558594"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Pipeline Steps<br/>7 Steps for Two-Step</p></span></div></foreignObject></g></g></g></g></g></svg></div><h3 id='component-interaction-flow'><span>Component Interaction Flow</span></h3><div class="md-diagram-panel md-fences-adv-panel" lang="mermaid"><svg id="mermaidChart37" width="1907.5" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="1043" viewBox="-8 -8 1907.5 1043" role="graphics-document document" aria-roledescription="sequence" class="mermaid-svg"><g><rect x="1741.5" y="961" fill="#eaeaea" stroke="#666" width="150" height="65" name="Managers" rx="3" ry="3" class="actor actor-bottom"></rect><text x="1816.5" y="993.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400; font-family: sans-serif;"><tspan x="1816.5" dy="0">Managers</tspan></text></g><g><rect x="1499.5" y="961" fill="#eaeaea" stroke="#666" width="150" height="65" name="Pipeline" rx="3" ry="3" class="actor actor-bottom"></rect><text x="1574.5" y="993.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400; font-family: sans-serif;"><tspan x="1574.5" dy="0">Pipeline</tspan></text></g><g><rect x="1287.5" y="961" fill="#eaeaea" stroke="#666" width="150" height="65" name="Strategy" rx="3" ry="3" class="actor actor-bottom"></rect><text x="1362.5" y="993.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400; font-family: sans-serif;"><tspan x="1362.5" dy="0">Strategy</tspan></text></g><g><rect x="1051.5" y="961" fill="#eaeaea" stroke="#666" width="150" height="65" name="HabitatAnalysis" rx="3" ry="3" class="actor actor-bottom"></rect><text x="1126.5" y="993.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400; font-family: sans-serif;"><tspan x="1126.5" dy="0">HabitatAnalysis</tspan></text></g><g><rect x="798" y="961" fill="#eaeaea" stroke="#666" width="173" height="65" name="ServiceConfigurator" rx="3" ry="3" class="actor actor-bottom"></rect><text x="884.5" y="993.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400; font-family: sans-serif;"><tspan x="884.5" dy="0">ServiceConfigurator</tspan></text></g><g><rect x="598" y="961" fill="#eaeaea" stroke="#666" width="150" height="65" name="Config" rx="3" ry="3" class="actor actor-bottom"></rect><text x="673" y="993.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400; font-family: sans-serif;"><tspan x="673" dy="0">Config</tspan></text></g><g><rect x="359" y="961" fill="#eaeaea" stroke="#666" width="150" height="65" name="CLI" rx="3" ry="3" class="actor actor-bottom"></rect><text x="434" y="993.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400; font-family: sans-serif;"><tspan x="434" dy="0">CLI</tspan></text></g><g><rect x="0" y="961" fill="#eaeaea" stroke="#666" width="150" height="65" name="User" rx="3" ry="3" class="actor actor-bottom"></rect><text x="75" y="993.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400; font-family: sans-serif;"><tspan x="75" dy="0">User</tspan></text></g><g><line id="actor39" x1="1816.5" y1="65" x2="1816.5" y2="961" class="actor-line 200" stroke-width="0.5px" stroke="#999" name="Managers"></line><g id="root-39"><rect x="1741.5" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" name="Managers" rx="3" ry="3" class="actor actor-top"></rect><text x="1816.5" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400; font-family: sans-serif;"><tspan x="1816.5" dy="0">Managers</tspan></text></g></g><g><line id="actor38" x1="1574.5" y1="65" x2="1574.5" y2="961" class="actor-line 200" stroke-width="0.5px" stroke="#999" name="Pipeline"></line><g id="root-38"><rect x="1499.5" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" name="Pipeline" rx="3" ry="3" class="actor actor-top"></rect><text x="1574.5" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400; font-family: sans-serif;"><tspan x="1574.5" dy="0">Pipeline</tspan></text></g></g><g><line id="actor37" x1="1362.5" y1="65" x2="1362.5" y2="961" class="actor-line 200" stroke-width="0.5px" stroke="#999" name="Strategy"></line><g id="root-37"><rect x="1287.5" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" name="Strategy" rx="3" ry="3" class="actor actor-top"></rect><text x="1362.5" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400; font-family: sans-serif;"><tspan x="1362.5" dy="0">Strategy</tspan></text></g></g><g><line id="actor36" x1="1126.5" y1="65" x2="1126.5" y2="961" class="actor-line 200" stroke-width="0.5px" stroke="#999" name="HabitatAnalysis"></line><g id="root-36"><rect x="1051.5" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" name="HabitatAnalysis" rx="3" ry="3" class="actor actor-top"></rect><text x="1126.5" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400; font-family: sans-serif;"><tspan x="1126.5" dy="0">HabitatAnalysis</tspan></text></g></g><g><line id="actor35" x1="884.5" y1="65" x2="884.5" y2="961" class="actor-line 200" stroke-width="0.5px" stroke="#999" name="ServiceConfigurator"></line><g id="root-35"><rect x="798" y="0" fill="#eaeaea" stroke="#666" width="173" height="65" name="ServiceConfigurator" rx="3" ry="3" class="actor actor-top"></rect><text x="884.5" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400; font-family: sans-serif;"><tspan x="884.5" dy="0">ServiceConfigurator</tspan></text></g></g><g><line id="actor34" x1="673" y1="65" x2="673" y2="961" class="actor-line 200" stroke-width="0.5px" stroke="#999" name="Config"></line><g id="root-34"><rect x="598" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" name="Config" rx="3" ry="3" class="actor actor-top"></rect><text x="673" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400; font-family: sans-serif;"><tspan x="673" dy="0">Config</tspan></text></g></g><g><line id="actor33" x1="434" y1="65" x2="434" y2="961" class="actor-line 200" stroke-width="0.5px" stroke="#999" name="CLI"></line><g id="root-33"><rect x="359" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" name="CLI" rx="3" ry="3" class="actor actor-top"></rect><text x="434" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400; font-family: sans-serif;"><tspan x="434" dy="0">CLI</tspan></text></g></g><g><line id="actor32" x1="75" y1="65" x2="75" y2="961" class="actor-line 200" stroke-width="0.5px" stroke="#999" name="User"></line><g id="root-32"><rect x="0" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" name="User" rx="3" ry="3" class="actor actor-top"></rect><text x="75" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400; font-family: sans-serif;"><tspan x="75" dy="0">User</tspan></text></g></g><style>#mermaidChart37{font-family:sans-serif;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaidChart37 .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaidChart37 .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaidChart37 .error-icon{fill:#552222;}#mermaidChart37 .error-text{fill:#552222;stroke:#552222;}#mermaidChart37 .edge-thickness-normal{stroke-width:1px;}#mermaidChart37 .edge-thickness-thick{stroke-width:3.5px;}#mermaidChart37 .edge-pattern-solid{stroke-dasharray:0;}#mermaidChart37 .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaidChart37 .edge-pattern-dashed{stroke-dasharray:3;}#mermaidChart37 .edge-pattern-dotted{stroke-dasharray:2;}#mermaidChart37 .marker{fill:#333333;stroke:#333333;}#mermaidChart37 .marker.cross{stroke:#333333;}#mermaidChart37 svg{font-family:sans-serif;font-size:16px;}#mermaidChart37 p{margin:0;}#mermaidChart37 .actor{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;}#mermaidChart37 text.actor&gt;tspan{fill:black;stroke:none;}#mermaidChart37 .actor-line{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);}#mermaidChart37 .messageLine0{stroke-width:1.5;stroke-dasharray:none;stroke:#333;}#mermaidChart37 .messageLine1{stroke-width:1.5;stroke-dasharray:2,2;stroke:#333;}#mermaidChart37 #arrowhead path{fill:#333;stroke:#333;}#mermaidChart37 .sequenceNumber{fill:white;}#mermaidChart37 #sequencenumber{fill:#333;}#mermaidChart37 #crosshead path{fill:#333;stroke:#333;}#mermaidChart37 .messageText{fill:#333;stroke:none;}#mermaidChart37 .labelBox{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;}#mermaidChart37 .labelText,#mermaidChart37 .labelText&gt;tspan{fill:black;stroke:none;}#mermaidChart37 .loopText,#mermaidChart37 .loopText&gt;tspan{fill:black;stroke:none;}#mermaidChart37 .loopLine{stroke-width:2px;stroke-dasharray:2,2;stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);}#mermaidChart37 .note{stroke:#aaaa33;fill:#fff5ad;}#mermaidChart37 .noteText,#mermaidChart37 .noteText&gt;tspan{fill:black;stroke:none;}#mermaidChart37 .activation0{fill:#f4f4f4;stroke:#666;}#mermaidChart37 .activation1{fill:#f4f4f4;stroke:#666;}#mermaidChart37 .activation2{fill:#f4f4f4;stroke:#666;}#mermaidChart37 .actorPopupMenu{position:absolute;}#mermaidChart37 .actorPopupMenuPanel{position:absolute;fill:#ECECFF;box-shadow:0px 8px 16px 0px rgba(0,0,0,0.2);filter:drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4));}#mermaidChart37 .actor-man line{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;}#mermaidChart37 .actor-man circle,#mermaidChart37 line{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;stroke-width:2px;}#mermaidChart37 :root{--mermaid-alt-font-family:sans-serif;}</style><g></g><defs><symbol id="computer" width="24" height="24"><path transform="scale(.5)" d="M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z"></path></symbol></defs><defs><symbol id="database" fill-rule="evenodd" clip-rule="evenodd"><path transform="scale(.5)" d="M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z"></path></symbol></defs><defs><symbol id="clock" width="24" height="24"><path transform="scale(.5)" d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z"></path></symbol></defs><defs><marker id="arrowhead" refX="7.9" refY="5" markerUnits="userSpaceOnUse" markerWidth="12" markerHeight="12" orient="auto-start-reverse"><path d="M -1 0 L 10 5 L 0 10 z"></path></marker></defs><defs><marker id="crosshead" markerWidth="15" markerHeight="8" orient="auto" refX="4" refY="4.5"><path fill="none" stroke="#000000" stroke-width="1pt" d="M 1,2 L 6,7 M 6,2 L 1,7" style="stroke-dasharray: 0, 0;"></path></marker></defs><defs><marker id="filled-head" refX="15.5" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><defs><marker id="sequencenumber" refX="15" refY="15" markerWidth="60" markerHeight="40" orient="auto"><circle cx="15" cy="15" r="6"></circle></marker></defs><text x="253" y="80" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: sans-serif; font-size: 16px; font-weight: 400;">habit get-habitat --config config.yaml</text><line x1="76" y1="115" x2="430" y2="115" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="552" y="130" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: sans-serif; font-size: 16px; font-weight: 400;">Load YAML</text><line x1="435" y1="165" x2="669" y2="165" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="555" y="180" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: sans-serif; font-size: 16px; font-weight: 400;">HabitatAnalysisConfig</text><line x1="672" y1="215" x2="438" y2="215" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line><text x="658" y="230" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: sans-serif; font-size: 16px; font-weight: 400;">Create services</text><line x1="435" y1="265" x2="880.5" y2="265" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="1349" y="280" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: sans-serif; font-size: 16px; font-weight: 400;">Create FeatureManager</text><line x1="885.5" y1="315" x2="1812.5" y2="315" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="1349" y="330" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: sans-serif; font-size: 16px; font-weight: 400;">Create ClusteringManager</text><line x1="885.5" y1="365" x2="1812.5" y2="365" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="1349" y="380" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: sans-serif; font-size: 16px; font-weight: 400;">Create ResultManager</text><line x1="885.5" y1="415" x2="1812.5" y2="415" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="1004" y="430" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: sans-serif; font-size: 16px; font-weight: 400;">Create HabitatAnalysis</text><line x1="885.5" y1="465" x2="1122.5" y2="465" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="779" y="480" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: sans-serif; font-size: 16px; font-weight: 400;">run()</text><line x1="435" y1="515" x2="1122.5" y2="515" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="1243" y="530" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: sans-serif; font-size: 16px; font-weight: 400;">Get strategy by mode</text><line x1="1127.5" y1="565" x2="1358.5" y2="565" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="1467" y="580" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: sans-serif; font-size: 16px; font-weight: 400;">Build pipeline</text><line x1="1363.5" y1="615" x2="1570.5" y2="615" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="1576" y="630" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: sans-serif; font-size: 16px; font-weight: 400;">fit_transform() or transform()</text><path d="M 1575.5,665 C 1635.5,655 1635.5,695 1575.5,685" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></path><text x="1694" y="710" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: sans-serif; font-size: 16px; font-weight: 400;">Use managers in steps</text><line x1="1575.5" y1="745" x2="1812.5" y2="745" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="1697" y="760" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: sans-serif; font-size: 16px; font-weight: 400;">Return results</text><line x1="1815.5" y1="795" x2="1578.5" y2="795" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line><text x="1470" y="810" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: sans-serif; font-size: 16px; font-weight: 400;">Results DataFrame</text><line x1="1573.5" y1="845" x2="1366.5" y2="845" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line><text x="1246" y="860" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: sans-serif; font-size: 16px; font-weight: 400;">Results DataFrame</text><line x1="1361.5" y1="895" x2="1130.5" y2="895" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line><text x="782" y="910" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: sans-serif; font-size: 16px; font-weight: 400;">Results DataFrame</text><line x1="1125.5" y1="945" x2="438" y2="945" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></svg></div><h2 id='component-hierarchy'><span>Component Hierarchy</span></h2><h3 id='1-entry-layer'><span>1. Entry Layer</span></h3><h4 id='cli-command-habitclicommandscommandscmdhabitatpy'><code>CLI Command</code><span> (</span><code>habit/cli_commands/commands/cmd_habitat.py</code><span>)</span></h4><ul><li><p><span>Entry point: </span><code>habit get-habitat --config config.yaml</code></p></li><li><p><span>Parses command-line arguments</span></p></li><li><p><span>Loads configuration from YAML</span></p></li><li><p><span>Creates services via </span><code>ServiceConfigurator</code></p></li><li><p><span>Executes </span><code>HabitatAnalysis.run()</code></p></li></ul><h4 id='configuration-configschemaspy'><code>Configuration</code><span> (</span><code>config_schemas.py</code><span>)</span></h4><ul><li><p><code>HabitatAnalysisConfig</code><span>: Root configuration class (Pydantic)</span></p></li><li><p><code>FeatureConstructionConfig</code><span>: Feature extraction settings</span></p></li><li><p><code>HabitatsSegmentionConfig</code><span>: Clustering strategy settings</span></p></li><li><p><span>Validates and resolves paths automatically</span></p></li></ul><h3 id='2-service-layer'><span>2. Service Layer</span></h3><h4 id='serviceconfigurator-habitcorecommonserviceconfiguratorpy'><code>ServiceConfigurator</code><span> (</span><code>habit/core/common/service_configurator.py</code><span>)</span></h4><ul><li><p><strong><span>Purpose</span></strong><span>: Dependency injection container</span></p></li><li><p><strong><span>Responsibilities</span></strong><span>:</span></p><ul><li><p><span>Creates </span><code>FeatureManager</code><span>, </span><code>ClusteringManager</code><span>, </span><code>ResultManager</code></p></li><li><p><span>Creates </span><code>HabitatAnalysis</code><span> with all dependencies</span></p></li><li><p><span>Manages logger creation and configuration</span></p></li></ul></li></ul><h4 id='habitatanalysis-habitatanalysispy'><code>HabitatAnalysis</code><span> (</span><code>habitat_analysis.py</code><span>)</span></h4><ul><li><p><strong><span>Purpose</span></strong><span>: Main coordinator class</span></p></li><li><p><strong><span>Responsibilities</span></strong><span>:</span></p><ul><li><p><span>Coordinates managers (Feature, Clustering, Result)</span></p></li><li><p><span>Delegates execution to strategy classes</span></p></li><li><p><span>Provides facade methods for accessing manager properties</span></p></li></ul></li><li><p><strong><span>Key Methods</span></strong><span>:</span></p><ul><li><p><code>run(subjects, save_results_csv)</code><span>: Main entry point</span></p></li></ul></li></ul><h3 id='3-manager-layer'><span>3. Manager Layer</span></h3><h4 id='featuremanager-managersfeaturemanagerpy'><code>FeatureManager</code><span> (</span><code>managers/feature_manager.py</code><span>)</span></h4><ul><li><p><strong><span>Purpose</span></strong><span>: Manages feature extraction and preprocessing</span></p></li><li><p><strong><span>Responsibilities</span></strong><span>:</span></p><ul><li><p><span>Voxel-level feature extraction</span></p></li><li><p><span>Supervoxel-level feature aggregation</span></p></li><li><p><span>Subject-level and group-level preprocessing</span></p></li><li><p><span>Image and mask path management</span></p></li></ul></li></ul><h4 id='clusteringmanager-managersclusteringmanagerpy'><code>ClusteringManager</code><span> (</span><code>managers/clustering_manager.py</code><span>)</span></h4><ul><li><p><strong><span>Purpose</span></strong><span>: Manages clustering algorithms and models</span></p></li><li><p><strong><span>Responsibilities</span></strong><span>:</span></p><ul><li><p><span>Individual-level clustering (voxel → supervoxel)</span></p></li><li><p><span>Population-level clustering (supervoxel → habitat)</span></p></li><li><p><span>Model persistence (save/load)</span></p></li><li><p><span>Cluster validation and selection</span></p></li></ul></li></ul><h4 id='resultmanager-managersresultmanagerpy'><code>ResultManager</code><span> (</span><code>managers/result_manager.py</code><span>)</span></h4><ul><li><p><strong><span>Purpose</span></strong><span>: Manages results and visualization</span></p></li><li><p><strong><span>Responsibilities</span></strong><span>:</span></p><ul><li><p><span>Results DataFrame management</span></p></li><li><p><span>Habitat map saving (NRRD format)</span></p></li><li><p><span>Visualization generation</span></p></li><li><p><span>CSV export</span></p></li></ul></li></ul><h3 id='4-strategy-layer'><span>4. Strategy Layer</span></h3><h4 id='baseclusteringstrategy-strategiesbasestrategypy'><code>BaseClusteringStrategy</code><span> (</span><code>strategies/base_strategy.py</code><span>)</span></h4><ul><li><p><strong><span>Purpose</span></strong><span>: Abstract base class for all strategies</span></p></li><li><p><strong><span>Key Methods</span></strong><span>:</span></p><ul><li><p><code>run(subjects, save_results_csv, load_from)</code><span>: Execute strategy</span></p></li><li><p><code>_update_pipeline_references()</code><span>: Update loaded pipeline references</span></p></li></ul></li><li><p><strong><span>Design Pattern</span></strong><span>: Template Method Pattern</span></p></li></ul><h4 id='twostepstrategy-strategiestwostepstrategypy'><code>TwoStepStrategy</code><span> (</span><code>strategies/two_step_strategy.py</code><span>)</span></h4><ul><li><p><strong><span>Flow</span></strong><span>:</span></p><ol start='' ><li><p><span>Voxel → Supervoxel (individual-level)</span></p></li><li><p><span>Supervoxel → Habitat (population-level)</span></p></li></ol></li><li><p><strong><span>Use Case</span></strong><span>: Standard approach for finding common habitat patterns</span></p></li></ul><h4 id='onestepstrategy-strategiesonestepstrategypy'><code>OneStepStrategy</code><span> (</span><code>strategies/one_step_strategy.py</code><span>)</span></h4><ul><li><p><strong><span>Flow</span></strong><span>:</span></p><ol start='' ><li><p><span>Voxel → Habitat (per subject, no population step)</span></p></li></ol></li><li><p><strong><span>Use Case</span></strong><span>: Subject-specific habitat patterns</span></p></li></ul><h4 id='directpoolingstrategy-strategiesdirectpoolingstrategypy'><code>DirectPoolingStrategy</code><span> (</span><code>strategies/direct_pooling_strategy.py</code><span>)</span></h4><ul><li><p><strong><span>Flow</span></strong><span>:</span></p><ol start='' ><li><p><span>Pool all voxels → Habitat (single clustering step)</span></p></li></ol></li><li><p><strong><span>Use Case</span></strong><span>: Simple, fast clustering without supervoxel intermediate</span></p></li></ul><h3 id='5-pipeline-layer'><span>5. Pipeline Layer</span></h3><h4 id='habitatpipeline-pipelinesbasepipelinepy'><code>HabitatPipeline</code><span> (</span><code>pipelines/base_pipeline.py</code><span>)</span></h4><ul><li><p><strong><span>Purpose</span></strong><span>: sklearn-style pipeline container</span></p></li><li><p><strong><span>Interface</span></strong><span>:</span></p><ul><li><p><code>fit(X)</code><span>: Train pipeline on data</span></p></li><li><p><code>transform(X)</code><span>: Apply trained pipeline to new data</span></p></li><li><p><code>fit_transform(X)</code><span>: Train and transform in one call</span></p></li><li><p><code>save(path)</code><span>: Save trained pipeline</span></p></li><li><p><code>load(path)</code><span>: Load saved pipeline</span></p></li></ul></li><li><p><strong><span>Design</span></strong><span>: Follows sklearn Pipeline pattern</span></p></li></ul><h4 id='basepipelinestep-pipelinesbasepipelinepy'><code>BasePipelineStep</code><span> (</span><code>pipelines/base_pipeline.py</code><span>)</span></h4><ul><li><p><strong><span>Purpose</span></strong><span>: Abstract base class for all pipeline steps</span></p></li><li><p><strong><span>Interface</span></strong><span>:</span></p><ul><li><p><code>fit(X, y=None)</code><span>: Learn parameters from data</span></p></li><li><p><code>transform(X)</code><span>: Apply transformation</span></p></li><li><p><code>fit_transform(X, y=None)</code><span>: Fit and transform</span></p></li></ul></li></ul><h4 id='pipeline-steps-for-two-step-strategy'><span>Pipeline Steps (for Two-Step Strategy)</span></h4><ol start='' ><li><p><strong><span>VoxelFeatureExtractor</span></strong><span>: Extract voxel-level features from images</span></p></li><li><p><strong><span>SubjectPreprocessingStep</span></strong><span>: Preprocess features per subject</span></p></li><li><p><strong><span>IndividualClusteringStep</span></strong><span>: Cluster voxels → supervoxels (per subject)</span></p></li><li><p><strong><span>SupervoxelFeatureExtractionStep</span></strong><span> (conditional): Extract advanced supervoxel features</span></p></li><li><p><strong><span>SupervoxelAggregationStep</span></strong><span>: Aggregate supervoxel features</span></p></li><li><p><strong><span>GroupPreprocessingStep</span></strong><span>: Preprocess features across all subjects</span></p></li><li><p><strong><span>PopulationClusteringStep</span></strong><span>: Cluster supervoxels → habitats (population-level)</span></p></li></ol><h2 id='data-flow'><span>Data Flow</span></h2><h3 id='training-mode-flow'><span>Training Mode Flow</span></h3><div class="md-diagram-panel md-fences-adv-panel" lang="mermaid"><svg id="mermaidChart38" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="flowchart mermaid-svg" style="max-width: 1846.9981689453125px;" viewBox="0 0 1846.9981689453125 419.95831298828125" role="graphics-document document" aria-roledescription="flowchart-v2"><style>#mermaidChart38{font-family:sans-serif;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaidChart38 .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaidChart38 .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaidChart38 .error-icon{fill:#552222;}#mermaidChart38 .error-text{fill:#552222;stroke:#552222;}#mermaidChart38 .edge-thickness-normal{stroke-width:1px;}#mermaidChart38 .edge-thickness-thick{stroke-width:3.5px;}#mermaidChart38 .edge-pattern-solid{stroke-dasharray:0;}#mermaidChart38 .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaidChart38 .edge-pattern-dashed{stroke-dasharray:3;}#mermaidChart38 .edge-pattern-dotted{stroke-dasharray:2;}#mermaidChart38 .marker{fill:#333333;stroke:#333333;}#mermaidChart38 .marker.cross{stroke:#333333;}#mermaidChart38 svg{font-family:sans-serif;font-size:16px;}#mermaidChart38 p{margin:0;}#mermaidChart38 .label{font-family:sans-serif;color:#333;}#mermaidChart38 .cluster-label text{fill:#333;}#mermaidChart38 .cluster-label span{color:#333;}#mermaidChart38 .cluster-label span p{background-color:transparent;}#mermaidChart38 .label text,#mermaidChart38 span{fill:#333;color:#333;}#mermaidChart38 .node rect,#mermaidChart38 .node circle,#mermaidChart38 .node ellipse,#mermaidChart38 .node polygon,#mermaidChart38 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaidChart38 .rough-node .label text,#mermaidChart38 .node .label text,#mermaidChart38 .image-shape .label,#mermaidChart38 .icon-shape .label{text-anchor:middle;}#mermaidChart38 .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaidChart38 .rough-node .label,#mermaidChart38 .node .label,#mermaidChart38 .image-shape .label,#mermaidChart38 .icon-shape .label{text-align:center;}#mermaidChart38 .node.clickable{cursor:pointer;}#mermaidChart38 .root .anchor path{fill:#333333!important;stroke-width:0;stroke:#333333;}#mermaidChart38 .arrowheadPath{fill:#333333;}#mermaidChart38 .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaidChart38 .flowchart-link{stroke:#333333;fill:none;}#mermaidChart38 .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaidChart38 .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#mermaidChart38 .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaidChart38 .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#mermaidChart38 .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaidChart38 .cluster text{fill:#333;}#mermaidChart38 .cluster span{color:#333;}#mermaidChart38 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaidChart38 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaidChart38 rect.text{fill:none;stroke-width:0;}#mermaidChart38 .icon-shape,#mermaidChart38 .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaidChart38 .icon-shape p,#mermaidChart38 .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#mermaidChart38 .icon-shape rect,#mermaidChart38 .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaidChart38 .label-icon{display:inline-block;height:1em;overflow:visible;vertical-align:-0.125em;}#mermaidChart38 .node .label-icon path{fill:currentColor;stroke:revert;stroke-width:revert;}#mermaidChart38 :root{--mermaid-alt-font-family:sans-serif;}</style><g><marker id="mermaidChart38_flowchart-v2-pointEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart38_flowchart-v2-pointStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="4.5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart38_flowchart-v2-circleEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart38_flowchart-v2-circleStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart38_flowchart-v2-crossEnd" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart38_flowchart-v2-crossStart" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><g class="root"><g class="clusters"><g class="cluster " id="Output" data-look="classic"><rect style="" x="1579.6231994628906" y="8" width="259.37498474121094" height="403.9583206176758"></rect><g class="cluster-label " transform="translate(1681.8584365844727, 8)"><foreignObject width="54.904510498046875" height="23.993053436279297"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Output</p></span></div></foreignObject></g></g><g class="cluster " id="subGraph1" data-look="classic"><rect style="" x="288.3211669921875" y="41.9930534362793" width="1241.3020324707031" height="315.9722137451172"></rect><g class="cluster-label " transform="translate(839.2108993530273, 41.9930534362793)"><foreignObject width="139.52256774902344" height="23.993053436279297"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Pipeline Execution</p></span></div></foreignObject></g></g><g class="cluster " id="Input" data-look="classic"><rect style="" x="8" y="135.9861068725586" width="230.3211669921875" height="147.9861068725586"></rect><g class="cluster-label " transform="translate(102.85676574707031, 135.9861068725586)"><foreignObject width="40.607635498046875" height="23.993053436279297"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Input</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path d="M213.321,209.979L238.321,209.979L263.321,209.979L288.321,209.979L309.321,209.979" id="L_Images_VF_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart38_flowchart-v2-pointEnd)"></path><path d="M483.677,209.979L508.677,209.979L529.677,209.979" id="L_VF_SP_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart38_flowchart-v2-pointEnd)"></path><path d="M700.969,209.979L725.969,209.979L746.969,209.979" id="L_SP_IC_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart38_flowchart-v2-pointEnd)"></path><path d="M888.564,209.979L913.564,209.979L934.564,209.979" id="L_IC_SA_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart38_flowchart-v2-pointEnd)"></path><path d="M1094.58,209.979L1119.58,209.979L1140.58,209.979" id="L_SA_GP_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart38_flowchart-v2-pointEnd)"></path><path d="M1311.871,209.979L1336.871,209.979L1357.871,209.979" id="L_GP_PC_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart38_flowchart-v2-pointEnd)"></path><path d="M1462.61,170.986L1529.623,81.993L1554.623,81.993L1579.623,81.993L1623.661,81.993" id="L_PC_HM_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart38_flowchart-v2-pointEnd)"></path><path d="M1504.623,209.979L1529.623,209.979L1554.623,209.979L1579.623,209.979L1630.597,209.979" id="L_PC_CSV_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart38_flowchart-v2-pointEnd)"></path><path d="M1462.61,248.972L1529.623,337.965L1554.623,337.965L1579.623,337.965L1600.623,337.965" id="L_PC_Model_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart38_flowchart-v2-pointEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default  " id="flowchart-Images-0" transform="translate(123.16058349609375, 209.9791603088379)"><rect class="basic label-container" style="" x="-90.16058731079102" y="-38.9930534362793" width="180.32117462158203" height="77.9861068725586"></rect><g class="label" style="" transform="translate(-60.160587310791016, -23.993053436279297)"><rect></rect><foreignObject width="120.32117462158203" height="47.986106872558594"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Medical Images<br/>+ Masks</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-VF-1" transform="translate(398.4991149902344, 209.9791603088379)"><rect class="basic label-container" style="" x="-85.17794799804688" y="-38.9930534362793" width="170.35589599609375" height="77.9861068725586"></rect><g class="label" style="" transform="translate(-55.177947998046875, -23.993053436279297)"><rect></rect><foreignObject width="110.35589599609375" height="47.986106872558594"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Voxel Features<br/>Extraction</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-SP-2" transform="translate(617.3228912353516, 209.9791603088379)"><rect class="basic label-container" style="" x="-83.64582824707031" y="-38.9930534362793" width="167.29165649414062" height="77.9861068725586"></rect><g class="label" style="" transform="translate(-53.64582824707031, -23.993053436279297)"><rect></rect><foreignObject width="107.29165649414062" height="47.986106872558594"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Subject<br/>Preprocessing</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-IC-3" transform="translate(819.7664566040039, 209.9791603088379)"><rect class="basic label-container" style="" x="-68.7977409362793" y="-38.9930534362793" width="137.5954818725586" height="77.9861068725586"></rect><g class="label" style="" transform="translate(-38.7977409362793, -23.993053436279297)"><rect></rect><foreignObject width="77.5954818725586" height="47.986106872558594"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Individual<br/>Clustering</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-SA-4" transform="translate(1016.5720062255859, 209.9791603088379)"><rect class="basic label-container" style="" x="-78.00780868530273" y="-38.9930534362793" width="156.01561737060547" height="77.9861068725586"></rect><g class="label" style="" transform="translate(-48.007808685302734, -23.993053436279297)"><rect></rect><foreignObject width="96.01561737060547" height="47.986106872558594"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Supervoxel<br/>Aggregation</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-GP-5" transform="translate(1228.2256469726562, 209.9791603088379)"><rect class="basic label-container" style="" x="-83.64582824707031" y="-38.9930534362793" width="167.29165649414062" height="77.9861068725586"></rect><g class="label" style="" transform="translate(-53.64582824707031, -23.993053436279297)"><rect></rect><foreignObject width="107.29165649414062" height="47.986106872558594"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Group<br/>Preprocessing</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-PC-6" transform="translate(1433.2473373413086, 209.9791603088379)"><rect class="basic label-container" style="" x="-71.3758659362793" y="-38.9930534362793" width="142.7517318725586" height="77.9861068725586"></rect><g class="label" style="" transform="translate(-41.3758659362793, -23.993053436279297)"><rect></rect><foreignObject width="82.7517318725586" height="47.986106872558594"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Population<br/>Clustering</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-HM-7" transform="translate(1709.310691833496, 81.9930534362793)"><rect class="basic label-container" style="" x="-81.6493034362793" y="-38.9930534362793" width="163.2986068725586" height="77.9861068725586"></rect><g class="label" style="" transform="translate(-51.6493034362793, -23.993053436279297)"><rect></rect><foreignObject width="103.2986068725586" height="47.986106872558594"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Habitat Maps<br/>NRRD Files</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-CSV-8" transform="translate(1709.310691833496, 209.9791603088379)"><rect class="basic label-container" style="" x="-74.71353912353516" y="-38.9930534362793" width="149.4270782470703" height="77.9861068725586"></rect><g class="label" style="" transform="translate(-44.713539123535156, -23.993053436279297)"><rect></rect><foreignObject width="89.42707824707031" height="47.986106872558594"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Results CSV<br/>habitats.csv</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-Model-9" transform="translate(1709.310691833496, 337.9652671813965)"><rect class="basic label-container" style="" x="-104.68749237060547" y="-38.9930534362793" width="209.37498474121094" height="77.9861068725586"></rect><g class="label" style="" transform="translate(-74.68749237060547, -23.993053436279297)"><rect></rect><foreignObject width="149.37498474121094" height="47.986106872558594"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Trained Pipeline<br/>habitat_pipeline.pkl</p></span></div></foreignObject></g></g></g></g></g></svg></div><h3 id='prediction-mode-flow'><span>Prediction Mode Flow</span></h3><div class="md-diagram-panel md-fences-adv-panel" lang="mermaid"><svg id="mermaidChart39" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="flowchart mermaid-svg" style="max-width: 1079.9930419921875px;" viewBox="0 0 1079.9930419921875 291.9721984863281" role="graphics-document document" aria-roledescription="flowchart-v2"><style>#mermaidChart39{font-family:sans-serif;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaidChart39 .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaidChart39 .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaidChart39 .error-icon{fill:#552222;}#mermaidChart39 .error-text{fill:#552222;stroke:#552222;}#mermaidChart39 .edge-thickness-normal{stroke-width:1px;}#mermaidChart39 .edge-thickness-thick{stroke-width:3.5px;}#mermaidChart39 .edge-pattern-solid{stroke-dasharray:0;}#mermaidChart39 .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaidChart39 .edge-pattern-dashed{stroke-dasharray:3;}#mermaidChart39 .edge-pattern-dotted{stroke-dasharray:2;}#mermaidChart39 .marker{fill:#333333;stroke:#333333;}#mermaidChart39 .marker.cross{stroke:#333333;}#mermaidChart39 svg{font-family:sans-serif;font-size:16px;}#mermaidChart39 p{margin:0;}#mermaidChart39 .label{font-family:sans-serif;color:#333;}#mermaidChart39 .cluster-label text{fill:#333;}#mermaidChart39 .cluster-label span{color:#333;}#mermaidChart39 .cluster-label span p{background-color:transparent;}#mermaidChart39 .label text,#mermaidChart39 span{fill:#333;color:#333;}#mermaidChart39 .node rect,#mermaidChart39 .node circle,#mermaidChart39 .node ellipse,#mermaidChart39 .node polygon,#mermaidChart39 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaidChart39 .rough-node .label text,#mermaidChart39 .node .label text,#mermaidChart39 .image-shape .label,#mermaidChart39 .icon-shape .label{text-anchor:middle;}#mermaidChart39 .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaidChart39 .rough-node .label,#mermaidChart39 .node .label,#mermaidChart39 .image-shape .label,#mermaidChart39 .icon-shape .label{text-align:center;}#mermaidChart39 .node.clickable{cursor:pointer;}#mermaidChart39 .root .anchor path{fill:#333333!important;stroke-width:0;stroke:#333333;}#mermaidChart39 .arrowheadPath{fill:#333333;}#mermaidChart39 .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaidChart39 .flowchart-link{stroke:#333333;fill:none;}#mermaidChart39 .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaidChart39 .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#mermaidChart39 .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaidChart39 .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#mermaidChart39 .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaidChart39 .cluster text{fill:#333;}#mermaidChart39 .cluster span{color:#333;}#mermaidChart39 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaidChart39 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaidChart39 rect.text{fill:none;stroke-width:0;}#mermaidChart39 .icon-shape,#mermaidChart39 .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaidChart39 .icon-shape p,#mermaidChart39 .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#mermaidChart39 .icon-shape rect,#mermaidChart39 .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaidChart39 .label-icon{display:inline-block;height:1em;overflow:visible;vertical-align:-0.125em;}#mermaidChart39 .node .label-icon path{fill:currentColor;stroke:revert;stroke-width:revert;}#mermaidChart39 :root{--mermaid-alt-font-family:sans-serif;}</style><g><marker id="mermaidChart39_flowchart-v2-pointEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart39_flowchart-v2-pointStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="4.5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart39_flowchart-v2-circleEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart39_flowchart-v2-circleStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart39_flowchart-v2-crossEnd" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart39_flowchart-v2-crossStart" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><g class="root"><g class="clusters"><g class="cluster " id="Output" data-look="classic"><rect style="" x="858.6944122314453" y="8" width="213.29859924316406" height="275.9722137451172"></rect><g class="cluster-label " transform="translate(937.8914566040039, 8)"><foreignObject width="54.904510498046875" height="23.993053436279297"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Output</p></span></div></foreignObject></g></g><g class="cluster " id="subGraph1" data-look="classic"><rect style="" x="327.7742919921875" y="24.99652671813965" width="480.9201202392578" height="231.9791603088379"></rect><g class="cluster-label " transform="translate(498.4730682373047, 24.99652671813965)"><foreignObject width="139.52256774902344" height="23.993053436279297"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Pipeline Execution</p></span></div></foreignObject></g></g><g class="cluster " id="Input" data-look="classic"><rect style="" x="8" y="8" width="269.7742919921875" height="275.9722137451172"></rect><g class="cluster-label " transform="translate(122.58332824707031, 8)"><foreignObject width="40.607635498046875" height="23.993053436279297"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Input</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path d="M252.774,81.993L277.774,81.993L302.774,81.993L327.774,81.993L373.794,105.192" id="L_NewImages_Load_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart39_flowchart-v2-pointEnd)"></path><path d="M247.575,209.979L277.774,209.979L302.774,209.979L327.774,209.979L373.794,186.78" id="L_Pipeline_Load_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart39_flowchart-v2-pointEnd)"></path><path d="M556.654,145.986L581.654,145.986L602.654,145.986" id="L_Load_Transform_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart39_flowchart-v2-pointEnd)"></path><path d="M764.346,106.993L808.694,81.993L833.694,81.993L858.694,81.993L879.694,81.993" id="L_Transform_HM_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart39_flowchart-v2-pointEnd)"></path><path d="M764.346,184.979L808.694,209.979L833.694,209.979L858.694,209.979L886.63,209.979" id="L_Transform_CSV_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart39_flowchart-v2-pointEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default  " id="flowchart-NewImages-0" transform="translate(142.88714599609375, 81.9930534362793)"><rect class="basic label-container" style="" x="-109.88714599609375" y="-38.9930534362793" width="219.7742919921875" height="77.9861068725586"></rect><g class="label" style="" transform="translate(-79.88714599609375, -23.993053436279297)"><rect></rect><foreignObject width="159.7742919921875" height="47.986106872558594"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>New Medical Images<br/>+ Masks</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-Pipeline-1" transform="translate(142.88714599609375, 209.9791603088379)"><rect class="basic label-container" style="" x="-104.68749237060547" y="-38.9930534362793" width="209.37498474121094" height="77.9861068725586"></rect><g class="label" style="" transform="translate(-74.68749237060547, -23.993053436279297)"><rect></rect><foreignObject width="149.37498474121094" height="47.986106872558594"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Saved Pipeline<br/>habitat_pipeline.pkl</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-Load-2" transform="translate(454.71439361572266, 145.9861068725586)"><rect class="basic label-container" style="" x="-101.94010162353516" y="-38.9930534362793" width="203.8802032470703" height="77.9861068725586"></rect><g class="label" style="" transform="translate(-71.94010162353516, -23.993053436279297)"><rect></rect><foreignObject width="143.8802032470703" height="47.986106872558594"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Load Pipeline<br/>Update References</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-Transform-3" transform="translate(695.1744537353516, 145.9861068725586)"><rect class="basic label-container" style="" x="-88.51996231079102" y="-38.9930534362793" width="177.03992462158203" height="77.9861068725586"></rect><g class="label" style="" transform="translate(-58.519962310791016, -23.993053436279297)"><rect></rect><foreignObject width="117.03992462158203" height="47.986106872558594"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Transform Only<br/>No Training</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-HM-4" transform="translate(965.3437118530273, 81.9930534362793)"><rect class="basic label-container" style="" x="-81.6493034362793" y="-38.9930534362793" width="163.2986068725586" height="77.9861068725586"></rect><g class="label" style="" transform="translate(-51.6493034362793, -23.993053436279297)"><rect></rect><foreignObject width="103.2986068725586" height="47.986106872558594"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Habitat Maps<br/>NRRD Files</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-CSV-5" transform="translate(965.3437118530273, 209.9791603088379)"><rect class="basic label-container" style="" x="-74.71353912353516" y="-38.9930534362793" width="149.4270782470703" height="77.9861068725586"></rect><g class="label" style="" transform="translate(-44.713539123535156, -23.993053436279297)"><rect></rect><foreignObject width="89.42707824707031" height="47.986106872558594"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Results CSV<br/>habitats.csv</p></span></div></foreignObject></g></g></g></g></g></svg></div><h3 id='data-structure-evolution'><span>Data Structure Evolution</span></h3><div class="md-diagram-panel md-fences-adv-panel" lang="mermaid"><svg id="mermaidChart40" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="flowchart mermaid-svg" style="max-width: 656px;" viewBox="0 0 656 725.9305419921875" role="graphics-document document" aria-roledescription="flowchart-v2"><style>#mermaidChart40{font-family:sans-serif;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaidChart40 .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaidChart40 .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaidChart40 .error-icon{fill:#552222;}#mermaidChart40 .error-text{fill:#552222;stroke:#552222;}#mermaidChart40 .edge-thickness-normal{stroke-width:1px;}#mermaidChart40 .edge-thickness-thick{stroke-width:3.5px;}#mermaidChart40 .edge-pattern-solid{stroke-dasharray:0;}#mermaidChart40 .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaidChart40 .edge-pattern-dashed{stroke-dasharray:3;}#mermaidChart40 .edge-pattern-dotted{stroke-dasharray:2;}#mermaidChart40 .marker{fill:#333333;stroke:#333333;}#mermaidChart40 .marker.cross{stroke:#333333;}#mermaidChart40 svg{font-family:sans-serif;font-size:16px;}#mermaidChart40 p{margin:0;}#mermaidChart40 .label{font-family:sans-serif;color:#333;}#mermaidChart40 .cluster-label text{fill:#333;}#mermaidChart40 .cluster-label span{color:#333;}#mermaidChart40 .cluster-label span p{background-color:transparent;}#mermaidChart40 .label text,#mermaidChart40 span{fill:#333;color:#333;}#mermaidChart40 .node rect,#mermaidChart40 .node circle,#mermaidChart40 .node ellipse,#mermaidChart40 .node polygon,#mermaidChart40 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaidChart40 .rough-node .label text,#mermaidChart40 .node .label text,#mermaidChart40 .image-shape .label,#mermaidChart40 .icon-shape .label{text-anchor:middle;}#mermaidChart40 .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaidChart40 .rough-node .label,#mermaidChart40 .node .label,#mermaidChart40 .image-shape .label,#mermaidChart40 .icon-shape .label{text-align:center;}#mermaidChart40 .node.clickable{cursor:pointer;}#mermaidChart40 .root .anchor path{fill:#333333!important;stroke-width:0;stroke:#333333;}#mermaidChart40 .arrowheadPath{fill:#333333;}#mermaidChart40 .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaidChart40 .flowchart-link{stroke:#333333;fill:none;}#mermaidChart40 .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaidChart40 .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#mermaidChart40 .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaidChart40 .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#mermaidChart40 .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaidChart40 .cluster text{fill:#333;}#mermaidChart40 .cluster span{color:#333;}#mermaidChart40 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaidChart40 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaidChart40 rect.text{fill:none;stroke-width:0;}#mermaidChart40 .icon-shape,#mermaidChart40 .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaidChart40 .icon-shape p,#mermaidChart40 .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#mermaidChart40 .icon-shape rect,#mermaidChart40 .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaidChart40 .label-icon{display:inline-block;height:1em;overflow:visible;vertical-align:-0.125em;}#mermaidChart40 .node .label-icon path{fill:currentColor;stroke:revert;stroke-width:revert;}#mermaidChart40 :root{--mermaid-alt-font-family:sans-serif;}</style><g><marker id="mermaidChart40_flowchart-v2-pointEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart40_flowchart-v2-pointStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="4.5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart40_flowchart-v2-circleEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart40_flowchart-v2-circleStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart40_flowchart-v2-crossEnd" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart40_flowchart-v2-crossStart" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><g class="root"><g class="clusters"><g class="cluster " id="subGraph3" data-look="classic"><rect style="" x="8" y="565.9513778686523" width="640" height="151.97916412353516"></rect><g class="cluster-label " transform="translate(228.00000762939453, 565.9513778686523)"><foreignObject width="199.99998474121094" height="23.993053436279297"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Step 7: Population Clustering</p></span></div></foreignObject></g></g><g class="cluster " id="subGraph2" data-look="classic"><rect style="" x="8" y="363.9722137451172" width="640" height="151.97916412353516"></rect><g class="cluster-label " transform="translate(251.7369842529297, 363.9722137451172)"><foreignObject width="152.52603149414062" height="23.993053436279297"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Step 5: Aggregation</p></span></div></foreignObject></g></g><g class="cluster " id="subGraph1" data-look="classic"><rect style="" x="8" y="185.9861068725586" width="640" height="127.9861068725586"></rect><g class="cluster-label " transform="translate(228.00000762939453, 185.9861068725586)"><foreignObject width="199.99998474121094" height="23.993053436279297"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Step 3: Individual Clustering</p></span></div></foreignObject></g></g><g class="cluster " id="subGraph0" data-look="classic"><rect style="" x="22.83507537841797" y="8" width="610.3298492431641" height="127.9861068725586"></rect><g class="cluster-label " transform="translate(244.5668487548828, 8)"><foreignObject width="166.86630249023438" height="23.993053436279297"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Step 1: Voxel Features</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path d="M173,110.986L173,135.986L173,160.986L173,185.986L173,206.986" id="L_V1_S1_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart40_flowchart-v2-pointEnd)"></path><path d="M483,110.986L483,135.986L483,160.986L483,185.986L483,206.986" id="L_V2_S2_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart40_flowchart-v2-pointEnd)"></path><path d="M173,288.972L173,313.972L173,338.972L173,363.972L173,384.972" id="L_S1_A1_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart40_flowchart-v2-pointEnd)"></path><path d="M483,288.972L483,313.972L483,338.972L483,363.972L483,384.972" id="L_S2_A2_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart40_flowchart-v2-pointEnd)"></path><path d="M173,490.951L173,515.951L173,540.951L173,565.951L173,586.951" id="L_A1_H1_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart40_flowchart-v2-pointEnd)"></path><path d="M483,490.951L483,515.951L483,540.951L483,565.951L483,586.951" id="L_A2_H2_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart40_flowchart-v2-pointEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default  " id="flowchart-V1-0" transform="translate(173, 71.9930534362793)"><rect class="basic label-container" style="" x="-115.16492462158203" y="-38.9930534362793" width="230.32984924316406" height="77.9861068725586"></rect><g class="label" style="" transform="translate(-85.16492462158203, -23.993053436279297)"><rect></rect><foreignObject width="170.32984924316406" height="47.986106872558594"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Subject 1:<br/>N1 voxels × F features</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-V2-1" transform="translate(483, 71.9930534362793)"><rect class="basic label-container" style="" x="-115.16492462158203" y="-38.9930534362793" width="230.32984924316406" height="77.9861068725586"></rect><g class="label" style="" transform="translate(-85.16492462158203, -23.993053436279297)"><rect></rect><foreignObject width="170.32984924316406" height="47.986106872558594"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Subject 2:<br/>N2 voxels × F features</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-S1-2" transform="translate(173, 249.9791603088379)"><rect class="basic label-container" style="" x="-129.99999237060547" y="-38.9930534362793" width="259.99998474121094" height="77.9861068725586"></rect><g class="label" style="" transform="translate(-99.99999237060547, -23.993053436279297)"><rect></rect><foreignObject width="199.99998474121094" height="47.986106872558594"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Subject 1:<br/>50 supervoxels × F features</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-S2-3" transform="translate(483, 249.9791603088379)"><rect class="basic label-container" style="" x="-129.99999237060547" y="-38.9930534362793" width="259.99998474121094" height="77.9861068725586"></rect><g class="label" style="" transform="translate(-99.99999237060547, -23.993053436279297)"><rect></rect><foreignObject width="199.99998474121094" height="47.986106872558594"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Subject 2:<br/>50 supervoxels × F features</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-A1-4" transform="translate(173, 439.96179580688477)"><rect class="basic label-container" style="" x="-129.99999237060547" y="-50.98958206176758" width="259.99998474121094" height="101.97916412353516"></rect><g class="label" style="" transform="translate(-99.99999237060547, -35.98958206176758)"><rect></rect><foreignObject width="199.99998474121094" height="71.97916412353516"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Subject 1:<br/>50 supervoxels × F features<br/>+ Supervoxel column</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-A2-5" transform="translate(483, 439.96179580688477)"><rect class="basic label-container" style="" x="-129.99999237060547" y="-50.98958206176758" width="259.99998474121094" height="101.97916412353516"></rect><g class="label" style="" transform="translate(-99.99999237060547, -35.98958206176758)"><rect></rect><foreignObject width="199.99998474121094" height="71.97916412353516"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Subject 2:<br/>50 supervoxels × F features<br/>+ Supervoxel column</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-H1-6" transform="translate(173, 641.9409599304199)"><rect class="basic label-container" style="" x="-129.99999237060547" y="-50.98958206176758" width="259.99998474121094" height="101.97916412353516"></rect><g class="label" style="" transform="translate(-99.99999237060547, -35.98958206176758)"><rect></rect><foreignObject width="199.99998474121094" height="71.97916412353516"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Subject 1:<br/>50 supervoxels × F features<br/>+ Habitats column</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-H2-7" transform="translate(483, 641.9409599304199)"><rect class="basic label-container" style="" x="-129.99999237060547" y="-50.98958206176758" width="259.99998474121094" height="101.97916412353516"></rect><g class="label" style="" transform="translate(-99.99999237060547, -35.98958206176758)"><rect></rect><foreignObject width="199.99998474121094" height="71.97916412353516"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Subject 2:<br/>50 supervoxels × F features<br/>+ Habitats column</p></span></div></foreignObject></g></g></g></g></g></svg></div><h2 id='clustering-strategies'><span>Clustering Strategies</span></h2><h3 id='two-step-strategy-default'><span>Two-Step Strategy (Default)</span></h3><p><strong><span>Pipeline Steps:</span></strong></p><ol start='' ><li><p><span>Voxel Feature Extraction</span></p></li><li><p><span>Subject Preprocessing</span></p></li><li><p><span>Individual Clustering (voxel → supervoxel, per subject)</span></p></li><li><p><span>Supervoxel Feature Extraction (conditional)</span></p></li><li><p><span>Supervoxel Aggregation</span></p></li><li><p><span>Group Preprocessing</span></p></li><li><p><span>Population Clustering (supervoxel → habitat, across all subjects)</span></p></li></ol><p><strong><span>Advantages:</span></strong></p><ul><li><p><span>Reduces dimensionality (voxels → supervoxels)</span></p></li><li><p><span>Finds common habitat patterns across population</span></p></li><li><p><span>Standard approach in literature</span></p></li></ul><p><strong><span>Pipeline Diagram:</span></strong></p><div class="md-diagram-panel md-fences-adv-panel" lang="mermaid"><svg id="mermaidChart41" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="flowchart mermaid-svg" style="max-width: 242.70138549804688px;" viewBox="0 0 242.70138549804688 909.8888549804688" role="graphics-document document" aria-roledescription="flowchart-v2"><style>#mermaidChart41{font-family:sans-serif;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaidChart41 .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaidChart41 .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaidChart41 .error-icon{fill:#552222;}#mermaidChart41 .error-text{fill:#552222;stroke:#552222;}#mermaidChart41 .edge-thickness-normal{stroke-width:1px;}#mermaidChart41 .edge-thickness-thick{stroke-width:3.5px;}#mermaidChart41 .edge-pattern-solid{stroke-dasharray:0;}#mermaidChart41 .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaidChart41 .edge-pattern-dashed{stroke-dasharray:3;}#mermaidChart41 .edge-pattern-dotted{stroke-dasharray:2;}#mermaidChart41 .marker{fill:#333333;stroke:#333333;}#mermaidChart41 .marker.cross{stroke:#333333;}#mermaidChart41 svg{font-family:sans-serif;font-size:16px;}#mermaidChart41 p{margin:0;}#mermaidChart41 .label{font-family:sans-serif;color:#333;}#mermaidChart41 .cluster-label text{fill:#333;}#mermaidChart41 .cluster-label span{color:#333;}#mermaidChart41 .cluster-label span p{background-color:transparent;}#mermaidChart41 .label text,#mermaidChart41 span{fill:#333;color:#333;}#mermaidChart41 .node rect,#mermaidChart41 .node circle,#mermaidChart41 .node ellipse,#mermaidChart41 .node polygon,#mermaidChart41 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaidChart41 .rough-node .label text,#mermaidChart41 .node .label text,#mermaidChart41 .image-shape .label,#mermaidChart41 .icon-shape .label{text-anchor:middle;}#mermaidChart41 .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaidChart41 .rough-node .label,#mermaidChart41 .node .label,#mermaidChart41 .image-shape .label,#mermaidChart41 .icon-shape .label{text-align:center;}#mermaidChart41 .node.clickable{cursor:pointer;}#mermaidChart41 .root .anchor path{fill:#333333!important;stroke-width:0;stroke:#333333;}#mermaidChart41 .arrowheadPath{fill:#333333;}#mermaidChart41 .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaidChart41 .flowchart-link{stroke:#333333;fill:none;}#mermaidChart41 .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaidChart41 .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#mermaidChart41 .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaidChart41 .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#mermaidChart41 .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaidChart41 .cluster text{fill:#333;}#mermaidChart41 .cluster span{color:#333;}#mermaidChart41 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaidChart41 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaidChart41 rect.text{fill:none;stroke-width:0;}#mermaidChart41 .icon-shape,#mermaidChart41 .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaidChart41 .icon-shape p,#mermaidChart41 .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#mermaidChart41 .icon-shape rect,#mermaidChart41 .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaidChart41 .label-icon{display:inline-block;height:1em;overflow:visible;vertical-align:-0.125em;}#mermaidChart41 .node .label-icon path{fill:currentColor;stroke:revert;stroke-width:revert;}#mermaidChart41 :root{--mermaid-alt-font-family:sans-serif;}</style><g><marker id="mermaidChart41_flowchart-v2-pointEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart41_flowchart-v2-pointStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="4.5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart41_flowchart-v2-circleEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart41_flowchart-v2-circleStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart41_flowchart-v2-crossEnd" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart41_flowchart-v2-crossStart" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path d="M121.351,85.986L121.351,110.986L121.351,131.986" id="L_V_SP_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart41_flowchart-v2-pointEnd)"></path><path d="M121.351,213.972L121.351,238.972L121.351,259.972" id="L_SP_IC_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart41_flowchart-v2-pointEnd)"></path><path d="M121.351,365.951L121.351,390.951L121.351,411.951" id="L_IC_SA_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart41_flowchart-v2-pointEnd)"></path><path d="M121.351,493.937L121.351,518.937L121.351,539.937" id="L_SA_GP_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart41_flowchart-v2-pointEnd)"></path><path d="M121.351,621.924L121.351,646.924L121.351,667.924" id="L_GP_PC_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart41_flowchart-v2-pointEnd)"></path><path d="M121.351,773.903L121.351,798.903L121.351,819.903" id="L_PC_R_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart41_flowchart-v2-pointEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default  " id="flowchart-V-0" transform="translate(121.35069274902344, 46.9930534362793)"><rect class="basic label-container" style="" x="-85.17794799804688" y="-38.9930534362793" width="170.35589599609375" height="77.9861068725586"></rect><g class="label" style="" transform="translate(-55.177947998046875, -23.993053436279297)"><rect></rect><foreignObject width="110.35589599609375" height="47.986106872558594"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Voxel Features<br/>All Subjects</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-SP-1" transform="translate(121.35069274902344, 174.9791603088379)"><rect class="basic label-container" style="" x="-83.64582824707031" y="-38.9930534362793" width="167.29165649414062" height="77.9861068725586"></rect><g class="label" style="" transform="translate(-53.64582824707031, -23.993053436279297)"><rect></rect><foreignObject width="107.29165649414062" height="47.986106872558594"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Subject<br/>Preprocessing</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-IC-3" transform="translate(121.35069274902344, 314.96179580688477)"><rect class="basic label-container" style="" x="-108.61978912353516" y="-50.98958206176758" width="217.2395782470703" height="101.97916412353516"></rect><g class="label" style="" transform="translate(-78.61978912353516, -35.98958206176758)"><rect></rect><foreignObject width="157.2395782470703" height="71.97916412353516"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Individual Clustering<br/>Voxel → Supervoxel<br/>Per Subject</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-SA-5" transform="translate(121.35069274902344, 454.94443130493164)"><rect class="basic label-container" style="" x="-78.00780868530273" y="-38.9930534362793" width="156.01561737060547" height="77.9861068725586"></rect><g class="label" style="" transform="translate(-48.007808685302734, -23.993053436279297)"><rect></rect><foreignObject width="96.01561737060547" height="47.986106872558594"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Supervoxel<br/>Aggregation</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-GP-7" transform="translate(121.35069274902344, 582.9305381774902)"><rect class="basic label-container" style="" x="-83.64582824707031" y="-38.9930534362793" width="167.29165649414062" height="77.9861068725586"></rect><g class="label" style="" transform="translate(-53.64582824707031, -23.993053436279297)"><rect></rect><foreignObject width="107.29165649414062" height="47.986106872558594"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Group<br/>Preprocessing</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-PC-9" transform="translate(121.35069274902344, 722.9131736755371)"><rect class="basic label-container" style="" x="-113.35069274902344" y="-50.98958206176758" width="226.70138549804688" height="101.97916412353516"></rect><g class="label" style="" transform="translate(-83.35069274902344, -35.98958206176758)"><rect></rect><foreignObject width="166.70138549804688" height="71.97916412353516"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Population Clustering<br/>Supervoxel → Habitat<br/>Across All Subjects</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-R-11" transform="translate(121.35069274902344, 862.895809173584)"><rect class="basic label-container" style="" x="-84.60937118530273" y="-38.9930534362793" width="169.21874237060547" height="77.9861068725586"></rect><g class="label" style="" transform="translate(-54.609371185302734, -23.993053436279297)"><rect></rect><foreignObject width="109.21874237060547" height="47.986106872558594"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Results<br/>Habitat Labels</p></span></div></foreignObject></g></g></g></g></g></svg></div><h3 id='one-step-strategy'><span>One-Step Strategy</span></h3><p><strong><span>Pipeline Steps:</span></strong></p><ol start='' ><li><p><span>Voxel Feature Extraction</span></p></li><li><p><span>Subject Preprocessing</span></p></li><li><p><span>Individual Clustering (voxel → habitat, per subject)</span></p></li><li><p><span>Supervoxel Aggregation (for consistency)</span></p></li></ol><p><strong><span>Advantages:</span></strong></p><ul><li><p><span>Subject-specific habitat patterns</span></p></li><li><p><span>No population-level step</span></p></li><li><p><span>Faster execution</span></p></li></ul><p><strong><span>Pipeline Diagram:</span></strong></p><div class="md-diagram-panel md-fences-adv-panel" lang="mermaid"><svg id="mermaidChart42" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="flowchart mermaid-svg" style="max-width: 233.2395782470703px;" viewBox="0 0 233.2395782470703 629.923583984375" role="graphics-document document" aria-roledescription="flowchart-v2"><style>#mermaidChart42{font-family:sans-serif;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaidChart42 .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaidChart42 .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaidChart42 .error-icon{fill:#552222;}#mermaidChart42 .error-text{fill:#552222;stroke:#552222;}#mermaidChart42 .edge-thickness-normal{stroke-width:1px;}#mermaidChart42 .edge-thickness-thick{stroke-width:3.5px;}#mermaidChart42 .edge-pattern-solid{stroke-dasharray:0;}#mermaidChart42 .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaidChart42 .edge-pattern-dashed{stroke-dasharray:3;}#mermaidChart42 .edge-pattern-dotted{stroke-dasharray:2;}#mermaidChart42 .marker{fill:#333333;stroke:#333333;}#mermaidChart42 .marker.cross{stroke:#333333;}#mermaidChart42 svg{font-family:sans-serif;font-size:16px;}#mermaidChart42 p{margin:0;}#mermaidChart42 .label{font-family:sans-serif;color:#333;}#mermaidChart42 .cluster-label text{fill:#333;}#mermaidChart42 .cluster-label span{color:#333;}#mermaidChart42 .cluster-label span p{background-color:transparent;}#mermaidChart42 .label text,#mermaidChart42 span{fill:#333;color:#333;}#mermaidChart42 .node rect,#mermaidChart42 .node circle,#mermaidChart42 .node ellipse,#mermaidChart42 .node polygon,#mermaidChart42 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaidChart42 .rough-node .label text,#mermaidChart42 .node .label text,#mermaidChart42 .image-shape .label,#mermaidChart42 .icon-shape .label{text-anchor:middle;}#mermaidChart42 .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaidChart42 .rough-node .label,#mermaidChart42 .node .label,#mermaidChart42 .image-shape .label,#mermaidChart42 .icon-shape .label{text-align:center;}#mermaidChart42 .node.clickable{cursor:pointer;}#mermaidChart42 .root .anchor path{fill:#333333!important;stroke-width:0;stroke:#333333;}#mermaidChart42 .arrowheadPath{fill:#333333;}#mermaidChart42 .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaidChart42 .flowchart-link{stroke:#333333;fill:none;}#mermaidChart42 .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaidChart42 .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#mermaidChart42 .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaidChart42 .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#mermaidChart42 .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaidChart42 .cluster text{fill:#333;}#mermaidChart42 .cluster span{color:#333;}#mermaidChart42 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaidChart42 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaidChart42 rect.text{fill:none;stroke-width:0;}#mermaidChart42 .icon-shape,#mermaidChart42 .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaidChart42 .icon-shape p,#mermaidChart42 .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#mermaidChart42 .icon-shape rect,#mermaidChart42 .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaidChart42 .label-icon{display:inline-block;height:1em;overflow:visible;vertical-align:-0.125em;}#mermaidChart42 .node .label-icon path{fill:currentColor;stroke:revert;stroke-width:revert;}#mermaidChart42 :root{--mermaid-alt-font-family:sans-serif;}</style><g><marker id="mermaidChart42_flowchart-v2-pointEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart42_flowchart-v2-pointStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="4.5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart42_flowchart-v2-circleEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart42_flowchart-v2-circleStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart42_flowchart-v2-crossEnd" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart42_flowchart-v2-crossStart" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path d="M116.62,85.986L116.62,110.986L116.62,131.986" id="L_V_SP_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart42_flowchart-v2-pointEnd)"></path><path d="M116.62,213.972L116.62,238.972L116.62,259.972" id="L_SP_IC_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart42_flowchart-v2-pointEnd)"></path><path d="M116.62,365.951L116.62,390.951L116.62,411.951" id="L_IC_SA_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart42_flowchart-v2-pointEnd)"></path><path d="M116.62,493.937L116.62,518.937L116.62,539.937" id="L_SA_R_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart42_flowchart-v2-pointEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default  " id="flowchart-V-0" transform="translate(116.61978912353516, 46.9930534362793)"><rect class="basic label-container" style="" x="-85.17794799804688" y="-38.9930534362793" width="170.35589599609375" height="77.9861068725586"></rect><g class="label" style="" transform="translate(-55.177947998046875, -23.993053436279297)"><rect></rect><foreignObject width="110.35589599609375" height="47.986106872558594"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Voxel Features<br/>All Subjects</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-SP-1" transform="translate(116.61978912353516, 174.9791603088379)"><rect class="basic label-container" style="" x="-83.64582824707031" y="-38.9930534362793" width="167.29165649414062" height="77.9861068725586"></rect><g class="label" style="" transform="translate(-53.64582824707031, -23.993053436279297)"><rect></rect><foreignObject width="107.29165649414062" height="47.986106872558594"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Subject<br/>Preprocessing</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-IC-3" transform="translate(116.61978912353516, 314.96179580688477)"><rect class="basic label-container" style="" x="-108.61978912353516" y="-50.98958206176758" width="217.2395782470703" height="101.97916412353516"></rect><g class="label" style="" transform="translate(-78.61978912353516, -35.98958206176758)"><rect></rect><foreignObject width="157.2395782470703" height="71.97916412353516"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Individual Clustering<br/>Voxel → Habitat<br/>Per Subject</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-SA-5" transform="translate(116.61978912353516, 454.94443130493164)"><rect class="basic label-container" style="" x="-78.00780868530273" y="-38.9930534362793" width="156.01561737060547" height="77.9861068725586"></rect><g class="label" style="" transform="translate(-48.007808685302734, -23.993053436279297)"><rect></rect><foreignObject width="96.01561737060547" height="47.986106872558594"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Supervoxel<br/>Aggregation</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-R-7" transform="translate(116.61978912353516, 582.9305381774902)"><rect class="basic label-container" style="" x="-84.60937118530273" y="-38.9930534362793" width="169.21874237060547" height="77.9861068725586"></rect><g class="label" style="" transform="translate(-54.609371185302734, -23.993053436279297)"><rect></rect><foreignObject width="109.21874237060547" height="47.986106872558594"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Results<br/>Habitat Labels</p></span></div></foreignObject></g></g></g></g></g></svg></div><h3 id='direct-pooling-strategy'><span>Direct Pooling Strategy</span></h3><p><strong><span>Pipeline Steps:</span></strong></p><ol start='' ><li><p><span>Voxel Feature Extraction</span></p></li><li><p><span>Subject Preprocessing</span></p></li><li><p><span>Concatenate All Voxels</span></p></li><li><p><span>Group Preprocessing</span></p></li><li><p><span>Population Clustering (all voxels → habitat)</span></p></li></ol><p><strong><span>Advantages:</span></strong></p><ul><li><p><span>Simplest approach</span></p></li><li><p><span>Fast execution</span></p></li><li><p><span>No intermediate supervoxel step</span></p></li></ul><p><strong><span>Pipeline Diagram:</span></strong></p><div class="md-diagram-panel md-fences-adv-panel" lang="mermaid"><svg id="mermaidChart43" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="flowchart mermaid-svg" style="max-width: 241.07810974121094px;" viewBox="0 0 241.07810974121094 733.9166259765625" role="graphics-document document" aria-roledescription="flowchart-v2"><style>#mermaidChart43{font-family:sans-serif;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaidChart43 .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaidChart43 .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaidChart43 .error-icon{fill:#552222;}#mermaidChart43 .error-text{fill:#552222;stroke:#552222;}#mermaidChart43 .edge-thickness-normal{stroke-width:1px;}#mermaidChart43 .edge-thickness-thick{stroke-width:3.5px;}#mermaidChart43 .edge-pattern-solid{stroke-dasharray:0;}#mermaidChart43 .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaidChart43 .edge-pattern-dashed{stroke-dasharray:3;}#mermaidChart43 .edge-pattern-dotted{stroke-dasharray:2;}#mermaidChart43 .marker{fill:#333333;stroke:#333333;}#mermaidChart43 .marker.cross{stroke:#333333;}#mermaidChart43 svg{font-family:sans-serif;font-size:16px;}#mermaidChart43 p{margin:0;}#mermaidChart43 .label{font-family:sans-serif;color:#333;}#mermaidChart43 .cluster-label text{fill:#333;}#mermaidChart43 .cluster-label span{color:#333;}#mermaidChart43 .cluster-label span p{background-color:transparent;}#mermaidChart43 .label text,#mermaidChart43 span{fill:#333;color:#333;}#mermaidChart43 .node rect,#mermaidChart43 .node circle,#mermaidChart43 .node ellipse,#mermaidChart43 .node polygon,#mermaidChart43 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaidChart43 .rough-node .label text,#mermaidChart43 .node .label text,#mermaidChart43 .image-shape .label,#mermaidChart43 .icon-shape .label{text-anchor:middle;}#mermaidChart43 .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaidChart43 .rough-node .label,#mermaidChart43 .node .label,#mermaidChart43 .image-shape .label,#mermaidChart43 .icon-shape .label{text-align:center;}#mermaidChart43 .node.clickable{cursor:pointer;}#mermaidChart43 .root .anchor path{fill:#333333!important;stroke-width:0;stroke:#333333;}#mermaidChart43 .arrowheadPath{fill:#333333;}#mermaidChart43 .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaidChart43 .flowchart-link{stroke:#333333;fill:none;}#mermaidChart43 .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaidChart43 .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#mermaidChart43 .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaidChart43 .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#mermaidChart43 .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaidChart43 .cluster text{fill:#333;}#mermaidChart43 .cluster span{color:#333;}#mermaidChart43 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaidChart43 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaidChart43 rect.text{fill:none;stroke-width:0;}#mermaidChart43 .icon-shape,#mermaidChart43 .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaidChart43 .icon-shape p,#mermaidChart43 .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#mermaidChart43 .icon-shape rect,#mermaidChart43 .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaidChart43 .label-icon{display:inline-block;height:1em;overflow:visible;vertical-align:-0.125em;}#mermaidChart43 .node .label-icon path{fill:currentColor;stroke:revert;stroke-width:revert;}#mermaidChart43 :root{--mermaid-alt-font-family:sans-serif;}</style><g><marker id="mermaidChart43_flowchart-v2-pointEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart43_flowchart-v2-pointStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="4.5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart43_flowchart-v2-circleEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart43_flowchart-v2-circleStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart43_flowchart-v2-crossEnd" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart43_flowchart-v2-crossStart" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path d="M120.539,85.986L120.539,110.986L120.539,131.986" id="L_V_SP_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart43_flowchart-v2-pointEnd)"></path><path d="M120.539,213.972L120.539,238.972L120.539,259.972" id="L_SP_CV_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart43_flowchart-v2-pointEnd)"></path><path d="M120.539,341.958L120.539,366.958L120.539,387.958" id="L_CV_GP_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart43_flowchart-v2-pointEnd)"></path><path d="M120.539,469.944L120.539,494.944L120.539,515.944" id="L_GP_PC_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart43_flowchart-v2-pointEnd)"></path><path d="M120.539,597.931L120.539,622.931L120.539,643.931" id="L_PC_R_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart43_flowchart-v2-pointEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default  " id="flowchart-V-0" transform="translate(120.53905487060547, 46.9930534362793)"><rect class="basic label-container" style="" x="-85.17794799804688" y="-38.9930534362793" width="170.35589599609375" height="77.9861068725586"></rect><g class="label" style="" transform="translate(-55.177947998046875, -23.993053436279297)"><rect></rect><foreignObject width="110.35589599609375" height="47.986106872558594"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Voxel Features<br/>All Subjects</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-SP-1" transform="translate(120.53905487060547, 174.9791603088379)"><rect class="basic label-container" style="" x="-83.64582824707031" y="-38.9930534362793" width="167.29165649414062" height="77.9861068725586"></rect><g class="label" style="" transform="translate(-53.64582824707031, -23.993053436279297)"><rect></rect><foreignObject width="107.29165649414062" height="47.986106872558594"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Subject<br/>Preprocessing</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-CV-3" transform="translate(120.53905487060547, 302.9652671813965)"><rect class="basic label-container" style="" x="-78.05989456176758" y="-38.9930534362793" width="156.11978912353516" height="77.9861068725586"></rect><g class="label" style="" transform="translate(-48.05989456176758, -23.993053436279297)"><rect></rect><foreignObject width="96.11978912353516" height="47.986106872558594"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Concatenate<br/>All Voxels</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-GP-5" transform="translate(120.53905487060547, 430.9513740539551)"><rect class="basic label-container" style="" x="-83.64582824707031" y="-38.9930534362793" width="167.29165649414062" height="77.9861068725586"></rect><g class="label" style="" transform="translate(-53.64582824707031, -23.993053436279297)"><rect></rect><foreignObject width="107.29165649414062" height="47.986106872558594"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Group<br/>Preprocessing</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-PC-7" transform="translate(120.53905487060547, 558.9374809265137)"><rect class="basic label-container" style="" x="-112.53905487060547" y="-38.9930534362793" width="225.07810974121094" height="77.9861068725586"></rect><g class="label" style="" transform="translate(-82.53905487060547, -23.993053436279297)"><rect></rect><foreignObject width="165.07810974121094" height="47.986106872558594"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Population Clustering<br/>All Voxels → Habitat</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-R-9" transform="translate(120.53905487060547, 686.9235877990723)"><rect class="basic label-container" style="" x="-84.60937118530273" y="-38.9930534362793" width="169.21874237060547" height="77.9861068725586"></rect><g class="label" style="" transform="translate(-54.609371185302734, -23.993053436279297)"><rect></rect><foreignObject width="109.21874237060547" height="47.986106872558594"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Results<br/>Habitat Labels</p></span></div></foreignObject></g></g></g></g></g></svg></div><h2 id='pipeline-execution'><span>Pipeline Execution</span></h2><h3 id='training-mode-runmode-train'><span>Training Mode (</span><code>run_mode: train</code><span>)</span></h3><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="python"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="python"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.3437px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 1. Build new pipeline</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">pipeline</span> <span class="cm-operator">=</span> <span class="cm-variable">build_habitat_pipeline</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">config</span><span class="cm-operator">=</span><span class="cm-variable">config</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">feature_manager</span><span class="cm-operator">=</span><span class="cm-variable">feature_manager</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">clustering_manager</span><span class="cm-operator">=</span><span class="cm-variable">clustering_manager</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">result_manager</span><span class="cm-operator">=</span><span class="cm-variable">result_manager</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 2. Fit and transform (trains all stateful steps)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">results_df</span> <span class="cm-operator">=</span> <span class="cm-variable">pipeline</span>.<span class="cm-property">fit_transform</span>(<span class="cm-variable">X</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 3. Save trained pipeline</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">pipeline</span>.<span class="cm-property">save</span>(<span class="cm-variable">pipeline_path</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 321px;"></div><div class="CodeMirror-gutters" style="display: none; height: 321px;"></div></div></div></pre><p><strong><span>What Happens:</span></strong></p><ul><li><p><span>All steps execute </span><code>fit()</code><span> to learn parameters</span></p></li><li><p><span>Stateful steps (clustering) train models</span></p></li><li><p><span>Pipeline state is saved to disk</span></p></li></ul><h3 id='prediction-mode-runmode-predict'><span>Prediction Mode (</span><code>run_mode: predict</code><span>)</span></h3><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="python"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="python"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.3437px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 1. Load saved pipeline</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">pipeline</span> <span class="cm-operator">=</span> <span class="cm-variable">HabitatPipeline</span>.<span class="cm-property">load</span>(<span class="cm-variable">pipeline_path</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 2. Update references to current managers/config</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">strategy</span>.<span class="cm-property">_update_pipeline_references</span>(<span class="cm-variable">pipeline</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 3. Transform only (no training)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">results_df</span> <span class="cm-operator">=</span> <span class="cm-variable">pipeline</span>.<span class="cm-property">transform</span>(<span class="cm-variable">X</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 197px;"></div><div class="CodeMirror-gutters" style="display: none; height: 197px;"></div></div></div></pre><p><strong><span>What Happens:</span></strong></p><ul><li><p><span>Pipeline loads from disk</span></p></li><li><p><span>References (config, managers) are updated</span></p></li><li><p><span>Only </span><code>transform()</code><span> is called (no </span><code>fit()</code><span>)</span></p></li><li><p><span>Uses pre-trained models from saved pipeline</span></p></li></ul><h3 id='reference-update-mechanism'><span>Reference Update Mechanism</span></h3><p><span>When loading a pipeline for prediction, the system automatically updates:</span></p><ol start='' ><li><p><strong><span>Config</span></strong><span>: </span><code>pipeline.config = current_config</code></p></li><li><p><strong><span>Managers</span></strong><span>: All </span><code>*_manager</code><span> attributes in pipeline steps</span></p><ul><li><p><code>feature_manager</code><span> → current </span><code>analysis.feature_manager</code></p></li><li><p><code>clustering_manager</code><span> → current </span><code>analysis.clustering_manager</code></p></li><li><p><code>result_manager</code><span> → current </span><code>analysis.result_manager</code></p></li></ul></li></ol><p><span>This ensures that:</span></p><ul><li><p><span>Output paths (</span><code>out_dir</code><span>) use current config</span></p></li><li><p><span>Visualization settings (</span><code>plot_curves</code><span>, </span><code>save_images</code><span>) use current config</span></p></li><li><p><span>Managers use current instances (important for file paths)</span></p></li></ul><h2 id='manager-pattern'><span>Manager Pattern</span></h2><h3 id='why-managers'><span>Why Managers?</span></h3><p><span>The manager pattern provides:</span></p><ul><li><p><strong><span>Separation of Concerns</span></strong><span>: Each manager handles one domain</span></p></li><li><p><strong><span>Testability</span></strong><span>: Managers can be mocked/stubbed</span></p></li><li><p><strong><span>Reusability</span></strong><span>: Managers used across different strategies</span></p></li><li><p><strong><span>Dependency Injection</span></strong><span>: Easy to swap implementations</span></p></li></ul><h3 id='manager-responsibilities'><span>Manager Responsibilities</span></h3><figure class='table-figure'><table><thead><tr><th><span>Manager</span></th><th><span>Responsibilities</span></th></tr></thead><tbody><tr><td><strong><span>FeatureManager</span></strong></td><td><span>Feature extraction, preprocessing, image/mask paths</span></td></tr><tr><td><strong><span>ClusteringManager</span></strong></td><td><span>Clustering algorithms, model training, validation</span></td></tr><tr><td><strong><span>ResultManager</span></strong></td><td><span>Results storage, visualization, file I/O</span></td></tr></tbody></table></figure><h3 id='manager-interaction'><span>Manager Interaction</span></h3><div class="md-diagram-panel md-fences-adv-panel" lang="mermaid"><svg id="mermaidChart44" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="flowchart mermaid-svg" style="max-width: 912.6318969726562px;" viewBox="0 0 912.6318969726562 273.986083984375" role="graphics-document document" aria-roledescription="flowchart-v2"><style>#mermaidChart44{font-family:sans-serif;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaidChart44 .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaidChart44 .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaidChart44 .error-icon{fill:#552222;}#mermaidChart44 .error-text{fill:#552222;stroke:#552222;}#mermaidChart44 .edge-thickness-normal{stroke-width:1px;}#mermaidChart44 .edge-thickness-thick{stroke-width:3.5px;}#mermaidChart44 .edge-pattern-solid{stroke-dasharray:0;}#mermaidChart44 .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaidChart44 .edge-pattern-dashed{stroke-dasharray:3;}#mermaidChart44 .edge-pattern-dotted{stroke-dasharray:2;}#mermaidChart44 .marker{fill:#333333;stroke:#333333;}#mermaidChart44 .marker.cross{stroke:#333333;}#mermaidChart44 svg{font-family:sans-serif;font-size:16px;}#mermaidChart44 p{margin:0;}#mermaidChart44 .label{font-family:sans-serif;color:#333;}#mermaidChart44 .cluster-label text{fill:#333;}#mermaidChart44 .cluster-label span{color:#333;}#mermaidChart44 .cluster-label span p{background-color:transparent;}#mermaidChart44 .label text,#mermaidChart44 span{fill:#333;color:#333;}#mermaidChart44 .node rect,#mermaidChart44 .node circle,#mermaidChart44 .node ellipse,#mermaidChart44 .node polygon,#mermaidChart44 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaidChart44 .rough-node .label text,#mermaidChart44 .node .label text,#mermaidChart44 .image-shape .label,#mermaidChart44 .icon-shape .label{text-anchor:middle;}#mermaidChart44 .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaidChart44 .rough-node .label,#mermaidChart44 .node .label,#mermaidChart44 .image-shape .label,#mermaidChart44 .icon-shape .label{text-align:center;}#mermaidChart44 .node.clickable{cursor:pointer;}#mermaidChart44 .root .anchor path{fill:#333333!important;stroke-width:0;stroke:#333333;}#mermaidChart44 .arrowheadPath{fill:#333333;}#mermaidChart44 .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaidChart44 .flowchart-link{stroke:#333333;fill:none;}#mermaidChart44 .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaidChart44 .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#mermaidChart44 .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaidChart44 .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#mermaidChart44 .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaidChart44 .cluster text{fill:#333;}#mermaidChart44 .cluster span{color:#333;}#mermaidChart44 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaidChart44 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaidChart44 rect.text{fill:none;stroke-width:0;}#mermaidChart44 .icon-shape,#mermaidChart44 .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaidChart44 .icon-shape p,#mermaidChart44 .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#mermaidChart44 .icon-shape rect,#mermaidChart44 .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaidChart44 .label-icon{display:inline-block;height:1em;overflow:visible;vertical-align:-0.125em;}#mermaidChart44 .node .label-icon path{fill:currentColor;stroke:revert;stroke-width:revert;}#mermaidChart44 :root{--mermaid-alt-font-family:sans-serif;}</style><g><marker id="mermaidChart44_flowchart-v2-pointEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart44_flowchart-v2-pointStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="4.5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart44_flowchart-v2-circleEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart44_flowchart-v2-circleStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart44_flowchart-v2-crossEnd" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart44_flowchart-v2-crossStart" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><g class="root"><g class="clusters"><g class="cluster " id="Managers" data-look="classic"><rect style="" x="38.301639556884766" y="161.9930534362793" width="836.8206977844238" height="103.9930534362793"></rect><g class="cluster-label " transform="translate(418.6477527618408, 161.9930534362793)"><foreignObject width="76.12847137451172" height="23.993053436279297"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Managers</p></span></div></foreignObject></g></g><g class="cluster " id="subGraph0" data-look="classic"><rect style="" x="8" y="8" width="896.6318817138672" height="103.9930534362793"></rect><g class="cluster-label " transform="translate(402.9435501098633, 8)"><foreignObject width="106.74478149414062" height="23.993053436279297"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Pipeline Steps</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path d="M156.086,86.993L156.086,111.993L156.086,136.993L156.086,161.993L160.187,183.067" id="L_VF_FM_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart44_flowchart-v2-pointEnd)"></path><path d="M385.647,86.993L333.158,111.993L333.158,136.993L333.158,161.993L256.706,185.804" id="L_IC_FM_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart44_flowchart-v2-pointEnd)"></path><path d="M442.327,86.993L442.327,111.993L442.327,136.993L442.327,161.993L452.119,183.357" id="L_IC_CM_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart44_flowchart-v2-pointEnd)"></path><path d="M676.992,86.993L616.275,111.993L616.275,136.993L616.275,161.993L547.879,185.684" id="L_PC_CM_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart44_flowchart-v2-pointEnd)"></path><path d="M543.024,86.993L636.275,111.993L636.275,136.993L636.275,161.993L688.532,185.36" id="L_IC_RM_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart44_flowchart-v2-pointEnd)"></path><path d="M774.375,86.993L803.84,111.993L803.84,136.993L803.84,161.993L781.992,184.145" id="L_PC_RM_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style="" marker-end="url(#mermaidChart44_flowchart-v2-pointEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default  " id="flowchart-VF-0" transform="translate(156.08592987060547, 59.99652671813965)"><rect class="basic label-container" style="" x="-113.08592987060547" y="-26.99652671813965" width="226.17185974121094" height="53.9930534362793"></rect><g class="label" style="" transform="translate(-83.08592987060547, -11.996526718139648)"><rect></rect><foreignObject width="166.17185974121094" height="23.993053436279297"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>VoxelFeatureExtractor</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-IC-1" transform="translate(442.3272247314453, 59.99652671813965)"><rect class="basic label-container" style="" x="-123.1553726196289" y="-26.99652671813965" width="246.3107452392578" height="53.9930534362793"></rect><g class="label" style="" transform="translate(-93.1553726196289, -11.996526718139648)"><rect></rect><foreignObject width="186.3107452392578" height="23.993053436279297"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>IndividualClusteringStep</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-PC-2" transform="translate(742.5572357177734, 59.99652671813965)"><rect class="basic label-container" style="" x="-127.07464599609375" y="-26.99652671813965" width="254.1492919921875" height="53.9930534362793"></rect><g class="label" style="" transform="translate(-97.07464599609375, -11.996526718139648)"><rect></rect><foreignObject width="194.1492919921875" height="23.993053436279297"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>PopulationClusteringStep</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-FM-3" transform="translate(166.20528030395508, 213.98958015441895)"><rect class="basic label-container" style="" x="-92.90364074707031" y="-26.99652671813965" width="185.80728149414062" height="53.9930534362793"></rect><g class="label" style="" transform="translate(-62.90364074707031, -11.996526718139648)"><rect></rect><foreignObject width="125.80728149414062" height="23.993053436279297"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>FeatureManager</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-CM-4" transform="translate(466.15969467163086, 213.98958015441895)"><rect class="basic label-container" style="" x="-103.09895324707031" y="-26.99652671813965" width="206.19790649414062" height="53.9930534362793"></rect><g class="label" style="" transform="translate(-73.09895324707031, -11.996526718139648)"><rect></rect><foreignObject width="146.19790649414062" height="23.993053436279297"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>ClusteringManager</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-RM-5" transform="translate(752.5572357177734, 213.98958015441895)"><rect class="basic label-container" style="" x="-87.56510162353516" y="-26.99652671813965" width="175.1302032470703" height="53.9930534362793"></rect><g class="label" style="" transform="translate(-57.565101623535156, -11.996526718139648)"><rect></rect><foreignObject width="115.13020324707031" height="23.993053436279297"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>ResultManager</p></span></div></foreignObject></g></g></g></g></g></svg></div><h2 id='file-structure'><span>File Structure</span></h2><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.3437px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">habit/core/habitat_analysis/</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">├── __init__.py &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # Public API exports</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">├── habitat_analysis.py &nbsp; &nbsp; &nbsp; &nbsp; # Main HabitatAnalysis class</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">├── config_schemas.py &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # Pydantic configuration models</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">├── ARCHITECTURE.md &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # This document</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">├── README.md &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # User-facing documentation</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">├── PIPELINE_DESIGN.md &nbsp; &nbsp; &nbsp; &nbsp;  # Pipeline design details</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">├── strategies/ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # Clustering strategies</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; ├── __init__.py</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; ├── base_strategy.py &nbsp; &nbsp; &nbsp; # Abstract base class</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; ├── two_step_strategy.py &nbsp; # Two-step strategy</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; ├── one_step_strategy.py &nbsp; # One-step strategy</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; └── direct_pooling_strategy.py</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">├── managers/ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # Manager classes</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; ├── __init__.py</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; ├── feature_manager.py &nbsp; &nbsp; # Feature extraction &amp; preprocessing</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; ├── clustering_manager.py  # Clustering algorithms</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; └── result_manager.py &nbsp; &nbsp;  # Results &amp; visualization</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">├── pipelines/ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  # Pipeline infrastructure</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; ├── __init__.py</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; ├── base_pipeline.py &nbsp; &nbsp; &nbsp; # HabitatPipeline, BasePipelineStep</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; ├── pipeline_builder.py &nbsp;  # Pipeline factory functions</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; └── steps/ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  # Concrete pipeline steps</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; &nbsp; &nbsp; ├── voxel_feature_extractor.py</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; &nbsp; &nbsp; ├── subject_preprocessing.py</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; &nbsp; &nbsp; ├── individual_clustering.py</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; &nbsp; &nbsp; ├── supervoxel_feature_extraction.py</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; &nbsp; &nbsp; ├── supervoxel_aggregation.py</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; &nbsp; &nbsp; ├── concatenate_voxels.py</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; &nbsp; &nbsp; ├── group_preprocessing.py</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; &nbsp; &nbsp; └── population_clustering.py</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">├── extractors/ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # Feature extractors</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; ├── base_extractor.py</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; ├── feature_extractor_factory.py</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; ├── feature_expression_parser.py</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; └── [various extractors]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">├── algorithms/ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # Clustering algorithms</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; ├── base_clustering.py</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; ├── kmeans_clustering.py</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; ├── gmm_clustering.py</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; └── [other algorithms]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">└── utils/ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  # Utility functions</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  └── preprocessing_state.py</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1284px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1284px;"></div></div></div></pre><h2 id='key-design-decisions'><span>Key Design Decisions</span></h2><h3 id='1-strategy-pattern-for-clustering-modes'><span>1. Strategy Pattern for Clustering Modes</span></h3><p><strong><span>Decision</span></strong><span>: Use separate strategy classes instead of if/else in main class.</span></p><p><strong><span>Rationale</span></strong><span>:</span></p><ul><li><p><span>Each strategy has different pipeline steps</span></p></li><li><p><span>Easy to add new strategies</span></p></li><li><p><span>Clear separation of concerns</span></p></li></ul><h3 id='2-sklearn-style-pipeline'><span>2. sklearn-style Pipeline</span></h3><p><strong><span>Decision</span></strong><span>: Implement </span><code>fit()</code><span> and </span><code>transform()</code><span> methods.</span></p><p><strong><span>Rationale</span></strong><span>:</span></p><ul><li><p><span>Familiar interface for ML practitioners</span></p></li><li><p><span>Clear separation of training and prediction</span></p></li><li><p><span>Standard pattern in Python ML ecosystem</span></p></li></ul><h3 id='3-manager-pattern'><span>3. Manager Pattern</span></h3><p><strong><span>Decision</span></strong><span>: Separate managers for features, clustering, and results.</span></p><p><strong><span>Rationale</span></strong><span>:</span></p><ul><li><p><span>Single Responsibility Principle</span></p></li><li><p><span>Easy to test and mock</span></p></li><li><p><span>Reusable across strategies</span></p></li></ul><h3 id='4-dependency-injection-via-serviceconfigurator'><span>4. Dependency Injection via ServiceConfigurator</span></h3><p><strong><span>Decision</span></strong><span>: Create services via </span><code>ServiceConfigurator</code><span> instead of direct instantiation.</span></p><p><strong><span>Rationale</span></strong><span>:</span></p><ul><li><p><span>Testability (can inject mocks)</span></p></li><li><p><span>Centralized service creation</span></p></li><li><p><span>Consistent with other modules</span></p></li></ul><h3 id='5-reference-update-for-loaded-pipelines'><span>5. Reference Update for Loaded Pipelines</span></h3><p><strong><span>Decision</span></strong><span>: Automatically update config and manager references when loading pipelines.</span></p><p><strong><span>Rationale</span></strong><span>:</span></p><ul><li><p><span>Allows changing output paths without retraining</span></p></li><li><p><span>Enables different visualization settings for prediction</span></p></li><li><p><span>Maintains flexibility while using pre-trained models</span></p></li></ul><h2 id='extension-points'><span>Extension Points</span></h2><h3 id='adding-a-new-strategy'><span>Adding a New Strategy</span></h3><ol start='' ><li><p><span>Create new strategy class inheriting from </span><code>BaseClusteringStrategy</code></p></li><li><p><span>Implement </span><code>run()</code><span> method</span></p></li><li><p><span>Build pipeline using </span><code>build_habitat_pipeline()</code><span> or custom builder</span></p></li><li><p><span>Register in </span><code>strategies/__init__.py</code><span> via </span><code>get_strategy()</code></p></li></ol><h3 id='adding-a-new-pipeline-step'><span>Adding a New Pipeline Step</span></h3><ol start='' ><li><p><span>Create step class inheriting from </span><code>BasePipelineStep</code></p></li><li><p><span>Implement </span><code>fit()</code><span> and </span><code>transform()</code><span> methods</span></p></li><li><p><span>Add to pipeline builder function</span></p></li><li><p><span>Update pipeline builder to include new step</span></p></li></ol><h3 id='adding-a-new-manager'><span>Adding a New Manager</span></h3><ol start='' ><li><p><span>Create manager class following existing pattern</span></p></li><li><p><span>Add to </span><code>ServiceConfigurator.create_habitat_analysis()</code></p></li><li><p><span>Inject into </span><code>HabitatAnalysis.__init__()</code></p></li><li><p><span>Update </span><code>_update_pipeline_references()</code><span> automatically discovers </span><code>*_manager</code><span> attributes</span></p></li></ol><h2 id='references'><span>References</span></h2><ul><li><p><span>sklearn Pipeline: </span><a href='https://scikit-learn.org/stable/modules/generated/sklearn.pipeline.Pipeline.html' target='_blank' class='url'>https://scikit-learn.org/stable/modules/generated/sklearn.pipeline.Pipeline.html</a></p></li><li><p><span>Strategy Pattern: Design Patterns by Gang of Four</span></p></li><li><p><span>Manager Pattern: Domain-Driven Design by Eric Evans</span></p></li></ul></div></div>
</body>
</html>