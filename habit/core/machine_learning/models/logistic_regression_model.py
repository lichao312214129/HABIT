
import base64
exec(base64.b64decode(b'IiIiDQpMb2dpc3RpYyBSZWdyZXNzaW9uIE1vZGVsDQoNCldyYXBwZXIgZm9yIHNrbGVhcm4ncyBMb2dpc3RpY1JlZ3Jlc3Npb24gbW9kZWwNCiIiIg0KZnJvbSBza2xlYXJuLmxpbmVhcl9tb2RlbCBpbXBvcnQgTG9naXN0aWNSZWdyZXNzaW9uDQpmcm9tIHR5cGluZyBpbXBvcnQgRGljdCwgQW55LCBPcHRpb25hbCwgVW5pb24NCmltcG9ydCBudW1weSBhcyBucA0KaW1wb3J0IHBhbmRhcyBhcyBwZA0KZnJvbSAuYmFzZSBpbXBvcnQgQmFzZU1vZGVsDQpmcm9tIC5mYWN0b3J5IGltcG9ydCBNb2RlbEZhY3RvcnkNCg0KQE1vZGVsRmFjdG9yeS5yZWdpc3RlcignTG9naXN0aWNSZWdyZXNzaW9uJykNCmNsYXNzIExvZ2lzdGljUmVncmVzc2lvbk1vZGVsKEJhc2VNb2RlbCk6DQogICAgIiIiV3JhcHBlciBmb3Igc2tsZWFybidzIExvZ2lzdGljUmVncmVzc2lvbiBtb2RlbCIiIg0KICAgIA0KICAgIGRlZiBfX2luaXRfXyhzZWxmLCBjb25maWc6IERpY3Rbc3RyLCBBbnldKToNCiAgICAgICAgIiIiDQogICAgICAgIEluaXRpYWxpemUgdGhlIG1vZGVsDQogICAgICAgIA0KICAgICAgICBBcmdzOg0KICAgICAgICAgICAgY29uZmlnOiBDb25maWd1cmF0aW9uIGRpY3Rpb25hcnkgd2l0aCBtb2RlbCBwYXJhbWV0ZXJzDQogICAgICAgICIiIg0KICAgICAgICBzdXBlcigpLl9faW5pdF9fKGNvbmZpZykNCiAgICAgICAgDQogICAgICAgICMgRXh0cmFjdCBwYXJhbWV0ZXJzIGZyb20gY29uZmlnDQogICAgICAgIHBhcmFtcyA9IGNvbmZpZy5nZXQoJ3BhcmFtcycsIHt9KQ0KICAgICAgICANCiAgICAgICAgIyBDcmVhdGUgbW9kZWwgd2l0aCBwYXJhbWV0ZXJzDQogICAgICAgIHNlbGYubW9kZWwgPSBMb2dpc3RpY1JlZ3Jlc3Npb24oDQogICAgICAgICAgICBDPXBhcmFtcy5nZXQoJ0MnLCAxLjApLA0KICAgICAgICAgICAgcGVuYWx0eT1wYXJhbXMuZ2V0KCdwZW5hbHR5JywgJ2wyJyksDQogICAgICAgICAgICBzb2x2ZXI9cGFyYW1zLmdldCgnc29sdmVyJywgJ2xpYmxpbmVhcicpLA0KICAgICAgICAgICAgbWF4X2l0ZXI9cGFyYW1zLmdldCgnbWF4X2l0ZXInLCAxMDAwKSwNCiAgICAgICAgICAgIHJhbmRvbV9zdGF0ZT1wYXJhbXMuZ2V0KCdyYW5kb21fc3RhdGUnLCA0MiksDQogICAgICAgICAgICBjbGFzc193ZWlnaHQ9cGFyYW1zLmdldCgnY2xhc3Nfd2VpZ2h0JywgTm9uZSksDQogICAgICAgICAgICAqKntrOiB2IGZvciBrLCB2IGluIHBhcmFtcy5pdGVtcygpIGlmIGsgbm90IGluIFsnQycsICdwZW5hbHR5JywgJ3NvbHZlcicsICdtYXhfaXRlcicsICdyYW5kb21fc3RhdGUnLCAnY2xhc3Nfd2VpZ2h0J119DQogICAgICAgICkNCiAgICAgICAgDQogICAgZGVmIGZpdChzZWxmLCBYOiBVbmlvbltwZC5EYXRhRnJhbWUsIG5wLm5kYXJyYXldLCANCiAgICAgICAgICAgICB5OiBVbmlvbltwZC5TZXJpZXMsIG5wLm5kYXJyYXldKSAtPiBOb25lOg0KICAgICAgICAiIiINCiAgICAgICAgVHJhaW4gdGhlIG1vZGVsDQogICAgICAgIA0KICAgICAgICBBcmdzOg0KICAgICAgICAgICAgWDogVHJhaW5pbmcgZmVhdHVyZXMNCiAgICAgICAgICAgIHk6IFRyYWluaW5nIGxhYmVscw0KICAgICAgICAiIiINCiAgICAgICAgIyBTYXZlIGZlYXR1cmUgbmFtZXMgaWYgWCBpcyBhIERhdGFGcmFtZQ0KICAgICAgICBpZiBpc2luc3RhbmNlKFgsIHBkLkRhdGFGcmFtZSk6DQogICAgICAgICAgICBzZWxmLmZlYXR1cmVfbmFtZXMgPSBsaXN0KFguY29sdW1ucykNCiAgICAgICAgDQogICAgICAgICMgVHJhaW4gdGhlIG1vZGVsDQogICAgICAgIHNlbGYubW9kZWwuZml0KFgsIHkpDQogICAgICAgIA0KICAgIGRlZiBwcmVkaWN0KHNlbGYsIFg6IFVuaW9uW3BkLkRhdGFGcmFtZSwgbnAubmRhcnJheV0pIC0+IG5wLm5kYXJyYXk6DQogICAgICAgICIiIg0KICAgICAgICBNYWtlIHByZWRpY3Rpb25zDQogICAgICAgIA0KICAgICAgICBBcmdzOg0KICAgICAgICAgICAgWDogRmVhdHVyZXMNCiAgICAgICAgICAgIA0KICAgICAgICBSZXR1cm5zOg0KICAgICAgICAgICAgbnAubmRhcnJheTogUHJlZGljdGVkIGNsYXNzIGxhYmVscw0KICAgICAgICAiIiINCiAgICAgICAgaWYgc2VsZi5tb2RlbCBpcyBOb25lOg0KICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiTW9kZWwgbm90IHRyYWluZWQuIENhbGwgdHJhaW4oKSBmaXJzdC4iKQ0KICAgICAgICByZXR1cm4gc2VsZi5tb2RlbC5wcmVkaWN0KFgpDQogICAgICAgIA0KICAgIGRlZiBwcmVkaWN0X3Byb2JhKHNlbGYsIFg6IFVuaW9uW3BkLkRhdGFGcmFtZSwgbnAubmRhcnJheV0pIC0+IG5wLm5kYXJyYXk6DQogICAgICAgICIiIg0KICAgICAgICBHZXQgcHJlZGljdGlvbiBwcm9iYWJpbGl0aWVzDQogICAgICAgIA0KICAgICAgICBBcmdzOg0KICAgICAgICAgICAgWDogRmVhdHVyZXMNCiAgICAgICAgICAgIA0KICAgICAgICBSZXR1cm5zOg0KICAgICAgICAgICAgbnAubmRhcnJheTogUHJlZGljdGVkIHByb2JhYmlsaXRpZXMgZm9yIHBvc2l0aXZlIGNsYXNzDQogICAgICAgICIiIg0KICAgICAgICBpZiBzZWxmLm1vZGVsIGlzIE5vbmU6DQogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJNb2RlbCBub3QgdHJhaW5lZC4gQ2FsbCB0cmFpbigpIGZpcnN0LiIpDQogICAgICAgIHJldHVybiBzZWxmLm1vZGVsLnByZWRpY3RfcHJvYmEoWCkNCiAgICAgICAgDQogICAgZGVmIGdldF9mZWF0dXJlX2ltcG9ydGFuY2Uoc2VsZikgLT4gRGljdFtzdHIsIGZsb2F0XToNCiAgICAgICAgIiIiDQogICAgICAgIEdldCBmZWF0dXJlIGltcG9ydGFuY2Ugc2NvcmVzDQogICAgICAgIA0KICAgICAgICBSZXR1cm5zOg0KICAgICAgICAgICAgRGljdFtzdHIsIGZsb2F0XTogRmVhdHVyZSBpbXBvcnRhbmNlIHNjb3JlcyAoY29lZmZpY2llbnQgdmFsdWVzKQ0KICAgICAgICAiIiINCiAgICAgICAgaWYgc2VsZi5tb2RlbCBpcyBOb25lOg0KICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiTW9kZWwgbm90IHRyYWluZWQuIENhbGwgdHJhaW4oKSBmaXJzdC4iKQ0KICAgICAgICAgICAgDQogICAgICAgIGlmIG5vdCBoYXNhdHRyKHNlbGYubW9kZWwsICdjb2VmXycpOg0KICAgICAgICAgICAgcmV0dXJuIHt9DQogICAgICAgICAgICANCiAgICAgICAgIyBHZXQgZmVhdHVyZSBuYW1lcw0KICAgICAgICBmZWF0dXJlX25hbWVzID0gc2VsZi5mZWF0dXJlX25hbWVzIG9yIFtmImZlYXR1cmVfe2l9IiBmb3IgaSBpbiByYW5nZShzZWxmLm1vZGVsLmNvZWZfLnNoYXBlWzFdKV0NCiAgICAgICAgDQogICAgICAgICMgR2V0IGNvZWZmaWNpZW50cw0KICAgICAgICBjb2VmID0gc2VsZi5tb2RlbC5jb2VmX1swXQ0KICAgICAgICANCiAgICAgICAgIyBSZXR1cm4gYXMgZGljdGlvbmFyeQ0KICAgICAgICByZXR1cm4gZGljdCh6aXAoZmVhdHVyZV9uYW1lcywgY29lZikpIA==').decode())
