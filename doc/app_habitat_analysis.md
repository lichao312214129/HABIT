# Habitat Analysis ä½¿ç”¨æŒ‡å—

## æ¦‚è¿°

Habitat Analysis æ¨¡å—ç”¨äºè¯†åˆ«å’Œè¡¨å¾è‚¿ç˜¤å†…éƒ¨å…·æœ‰ä¸åŒå½±åƒè¡¨å‹çš„äºšåŒºåŸŸï¼ˆ"ç”Ÿå¢ƒ"ï¼‰ã€‚è¯¥æ¨¡å—æ”¯æŒä¸¤ç§èšç±»ç­–ç•¥ï¼š

### ğŸ¯ èšç±»æ¨¡å¼å¯¹æ¯”

| ç‰¹æ€§ | ä¸€æ­¥æ³• (One-Step) | äºŒæ­¥æ³• (Two-Step) |
|------|------------------|------------------|
| **èšç±»æµç¨‹** | ç›´æ¥ä»ä½“ç´ èšç±»åˆ°ç”Ÿå¢ƒ | å…ˆèšç±»åˆ°supervoxelsï¼Œå†èšç±»åˆ°habitats |
| **èšç±»å±‚çº§** | å•å±‚çº§ï¼ˆä¸ªä½“æ°´å¹³ï¼‰ | åŒå±‚çº§ï¼ˆä¸ªä½“+ç¾¤ä½“æ°´å¹³ï¼‰ |
| **èšç±»æ•°ç›®** | æ¯ä¸ªè‚¿ç˜¤è‡ªåŠ¨ç¡®å®šæœ€ä¼˜æ•°ç›® | supervoxelsæ•°ç›®å›ºå®šï¼Œhabitatsæ•°ç›®å¯ä¼˜åŒ– |
| **ç”Ÿå¢ƒæ ‡ç­¾** | æ¯ä¸ªæ‚£è€…çš„ç”Ÿå¢ƒæ ‡ç­¾ç‹¬ç«‹ | æ‰€æœ‰æ‚£è€…å…±äº«ç»Ÿä¸€çš„ç”Ÿå¢ƒæ ‡ç­¾ä½“ç³» |
| **è·¨æ‚£è€…æ¯”è¾ƒ** | éœ€è¦é¢å¤–çš„å¯¹åº”åˆ†æ | å¯ç›´æ¥æ¯”è¾ƒç›¸åŒç¼–å·çš„ç”Ÿå¢ƒ |
| **è®¡ç®—å¤æ‚åº¦** | è¾ƒä½ï¼ˆä»…ä¸ªä½“èšç±»ï¼‰ | è¾ƒé«˜ï¼ˆä¸ªä½“+ç¾¤ä½“ä¸¤æ¬¡èšç±»ï¼‰ |
| **é€‚ç”¨åœºæ™¯** | ä¸ªä½“å¼‚è´¨æ€§åˆ†æã€å°æ ·æœ¬ç ”ç©¶ | é˜Ÿåˆ—ç ”ç©¶ã€è·¨æ‚£è€…ç”Ÿå¢ƒæ¨¡å¼è¯†åˆ« |

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ä½¿ç”¨CLIï¼ˆæ¨èï¼‰

```bash
# äºŒæ­¥æ³•ï¼ˆé»˜è®¤ï¼‰
habit habitat --config config/config_getting_habitat.yaml

# ä¸€æ­¥æ³•
# å…ˆä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„ clustering_mode: one_step
habit habitat --config config/config_getting_habitat.yaml
```

### ä½¿ç”¨ä¼ ç»Ÿè„šæœ¬

```bash
python scripts/app_getting_habitat_map.py --config config/config_getting_habitat.yaml
```

---

## ğŸ“‹ é…ç½®æ–‡ä»¶è¯´æ˜

**ğŸ“– é…ç½®æ–‡ä»¶é“¾æ¥**ï¼š
- ğŸ“„ [å½“å‰é…ç½®æ–‡ä»¶](../config/config_getting_habitat.yaml) - å®é™…ä½¿ç”¨çš„ç²¾ç®€é…ç½®
- ğŸ“– [è¯¦ç»†æ³¨é‡Šæ¨¡æ¿](../config_templates/config_getting_habitat_annotated.yaml) - åŒ…å«å®Œæ•´è‹±æ–‡æ³¨é‡Šå’Œä½¿ç”¨è¯´æ˜

### å…³é”®é…ç½®é¡¹

```yaml
HabitatsSegmention:
  # èšç±»ç­–ç•¥é€‰æ‹©
  clustering_mode: two_step  # one_step æˆ– two_step
  
  # ç¬¬ä¸€æ­¥ï¼šä¸ªä½“æ°´å¹³èšç±»
  supervoxel:
    algorithm: kmeans  # èšç±»ç®—æ³•ï¼škmeans æˆ– gmm
    n_clusters: 50     # äºŒæ­¥æ³•çš„å›ºå®šèšç±»æ•°
    
    # ä¸€æ­¥æ³•ä¸“ç”¨è®¾ç½®
    one_step_settings:
      min_clusters: 2               # æœ€å°èšç±»æ•°
      max_clusters: 10              # æœ€å¤§èšç±»æ•°
      selection_method: silhouette  # è¯„ä¼°æ–¹æ³•
      plot_validation_curves: true  # æ˜¯å¦ç»˜åˆ¶éªŒè¯æ›²çº¿
  
  # ç¬¬äºŒæ­¥ï¼šç¾¤ä½“æ°´å¹³èšç±»ï¼ˆä»…åœ¨two_stepæ¨¡å¼ä½¿ç”¨ï¼‰
  habitat:
    mode: training  # training æˆ– testing
    algorithm: kmeans
    max_clusters: 10
    habitat_cluster_selection_method: inertia
    best_n_clusters: 4  # æŒ‡å®šèšç±»æ•°ï¼Œæˆ–è®¾ä¸ºnullè‡ªåŠ¨é€‰æ‹©
```

---

## ğŸ¨ ä¸€æ­¥æ³•è¯¦è§£

### å·¥ä½œåŸç†

1. **ä½“ç´ ç‰¹å¾æå–**: è®¡ç®—æ¯ä¸ªä½“ç´ çš„ç»„å­¦ç‰¹å¾
2. **ä¸ªä½“èšç±»**: å¯¹æ¯ä¸ªæ‚£è€…çš„è‚¿ç˜¤å•ç‹¬èšç±»
3. **è‡ªåŠ¨é€‰æ‹©èšç±»æ•°**: ä½¿ç”¨éªŒè¯æŒ‡æ ‡ï¼ˆå¦‚è½®å»“ç³»æ•°ï¼‰ç¡®å®šæœ€ä½³èšç±»æ•°
4. **ç”Ÿæˆä¸ªæ€§åŒ–ç”Ÿå¢ƒå›¾**: æ¯ä¸ªæ‚£è€…è·å¾—ç‹¬ç‰¹çš„ç”Ÿå¢ƒåˆ†å‰²

### èšç±»æ•°é€‰æ‹©æ–¹æ³•

| æ–¹æ³• | è¯´æ˜ | ä¼˜åŒ–æ–¹å‘ |
|------|------|---------|
| `silhouette` | è½®å»“ç³»æ•°ï¼Œè¡¡é‡èšç±»ç´§å¯†åº¦å’Œåˆ†ç¦»åº¦ | è¶Šå¤§è¶Šå¥½ |
| `calinski_harabasz` | æ–¹å·®æ¯”ç‡ï¼Œç±»é—´/ç±»å†…æ–¹å·® | è¶Šå¤§è¶Šå¥½ |
| `davies_bouldin` | ç°‡é—´å¹³å‡ç›¸ä¼¼åº¦ | è¶Šå°è¶Šå¥½ |
| `inertia` | ç°‡å†…å¹³æ–¹å’Œ | è¶Šå°è¶Šå¥½ |

### è¾“å‡ºæ–‡ä»¶

```
output_dir/
â”œâ”€â”€ {subject}_supervoxel.nrrd           # ç”Ÿå¢ƒåœ°å›¾ï¼ˆæ¯ä¸ªæ‚£è€…ï¼‰
â”œâ”€â”€ {subject}_validation_plots/         # éªŒè¯æ›²çº¿ï¼ˆå¦‚æœå¯ç”¨ï¼‰
â”‚   â””â”€â”€ {subject}_cluster_validation.png
â”œâ”€â”€ results_all_samples.csv             # æ‰€æœ‰æ‚£è€…çš„èšç±»ç»“æœ
â””â”€â”€ clustering_summary.csv              # èšç±»æ‘˜è¦ç»Ÿè®¡
```

### ç¤ºä¾‹é…ç½®ï¼ˆä¸€æ­¥æ³•ï¼‰

```yaml
HabitatsSegmention:
  clustering_mode: one_step
  
  supervoxel:
    algorithm: kmeans
    random_state: 42
    
    one_step_settings:
      min_clusters: 3              # æµ‹è¯•3-8ä¸ªèšç±»
      max_clusters: 8
      selection_method: silhouette  # ä½¿ç”¨è½®å»“ç³»æ•°
      plot_validation_curves: true  # ç»˜åˆ¶æ¯ä¸ªæ‚£è€…çš„éªŒè¯æ›²çº¿
```

---

## ğŸ“Š äºŒæ­¥æ³•è¯¦è§£

### å·¥ä½œåŸç†

1. **ä½“ç´ â†’è¶…ä½“ç´ **: æ¯ä¸ªæ‚£è€…çš„è‚¿ç˜¤èšç±»ä¸ºsupervoxels
2. **è¶…ä½“ç´ â†’ç”Ÿå¢ƒ**: è·¨æ‚£è€…èšç±»ï¼Œè¯†åˆ«å…±é€šçš„ç”Ÿå¢ƒæ¨¡å¼
3. **ç¾¤ä½“ä¸€è‡´æ€§**: æ‰€æœ‰æ‚£è€…ä½¿ç”¨ç›¸åŒçš„ç”Ÿå¢ƒå®šä¹‰

### ä¼˜åŠ¿

- âœ… è·¨æ‚£è€…å¯æ¯”è¾ƒæ€§
- âœ… è¯†åˆ«å…±é€šæ¨¡å¼
- âœ… é€‚åˆé˜Ÿåˆ—ç ”ç©¶
- âœ… ä¾¿äºç»Ÿè®¡åˆ†æ

### è¾“å‡ºæ–‡ä»¶

```
output_dir/
â”œâ”€â”€ {subject}_supervoxel.nrrd              # è¶…ä½“ç´ åœ°å›¾
â”œâ”€â”€ {subject}_habitat.nrrd                 # ç”Ÿå¢ƒåœ°å›¾
â”œâ”€â”€ mean_values_of_all_supervoxels_features.csv  # è¶…ä½“ç´ ç‰¹å¾å‡å€¼
â”œâ”€â”€ results_all_samples.csv                # æœ€ç»ˆç»“æœ
â”œâ”€â”€ supervoxel2habitat_clustering_model.pkl  # èšç±»æ¨¡å‹
â””â”€â”€ habitat_clustering_scores.png          # èšç±»è¯„ä¼°æ›²çº¿
```

### ç¤ºä¾‹é…ç½®ï¼ˆäºŒæ­¥æ³•ï¼‰

```yaml
HabitatsSegmention:
  clustering_mode: two_step
  
  supervoxel:
    algorithm: kmeans
    n_clusters: 50  # æ¯ä¸ªæ‚£è€…å›ºå®š50ä¸ªsupervoxels
    random_state: 42
  
  habitat:
    mode: training
    algorithm: kmeans
    max_clusters: 10
    habitat_cluster_selection_method: silhouette
    best_n_clusters: null  # è‡ªåŠ¨é€‰æ‹©
```

---

## ğŸ”§ é«˜çº§ç”¨æ³•

### ä½¿ç”¨é¢„è®­ç»ƒæ¨¡å‹ï¼ˆäºŒæ­¥æ³•ï¼‰

å¯¹äºæ–°çš„æµ‹è¯•æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ä¹‹å‰è®­ç»ƒçš„æ¨¡å‹ï¼š

```yaml
habitat:
  mode: testing  # åˆ‡æ¢åˆ°æµ‹è¯•æ¨¡å¼
  # æ¨¡å‹ä¼šè‡ªåŠ¨ä» out_dir/supervoxel2habitat_clustering_model.pkl åŠ è½½
```

### å¤šè¿›ç¨‹åŠ é€Ÿ

```yaml
processes: 4  # ä½¿ç”¨4ä¸ªè¿›ç¨‹å¹¶è¡Œå¤„ç†
```

### è‡ªå®šä¹‰ç‰¹å¾æå– (Custom Feature Extraction)

`HABIT` æä¾›äº†ä¸€ä¸ªçµæ´»çš„ç‰¹å¾æå–æ¡†æ¶ï¼Œå…è®¸æ‚¨åœ¨ä½“ç´ ï¼ˆVoxelï¼‰å±‚é¢ç»„åˆä½¿ç”¨å¤šç§ç‰¹å¾ï¼Œç”¨äºåç»­çš„ç”Ÿå¢ƒï¼ˆHabitatï¼‰èšç±»åˆ†æã€‚æ‰€æœ‰ç‰¹å¾ç›¸å…³çš„é…ç½®éƒ½åœ¨é…ç½®æ–‡ä»¶çš„ `FeatureConstruction` éƒ¨åˆ†å®Œæˆã€‚

### è¯­æ³•ç®€ä»‹

ç‰¹å¾æå–çš„è¯­æ³•è¢«è®¾è®¡ä¸ºä¸€ç§è¡¨è¾¾å¼ï¼Œæ ¼å¼ä¸º `method(arguments)`ã€‚

- **å•ç‰¹å¾**: ç›´æ¥ä½¿ç”¨ä¸€ç§æ–¹æ³•ï¼Œå¦‚ `raw(pre_contrast)`ã€‚
- **å¤šç‰¹å¾ç»„åˆ**: å°†å¤šç§ç‰¹å¾ä½œä¸ºå¦ä¸€ä¸ªç‰¹å¾æå–å™¨ï¼ˆå¦‚ `concat`ï¼‰çš„è¾“å…¥ï¼Œä¾‹å¦‚ `concat(raw(pre_contrast), gabor(pre_contrast))`ã€‚
- **è·¨æ¨¡æ€ç‰¹å¾**: ä¸€äº›ç‰¹å¾æå–å™¨ï¼ˆå¦‚ `kinetic`ï¼‰å¯ä»¥æ¥å—å¤šä¸ªä¸åŒæ¨¡æ€çš„å›¾åƒä½œä¸ºè¾“å…¥ã€‚

æ‰€æœ‰åœ¨æ–¹æ³•ä¸­ä½¿ç”¨çš„å‚æ•°ï¼ˆå¦‚ `timestamps` æˆ– `params_file`ï¼‰éƒ½å¿…é¡»åœ¨ `params` å­—æ®µä¸­å®šä¹‰ã€‚

### ä½“ç´ çº§ç‰¹å¾ (`voxel_level`)

è¿™æ˜¯ç”Ÿå¢ƒåˆ†æçš„ç¬¬ä¸€æ­¥ï¼Œç”¨äºä»åŸå§‹å›¾åƒä¸­ä¸ºæ¯ä¸ªä½“ç´ æå–ä¸€ä¸ªæˆ–å¤šä¸ªç‰¹å¾å€¼ï¼Œå½¢æˆç‰¹å¾å‘é‡ã€‚

ä»¥ä¸‹æ˜¯æ‰€æœ‰å¯ç”¨çš„ä½“ç´ çº§ç‰¹å¾æå–æ–¹æ³•ï¼š

| æ–¹æ³• (`method`) | åŠŸèƒ½æè¿° | ä¸»è¦å‚æ•° |
| :--- | :--- | :--- |
| `raw` | **åŸå§‹å¼ºåº¦ (Raw Intensity)**<br>ç›´æ¥æå–æ¯ä¸ªä½“ç´ åœ¨æŒ‡å®šå›¾åƒä¸­çš„åŸå§‹ä¿¡å·å¼ºåº¦å€¼ã€‚è¿™æ˜¯æœ€åŸºç¡€ã€æœ€ç›´æ¥çš„ç‰¹å¾ã€‚ | æ—  |
| `kinetic` | **åŠ¨åŠ›å­¦ç‰¹å¾ (Kinetic Features)**<br>ä»ä¸€ä¸ªæ—¶é—´åºåˆ—çš„å›¾åƒï¼ˆå¦‚å¤šæœŸç›¸å¢å¼ºæ‰«æï¼‰ä¸­è®¡ç®—åŠ¨åŠ›å­¦ç‰¹å¾ï¼Œä¾‹å¦‚çŒæ³¨é€Ÿç‡ï¼ˆwash-in/wash-out slopeï¼‰ã€‚ | `timestamps`: ä¸€ä¸ªæŒ‡å‘ `.xlsx` æ–‡ä»¶çš„è·¯å¾„ã€‚è¯¥æ–‡ä»¶éœ€åŒ…å«æ¯ä¸ªå—è¯•è€… (subject) å¯¹åº”çš„å¤šæœŸç›¸æ‰«æçš„æ—¶é—´ç‚¹ã€‚ |
| `voxel_radiomics` | **ä½“ç´ çº§ç»„å­¦ (Voxel-level Radiomics)**<br>ä½¿ç”¨ PyRadiomics åœ¨æ¯ä¸ªä½“ç´ çš„å±€éƒ¨é‚»åŸŸå†…è®¡ç®—å½±åƒç»„å­¦ç‰¹å¾ã€‚å¯æå–çº¹ç†ï¼ˆå¦‚GLCM, Gaborï¼‰ã€å¼ºåº¦åˆ†å¸ƒç­‰å¤šç§é«˜çº§ç‰¹å¾ã€‚ | `params_file`: æŒ‡å‘ä¸€ä¸ª PyRadiomics çš„ `.yaml` å‚æ•°æ–‡ä»¶ï¼Œç”¨äºç²¾ç¡®æ§åˆ¶è¦æå–çš„ç‰¹å¾ç±»åˆ«ã€æ»¤æ³¢å™¨åŠç›¸å…³è®¾ç½®ã€‚ |
| `local_entropy` | **å±€éƒ¨ç†µ (Local Entropy)**<br>è®¡ç®—æ¯ä¸ªä½“ç´ é‚»åŸŸå†…çš„å±€éƒ¨ä¿¡æ¯ç†µã€‚è¿™æ˜¯ä¸€ä¸ªè¡¡é‡å±€éƒ¨åŒºåŸŸçº¹ç†å¤æ‚åº¦å’Œéšæœºæ€§çš„æŒ‡æ ‡ã€‚ | `kernel_size`: (å¯é€‰, é»˜è®¤å€¼: 3) å®šä¹‰è®¡ç®—ç†µçš„é‚»åŸŸå¤§å°ï¼Œå¦‚ `3` ä»£è¡¨ 3x3x3 çš„ç«‹æ–¹ä½“ã€‚<br>`bins`: (å¯é€‰, é»˜è®¤å€¼: 32) è®¡ç®—ç›´æ–¹å›¾æ—¶çš„åˆ†ç®±æ•°ã€‚ |

---

### ç¤ºä¾‹é…ç½®

ä¸‹é¢æ˜¯ä¸€äº›å…·ä½“çš„ `yaml` é…ç½®ç¤ºä¾‹ï¼Œå±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨è¿™äº›æ–¹æ³•ã€‚

#### ç¤ºä¾‹ 1: ä½¿ç”¨å•ä¸€åŸå§‹å›¾åƒå¼ºåº¦

è¿™æ˜¯æœ€ç®€å•çš„é…ç½®ï¼Œä»…ä½¿ç”¨ `pre_contrast` å›¾åƒçš„åŸå§‹åƒç´ å€¼ä½œä¸ºç‰¹å¾ã€‚

```yaml
FeatureConstruction:
  voxel_level:
    method: 'raw(pre_contrast)'
    image_names: ['pre_contrast']
    params: {}
```

#### ç¤ºä¾‹ 2: ç»„åˆä½¿ç”¨å¤šç§åŸå§‹å›¾åƒå¼ºåº¦

æ‚¨å¯ä»¥å°†å¤šä¸ªæ¨¡æ€çš„åŸå§‹å¼ºåº¦å€¼æ‹¼æ¥æˆä¸€ä¸ªç‰¹å¾å‘é‡ã€‚è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ `concat` æ–¹æ³•æ¥ç»„åˆä¸‰ä¸ªä¸åŒæœŸç›¸çš„å›¾åƒã€‚

```yaml
FeatureConstruction:
  voxel_level:
    method: 'concat(raw(pre_contrast), raw(LAP), raw(PVP))'
    image_names: ['pre_contrast', 'LAP', 'PVP']
    params: {}
```

#### ç¤ºä¾‹ 3: è®¡ç®—åŠ¨åŠ›å­¦ç‰¹å¾

ä½¿ç”¨ `kinetic` æ–¹æ³•éœ€è¦æä¾›ä¸€ä¸ª `timestamps` æ–‡ä»¶ã€‚è¯¥æ–¹æ³•ä¼šè‡ªåŠ¨å¤„ç† `raw()` åŒ…è£…çš„å¤šä¸ªå›¾åƒã€‚

```yaml
FeatureConstruction:
  voxel_level:
    method: 'kinetic(raw(pre_contrast), raw(LAP), raw(PVP), raw(delay_3min), timestamps)'
    image_names: ['pre_contrast', 'LAP', 'PVP', 'delay_3min']
    params:
      timestamps: './config/scan_times.xlsx' # æŒ‡å‘æ‚¨çš„æ—¶é—´æˆ³æ–‡ä»¶
```

#### ç¤ºä¾‹ 4: æå–ä½“ç´ çº§ç»„å­¦ç‰¹å¾

ä½¿ç”¨ `voxel_radiomics` éœ€è¦æä¾›ä¸€ä¸ª PyRadiomics å‚æ•°æ–‡ä»¶ã€‚

```yaml
FeatureConstruction:
  voxel_level:
    method: 'voxel_radiomics(pre_contrast, radiomics_params)'
    image_names: ['pre_contrast']
    params:
      radiomics_params: './config/radiomics_params.yaml' # æŒ‡å‘æ‚¨çš„ç»„å­¦å‚æ•°æ–‡ä»¶
```

#### ç¤ºä¾‹ 5: æå–å±€éƒ¨ç†µç‰¹å¾

ä½¿ç”¨ `local_entropy` å¹¶è‡ªå®šä¹‰é‚»åŸŸå¤§å°å’Œåˆ†ç®±æ•°ã€‚

```yaml
FeatureConstruction:
  voxel_level:
    method: 'local_entropy(pre_contrast, kernel_size, bins)'
    image_names: ['pre_contrast']
    params:
      kernel_size: 5
      bins: 64
```

---

## ğŸ¯ ä½¿ç”¨å»ºè®®

### é€‰æ‹©ä¸€æ­¥æ³•å½“...

âœ… å…³æ³¨ä¸ªä½“è‚¿ç˜¤çš„å¼‚è´¨æ€§  
âœ… ä¸éœ€è¦è·¨æ‚£è€…æ¯”è¾ƒ  
âœ… æ¯ä¸ªæ‚£è€…æ ·æœ¬é‡å……è¶³ï¼ˆè¶³å¤Ÿä½“ç´ æ•°ï¼‰  
âœ… æ¢ç´¢æ€§ç ”ç©¶ï¼Œäº†è§£ä¸ªä½“å·®å¼‚  

### é€‰æ‹©äºŒæ­¥æ³•å½“...

âœ… éœ€è¦è·¨æ‚£è€…ç»Ÿè®¡åˆ†æ  
âœ… è¯†åˆ«ç¾¤ä½“å…±é€šçš„ç”Ÿå¢ƒç±»å‹  
âœ… å»ºç«‹å¯å¤ç”¨çš„ç”Ÿå¢ƒæ¨¡å‹  
âœ… è¿›è¡Œé˜Ÿåˆ—ç ”ç©¶æˆ–ä¸´åºŠé¢„æµ‹  

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: ä¸€æ­¥æ³•ä¸­æ¯ä¸ªæ‚£è€…çš„èšç±»æ•°éƒ½ä¸åŒï¼Œå¦‚ä½•æ¯”è¾ƒï¼Ÿ

**A**: ä¸€æ­¥æ³•å…³æ³¨çš„æ˜¯ä¸ªä½“å†…çš„å¼‚è´¨æ€§ï¼Œä¸æ˜¯è·¨ä¸ªä½“æ¯”è¾ƒã€‚å¦‚æœéœ€è¦æ¯”è¾ƒï¼Œåº”è¯¥ï¼š
- æ¯”è¾ƒèšç±»æ•°é‡ï¼ˆä½œä¸ºå¼‚è´¨æ€§æŒ‡æ ‡ï¼‰
- æå–æ¯ä¸ªç”Ÿå¢ƒçš„ç‰¹å¾è¿›è¡Œç»Ÿè®¡
- ä½¿ç”¨äºŒæ­¥æ³•è·å¾—ç»Ÿä¸€çš„ç”Ÿå¢ƒå®šä¹‰

### Q2: å¦‚ä½•é€‰æ‹©åˆé€‚çš„èšç±»æ•°èŒƒå›´ï¼Ÿ

**A**: å»ºè®®ï¼š
- æœ€å°å€¼ï¼š2-3ï¼ˆè‡³å°‘è¦æœ‰æ˜æ˜¾åˆ†ç±»ï¼‰
- æœ€å¤§å€¼ï¼š10-15ï¼ˆé¿å…è¿‡åº¦åˆ†å‰²ï¼‰
- è€ƒè™‘è‚¿ç˜¤å¤§å°ï¼ˆå°è‚¿ç˜¤ç”¨è¾ƒå°‘èšç±»æ•°ï¼‰

### Q3: éªŒè¯æ›²çº¿çœ‹èµ·æ¥ä¸ç¨³å®šæ€ä¹ˆåŠï¼Ÿ

**A**: å¯èƒ½åŸå› ï¼š
- æ ·æœ¬é‡ä¸è¶³ï¼ˆä½“ç´ å¤ªå°‘ï¼‰
- ç‰¹å¾é€‰æ‹©ä¸åˆé€‚
- å°è¯•ä¸åŒçš„validation method
- å¢åŠ èšç±»ç®—æ³•çš„ `n_init` å‚æ•°

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [ç‰¹å¾æå–é…ç½®](./app_extracting_habitat_features.md)
- [ICCå¯é‡å¤æ€§åˆ†æ](./app_icc_analysis.md)
- [CLIä½¿ç”¨æŒ‡å—](../HABIT_CLI.md)

---

## ğŸ“– å‚è€ƒæ–‡çŒ®

**äºŒæ­¥æ³•ï¼ˆç»å…¸Habitatæ–¹æ³•ï¼‰**:
- Wu J, et al. "Intratumoral spatial heterogeneity at perfusion MR imaging predicts recurrence-free survival in locally advanced breast cancer treated with neoadjuvant chemotherapy." Radiology, 2018.

**ä¸€æ­¥æ³•ï¼ˆä¸ªæ€§åŒ–åˆ†æï¼‰**:
- Nomogram for Predicting Neoadjuvant Chemotherapy  Response in Breast Cancer Using MRI-based Intratumoral  Heterogeneity Quantification

---

*æœ€åæ›´æ–°: 2025-10-19*

