
import base64
exec(base64.b64decode(b'IiIiDQpMb2dnaW5nIHV0aWxpdHkgbW9kdWxlIGZvciBIQUJJVA0KIiIiDQoNCmltcG9ydCBvcw0KaW1wb3J0IGxvZ2dpbmcNCmZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGV0aW1lDQpmcm9tIHR5cGluZyBpbXBvcnQgT3B0aW9uYWwNCg0KY2xhc3MgSEFCSVRMb2dnZXI6DQogICAgIiIiDQogICAgQ3VzdG9tIGxvZ2dlciBmb3IgSEFCSVQgcHJvamVjdA0KICAgICIiIg0KICAgIGRlZiBfX2luaXRfXyhzZWxmLCBvdXRfZGlyOiBzdHIsIG5hbWU6IHN0ciA9ICJIQUJJVCIpOg0KICAgICAgICAiIiINCiAgICAgICAgSW5pdGlhbGl6ZSBsb2dnZXINCg0KICAgICAgICBBcmdzOg0KICAgICAgICAgICAgb3V0X2RpciAoc3RyKTogT3V0cHV0IGRpcmVjdG9yeSBmb3IgbG9nIGZpbGVzDQogICAgICAgICAgICBuYW1lIChzdHIpOiBMb2dnZXIgbmFtZQ0KICAgICAgICAiIiINCiAgICAgICAgc2VsZi5sb2dnZXIgPSBsb2dnaW5nLmdldExvZ2dlcihuYW1lKQ0KICAgICAgICBzZWxmLmxvZ2dlci5zZXRMZXZlbChsb2dnaW5nLklORk8pDQoNCiAgICAgICAgIyBDcmVhdGUgbG9ncyBkaXJlY3RvcnkgaWYgaXQgZG9lc24ndCBleGlzdA0KICAgICAgICBsb2dfZGlyID0gb3MucGF0aC5qb2luKG91dF9kaXIsICJsb2dzIikNCiAgICAgICAgb3MubWFrZWRpcnMobG9nX2RpciwgZXhpc3Rfb2s9VHJ1ZSkNCg0KICAgICAgICAjIENyZWF0ZSBmaWxlIGhhbmRsZXIgd2l0aCBVVEYtOCBlbmNvZGluZw0KICAgICAgICB0aW1lc3RhbXAgPSBkYXRldGltZS5ub3coKS5zdHJmdGltZSgiJVklbSVkXyVIJU0lUyIpDQogICAgICAgIGxvZ19maWxlID0gb3MucGF0aC5qb2luKGxvZ19kaXIsIGYiaGFiaXRfe3RpbWVzdGFtcH0ubG9nIikNCiAgICAgICAgZmlsZV9oYW5kbGVyID0gbG9nZ2luZy5GaWxlSGFuZGxlcihsb2dfZmlsZSwgZW5jb2Rpbmc9J3V0Zi04JykNCiAgICAgICAgZmlsZV9oYW5kbGVyLnNldExldmVsKGxvZ2dpbmcuSU5GTykNCg0KICAgICAgICAjIENyZWF0ZSBjb25zb2xlIGhhbmRsZXINCiAgICAgICAgY29uc29sZV9oYW5kbGVyID0gbG9nZ2luZy5TdHJlYW1IYW5kbGVyKCkNCiAgICAgICAgY29uc29sZV9oYW5kbGVyLnNldExldmVsKGxvZ2dpbmcuSU5GTykNCg0KICAgICAgICAjIENyZWF0ZSBmb3JtYXR0ZXINCiAgICAgICAgZm9ybWF0dGVyID0gbG9nZ2luZy5Gb3JtYXR0ZXIoJyUoYXNjdGltZSlzIC0gJShuYW1lKXMgLSAlKGxldmVsbmFtZSlzIC0gJShtZXNzYWdlKXMnKQ0KICAgICAgICBmaWxlX2hhbmRsZXIuc2V0Rm9ybWF0dGVyKGZvcm1hdHRlcikNCiAgICAgICAgY29uc29sZV9oYW5kbGVyLnNldEZvcm1hdHRlcihmb3JtYXR0ZXIpDQoNCiAgICAgICAgIyBBZGQgaGFuZGxlcnMgdG8gbG9nZ2VyDQogICAgICAgIHNlbGYubG9nZ2VyLmFkZEhhbmRsZXIoZmlsZV9oYW5kbGVyKQ0KICAgICAgICBzZWxmLmxvZ2dlci5hZGRIYW5kbGVyKGNvbnNvbGVfaGFuZGxlcikNCg0KICAgIGRlZiBpbmZvKHNlbGYsIG1lc3NhZ2U6IHN0cik6DQogICAgICAgICIiIkxvZyBpbmZvIG1lc3NhZ2UiIiINCiAgICAgICAgc2VsZi5sb2dnZXIuaW5mbyhtZXNzYWdlKQ0KDQogICAgZGVmIHdhcm5pbmcoc2VsZiwgbWVzc2FnZTogc3RyKToNCiAgICAgICAgIiIiTG9nIHdhcm5pbmcgbWVzc2FnZSIiIg0KICAgICAgICBzZWxmLmxvZ2dlci53YXJuaW5nKG1lc3NhZ2UpDQoNCiAgICBkZWYgZXJyb3Ioc2VsZiwgbWVzc2FnZTogc3RyKToNCiAgICAgICAgIiIiTG9nIGVycm9yIG1lc3NhZ2UiIiINCiAgICAgICAgc2VsZi5sb2dnZXIuZXJyb3IobWVzc2FnZSkNCg0KICAgIGRlZiBkZWJ1ZyhzZWxmLCBtZXNzYWdlOiBzdHIpOg0KICAgICAgICAiIiJMb2cgZGVidWcgbWVzc2FnZSIiIg0KICAgICAgICBzZWxmLmxvZ2dlci5kZWJ1ZyhtZXNzYWdlKQ0KDQpkZWYgZ2V0X2xvZ2dlcihvdXRfZGlyOiBzdHIsIG5hbWU6IE9wdGlvbmFsW3N0cl0gPSBOb25lKSAtPiBIQUJJVExvZ2dlcjoNCiAgICAiIiINCiAgICBHZXQgb3IgY3JlYXRlIGEgbG9nZ2VyIGluc3RhbmNlDQoNCiAgICBBcmdzOg0KICAgICAgICBvdXRfZGlyIChzdHIpOiBPdXRwdXQgZGlyZWN0b3J5IGZvciBsb2cgZmlsZXMNCiAgICAgICAgbmFtZSAoc3RyLCBvcHRpb25hbCk6IExvZ2dlciBuYW1lLiBJZiBOb25lLCB1c2VzIGRlZmF1bHQgbmFtZSAiSEFCSVQiDQoNCiAgICBSZXR1cm5zOg0KICAgICAgICBIQUJJVExvZ2dlcjogTG9nZ2VyIGluc3RhbmNlDQogICAgIiIiDQogICAgcmV0dXJuIEhBQklUTG9nZ2VyKG91dF9kaXIsIG5hbWUgb3IgIkhBQklUIikg').decode())
