
import base64
exec(base64.b64decode(b'IiIiCk1vZGVsIEV2YWx1YXRpb24gTW9kdWxlClByb3ZpZGVzIGZ1bmN0aW9ucyBmb3IgbW9kZWwgdHJhaW5pbmcsIGV2YWx1YXRpb24sIGFuZCByZXN1bHQgYW5hbHlzaXMKIiIiCgppbXBvcnQgb3MKaW1wb3J0IGpzb24KZnJvbSB0eXBpbmcgaW1wb3J0IERpY3QsIExpc3QsIFR1cGxlLCBVbmlvbiwgQW55LCBPcHRpb25hbCwgTGl0ZXJhbAppbXBvcnQgbnVtcHkgYXMgbnAKaW1wb3J0IHBhbmRhcyBhcyBwZAppbXBvcnQgbWF0cGxvdGxpYi5weXBsb3QgYXMgcGx0CmZyb20gc2tsZWFybi5tZXRyaWNzIGltcG9ydCByb2NfY3VydmUsIHByZWNpc2lvbl9yZWNhbGxfY3VydmUKZnJvbSBza2xlYXJuLmNhbGlicmF0aW9uIGltcG9ydCBjYWxpYnJhdGlvbl9jdXJ2ZQoKZnJvbSAubWV0cmljcyBpbXBvcnQgY2FsY3VsYXRlX21ldHJpY3MsIGNhbGN1bGF0ZV9tZXRyaWNzX3lvdWRlbiwgc3BpZWdlbGhhbHRlcl96X3Rlc3QsIGRlbG9uZ19yb2NfY2kKZnJvbSAuLnZpc3VhbGl6YXRpb24ucGxvdHRpbmcgaW1wb3J0IFBsb3R0ZXIKZnJvbSAuLnN0YXRpc3RpY3MuZGVsb25nX3Rlc3QgaW1wb3J0IGRlbG9uZ19yb2NfdGVzdCwgZGVsb25nX3JvY19jaQoKY2xhc3MgTW9kZWxFdmFsdWF0b3I6CiAgICBkZWYgX19pbml0X18oc2VsZiwgb3V0cHV0X2Rpcjogc3RyKToKICAgICAgICAiIiIKICAgICAgICBJbml0aWFsaXplIHRoZSBtb2RlbCBldmFsdWF0b3IuCiAgICAgICAgCiAgICAgICAgQXJnczoKICAgICAgICAgICAgb3V0cHV0X2RpciAoc3RyKTogRGlyZWN0b3J5IHdoZXJlIGV2YWx1YXRpb24gcmVzdWx0cyBhbmQgcGxvdHMgd2lsbCBiZSBzYXZlZAogICAgICAgICIiIgogICAgICAgIHNlbGYub3V0cHV0X2RpciA9IG91dHB1dF9kaXIKICAgICAgICBzZWxmLnBsb3R0ZXIgPSBQbG90dGVyKHNlbGYub3V0cHV0X2RpcikKICAgIAogICAgZGVmIGV2YWx1YXRlKHNlbGYsIG1vZGVsOiBBbnksIFg6IHBkLkRhdGFGcmFtZSwgeTogcGQuU2VyaWVzLCAKICAgICAgICAgICAgICAgIGRhdGFzZXRfbmFtZTogc3RyID0gInRlc3QiKSAtPiBEaWN0W3N0ciwgQW55XToKICAgICAgICAiIiIKICAgICAgICBFdmFsdWF0ZSBhIHNpbmdsZSBtb2RlbCBvbiBhIHNpbmdsZSBkYXRhc2V0LgogICAgICAgIAogICAgICAgIEFyZ3M6CiAgICAgICAgICAgIG1vZGVsIChBbnkpOiBUcmFpbmVkIG1vZGVsIHdpdGggcHJlZGljdCBhbmQgcHJlZGljdF9wcm9iYSBtZXRob2RzCiAgICAgICAgICAgIFggKHBkLkRhdGFGcmFtZSk6IEZlYXR1cmUgZGF0YQogICAgICAgICAgICB5IChwZC5TZXJpZXMpOiBMYWJlbCBkYXRhCiAgICAgICAgICAgIGRhdGFzZXRfbmFtZSAoc3RyKTogTmFtZSBvZiB0aGUgZGF0YXNldAogICAgICAgICAgICAKICAgICAgICBSZXR1cm5zOgogICAgICAgICAgICBEaWN0W3N0ciwgQW55XTogRGljdGlvbmFyeSBjb250YWluaW5nIGV2YWx1YXRpb24gcmVzdWx0cwogICAgICAgICIiIgogICAgICAgICMgUHJlZGljdGlvbgogICAgICAgIHlfcHJlZCA9IG1vZGVsLnByZWRpY3QoWCkKICAgICAgICB5X3ByZWRfcHJvYmEgPSBtb2RlbC5wcmVkaWN0X3Byb2JhKFgpCiAgICAgICAgCiAgICAgICAgIyBIYW5kbGUgcG90ZW50aWFsIDJEIHByb2JhYmlsaXR5IHJlc3VsdHMKICAgICAgICBpZiBpc2luc3RhbmNlKHlfcHJlZF9wcm9iYSwgbnAubmRhcnJheSkgYW5kIHlfcHJlZF9wcm9iYS5uZGltID09IDI6CiAgICAgICAgICAgIHlfcHJlZF9wcm9iYSA9IHlfcHJlZF9wcm9iYVs6LCAxXQogICAgICAgICAgICAKICAgICAgICAjIENvbnZlcnQgZGF0YSBmb3JtYXQKICAgICAgICB5X3ZhbHVlcyA9IHkudmFsdWVzIGlmIGhhc2F0dHIoeSwgJ3ZhbHVlcycpIGVsc2UgeQogICAgICAgIAogICAgICAgICMgQ2FsY3VsYXRlIG1ldHJpY3MKICAgICAgICBtZXRyaWNzID0gY2FsY3VsYXRlX21ldHJpY3MoeV92YWx1ZXMsIHlfcHJlZCwgeV9wcmVkX3Byb2JhKQogICAgICAgIAogICAgICAgICMgUmV0dXJuIHJlc3VsdHMgKHNhbWUgZm9ybWF0IGFzIGJlZm9yZSkKICAgICAgICByZXR1cm4gewogICAgICAgICAgICAnbWV0cmljcyc6IG1ldHJpY3MsCiAgICAgICAgICAgICd5X3RydWUnOiB5X3ZhbHVlcy50b2xpc3QoKSBpZiBoYXNhdHRyKHlfdmFsdWVzLCAndG9saXN0JykgZWxzZSBsaXN0KHlfdmFsdWVzKSwKICAgICAgICAgICAgJ3lfcHJlZCc6IHlfcHJlZC50b2xpc3QoKSBpZiBoYXNhdHRyKHlfcHJlZCwgJ3RvbGlzdCcpIGVsc2UgbGlzdCh5X3ByZWQpLAogICAgICAgICAgICAneV9wcmVkX3Byb2JhJzogeV9wcmVkX3Byb2JhLnRvbGlzdCgpIGlmIGhhc2F0dHIoeV9wcmVkX3Byb2JhLCAndG9saXN0JykgZWxzZSBsaXN0KHlfcHJlZF9wcm9iYSkKICAgICAgICB9CgogICAgZGVmIHBsb3RfY3VydmVzKAogICAgICAgIHNlbGYsIAogICAgICAgIG1vZGVsX2RhdGE6IERpY3Rbc3RyLCBEaWN0W3N0ciwgRGljdFtzdHIsIExpc3RdXV0sCiAgICAgICAgY3VydmVfdHlwZTogTGl0ZXJhbFsncm9jJywgJ2RjYScsICdjYWxpYnJhdGlvbicsICdwcicsICdhbGwnXSA9ICdhbGwnLAogICAgICAgIHRpdGxlOiBzdHIgPSAnZXZhbHVhdGlvbicsCiAgICAgICAgb3V0cHV0X2RpcjogT3B0aW9uYWxbc3RyXSA9IE5vbmUsCiAgICAgICAgcHJlZml4OiBzdHIgPSAnJywKICAgICAgICBuX2JpbnM6IGludCA9IDEwCiAgICApIC0+IERpY3Rbc3RyLCBzdHJdOgogICAgICAgICIiIgogICAgICAgIFBsb3QgdmFyaW91cyBldmFsdWF0aW9uIGN1cnZlcyB1c2luZyBtZXRob2RzIGZyb20gcGxvdHRpbmcucHkKICAgICAgICAKICAgICAgICBBcmdzOgogICAgICAgICAgICBtb2RlbF9kYXRhIChEaWN0KTogRGljdGlvbmFyeSBjb250YWluaW5nIG1vZGVsIGV2YWx1YXRpb24gcmVzdWx0cwogICAgICAgICAgICAgICAgRm9ybWF0OiB7ZGF0YXNldF9uYW1lOiB7bW9kZWxfbmFtZTogeyd5X3RydWUnOiBbLi4uXSwgJ3lfcHJlZF9wcm9iYSc6IFsuLi5dfX19CiAgICAgICAgICAgIGN1cnZlX3R5cGUgKExpdGVyYWwpOiBUeXBlIG9mIGN1cnZlIHRvIHBsb3QsIGNhbiBiZSAncm9jJywgJ2RjYScsICdjYWxpYnJhdGlvbicsICdwcicsIG9yICdhbGwnCiAgICAgICAgICAgIHRpdGxlIChzdHIpOiBLZXl3b3JkIGZvciBjaGFydCB0aXRsZQogICAgICAgICAgICBvdXRwdXRfZGlyIChPcHRpb25hbFtzdHJdKTogT3V0cHV0IGRpcmVjdG9yeSwgZGVmYXVsdHMgdG8gc2VsZi5vdXRwdXRfZGlyCiAgICAgICAgICAgIHByZWZpeCAoc3RyKTogUHJlZml4IGZvciBvdXRwdXQgZmlsZW5hbWVzCiAgICAgICAgICAgIG5fYmlucyAoaW50KTogTnVtYmVyIG9mIGJpbnMgZm9yIGNhbGlicmF0aW9uIGN1cnZlCiAgICAgICAgICAgIAogICAgICAgIFJldHVybnM6CiAgICAgICAgICAgIERpY3Rbc3RyLCBzdHJdOiBEaWN0aW9uYXJ5IGNvbnRhaW5pbmcgcGF0aHMgdG8gZ2VuZXJhdGVkIGNoYXJ0IGZpbGVzCiAgICAgICAgIiIiCiAgICAgICAgIyBFbnN1cmUgb3V0cHV0IGRpcmVjdG9yeSBleGlzdHMKICAgICAgICBpZiBvdXRwdXRfZGlyIGlzIE5vbmU6CiAgICAgICAgICAgIG91dHB1dF9kaXIgPSBzZWxmLm91dHB1dF9kaXIKICAgICAgICBvcy5tYWtlZGlycyhvdXRwdXRfZGlyLCBleGlzdF9vaz1UcnVlKQogICAgICAgIAogICAgICAgICMgQ3JlYXRlIG9yIHVzZSBQbG90dGVyIGluc3RhbmNlCiAgICAgICAgcGxvdHRlciA9IHNlbGYucGxvdHRlcgogICAgICAgIGlmIG91dHB1dF9kaXIgIT0gc2VsZi5vdXRwdXRfZGlyOgogICAgICAgICAgICBwbG90dGVyID0gUGxvdHRlcihvdXRwdXRfZGlyKQogICAgICAgIAogICAgICAgICMgVXNlZCB0byBzdG9yZSBwYXRocyB0byBnZW5lcmF0ZWQgY2hhcnQgZmlsZXMKICAgICAgICByZXN1bHRfZmlsZXMgPSB7fQogICAgICAgIAogICAgICAgICMgR2VuZXJhdGUgY2hhcnRzIGZvciBlYWNoIGRhdGFzZXQgKGUuZy4sIHRyYWluIG9yIHRlc3QpCiAgICAgICAgZm9yIGRhdGFzZXQsIG1vZGVscyBpbiBtb2RlbF9kYXRhLml0ZW1zKCk6CiAgICAgICAgICAgICMgQ29udmVydCBjdXJyZW50IGRhdGFzZXQgZGF0YSB0byBwbG90dGluZyBmb3JtYXQKICAgICAgICAgICAgcGxvdHRpbmdfZGF0YSA9IHt9CiAgICAgICAgICAgIGZvciBtb2RlbF9uYW1lLCBkYXRhIGluIG1vZGVscy5pdGVtcygpOgogICAgICAgICAgICAgICAgeV90cnVlID0gbnAuYXJyYXkoZGF0YS5nZXQoJ3lfdHJ1ZScsIFtdKSkKICAgICAgICAgICAgICAgIHlfcHJlZF9wcm9iYSA9IG5wLmFycmF5KGRhdGEuZ2V0KCd5X3ByZWRfcHJvYmEnLCBbXSkpCiAgICAgICAgICAgICAgICBwbG90dGluZ19kYXRhW21vZGVsX25hbWVdID0gKHlfdHJ1ZSwgeV9wcmVkX3Byb2JhKQogICAgICAgICAgICAKICAgICAgICAgICAgIyBHZW5lcmF0ZSBmaWxlIG5hbWUgcHJlZml4IGZvciBjdXJyZW50IGRhdGFzZXQKICAgICAgICAgICAgZGF0YXNldF9wcmVmaXggPSBmIntwcmVmaXh9e2RhdGFzZXR9XyIgaWYgcHJlZml4IGVsc2UgZiJ7ZGF0YXNldH1fIgogICAgICAgICAgICBkYXRhc2V0X3RpdGxlID0gZiJ7dGl0bGV9X3tkYXRhc2V0fSIKICAgICAgICAgICAgCiAgICAgICAgICAgICMgUGxvdCBST0MgY3VydmUKICAgICAgICAgICAgaWYgY3VydmVfdHlwZSBpbiBbJ3JvYycsICdhbGwnXToKICAgICAgICAgICAgICAgIHJvY19maWxlbmFtZSA9IGYne2RhdGFzZXRfcHJlZml4fXJvY19jdXJ2ZS5wZGYnCiAgICAgICAgICAgICAgICBwbG90dGVyLnBsb3Rfcm9jX3YyKHBsb3R0aW5nX2RhdGEsIHNhdmVfbmFtZT1yb2NfZmlsZW5hbWUsIHRpdGxlPWRhdGFzZXRfdGl0bGUpCiAgICAgICAgICAgICAgICByZXN1bHRfZmlsZXNbZidyb2Nfe2RhdGFzZXR9J10gPSBvcy5wYXRoLmpvaW4ob3V0cHV0X2Rpciwgcm9jX2ZpbGVuYW1lKQogICAgICAgICAgICAKICAgICAgICAgICAgIyBQbG90IGRlY2lzaW9uIGN1cnZlCiAgICAgICAgICAgIGlmIGN1cnZlX3R5cGUgaW4gWydkY2EnLCAnYWxsJ106CiAgICAgICAgICAgICAgICBkY2FfZmlsZW5hbWUgPSBmJ3tkYXRhc2V0X3ByZWZpeH1kZWNpc2lvbl9jdXJ2ZS5wZGYnCiAgICAgICAgICAgICAgICBwbG90dGVyLnBsb3RfZGNhX3YyKHBsb3R0aW5nX2RhdGEsIHNhdmVfbmFtZT1kY2FfZmlsZW5hbWUsIHRpdGxlPWRhdGFzZXRfdGl0bGUpCiAgICAgICAgICAgICAgICByZXN1bHRfZmlsZXNbZidkY2Ffe2RhdGFzZXR9J10gPSBvcy5wYXRoLmpvaW4ob3V0cHV0X2RpciwgZGNhX2ZpbGVuYW1lKQogICAgICAgICAgICAKICAgICAgICAgICAgIyBQbG90IGNhbGlicmF0aW9uIGN1cnZlCiAgICAgICAgICAgIGlmIGN1cnZlX3R5cGUgaW4gWydjYWxpYnJhdGlvbicsICdhbGwnXToKICAgICAgICAgICAgICAgIGNhbGlicmF0aW9uX2ZpbGVuYW1lID0gZid7ZGF0YXNldF9wcmVmaXh9Y2FsaWJyYXRpb25fY3VydmUucGRmJwogICAgICAgICAgICAgICAgcGxvdHRlci5wbG90X2NhbGlicmF0aW9uX3YyKHBsb3R0aW5nX2RhdGEsIHNhdmVfbmFtZT1jYWxpYnJhdGlvbl9maWxlbmFtZSwgdGl0bGU9ZGF0YXNldF90aXRsZSwgbl9iaW5zPW5fYmlucykKICAgICAgICAgICAgICAgIHJlc3VsdF9maWxlc1tmJ2NhbGlicmF0aW9uX3tkYXRhc2V0fSddID0gb3MucGF0aC5qb2luKG91dHB1dF9kaXIsIGNhbGlicmF0aW9uX2ZpbGVuYW1lKQogICAgICAgICAgICAKICAgICAgICAgICAgIyBQbG90IHByZWNpc2lvbi1yZWNhbGwgY3VydmUKICAgICAgICAgICAgaWYgY3VydmVfdHlwZSBpbiBbJ3ByJywgJ2FsbCddOgogICAgICAgICAgICAgICAgcHJfZmlsZW5hbWUgPSBmJ3tkYXRhc2V0X3ByZWZpeH1wcmVjaXNpb25fcmVjYWxsX2N1cnZlLnBkZicKICAgICAgICAgICAgICAgIHBsb3R0ZXIucGxvdF9wcl9jdXJ2ZShwbG90dGluZ19kYXRhLCBzYXZlX25hbWU9cHJfZmlsZW5hbWUsIHRpdGxlPWRhdGFzZXRfdGl0bGUpCiAgICAgICAgICAgICAgICByZXN1bHRfZmlsZXNbZidwcl97ZGF0YXNldH0nXSA9IG9zLnBhdGguam9pbihvdXRwdXRfZGlyLCBwcl9maWxlbmFtZSkKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzdWx0X2ZpbGVzCgogICAgZGVmIGNvbXBhcmVfbW9kZWxzKHNlbGYsIHRlc3RfZGF0YTogRGljdFtzdHIsIFR1cGxlW0xpc3QsIExpc3RdXSkgLT4gTm9uZToKICAgICAgICAiIiIKICAgICAgICBDb21wYXJlIHRoZSBwZXJmb3JtYW5jZSBvZiBtdWx0aXBsZSBtb2RlbHMgKHVzaW5nIERlTG9uZyB0ZXN0KQogICAgICAgIAogICAgICAgIEFyZ3M6CiAgICAgICAgICAgIHRlc3RfZGF0YSAoRGljdFtzdHIsIFR1cGxlW0xpc3QsIExpc3RdXSk6IFRlc3QgZGF0YSBkaWN0aW9uYXJ5LCBrZXlzIGFyZSBtb2RlbCBuYW1lcywgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzIGFyZSAoeV90cnVlLCB5X3ByZWRfcHJvYmEpIHR1cGxlcwogICAgICAgICIiIgogICAgICAgIHRyeToKICAgICAgICAgICAgZnJvbSBkZWxvbmdfdGVzdCBpbXBvcnQgZGVsb25nX3JvY190ZXN0CiAgICAgICAgZXhjZXB0IEltcG9ydEVycm9yOgogICAgICAgICAgICBwcmludCgiV2FybmluZzogZGVsb25nX3Rlc3QgbW9kdWxlIG5vdCBmb3VuZC4gQ2Fubm90IHBlcmZvcm0gRGVMb25nIHRlc3QuIikKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIAogICAgICAgIHByaW50KCJcbiIgKyAiPSIqODApCiAgICAgICAgcHJpbnQoIiAiKjMwICsgIk1vZGVsIEFVQyBDb21wYXJpc29uIChEZUxvbmcgdGVzdCkiKQogICAgICAgIHByaW50KCI9Iio4MCkKICAgICAgICAKICAgICAgICAjIEdldCBsaXN0IG9mIG1vZGVsIG5hbWVzCiAgICAgICAgbW9kZWxfbmFtZXMgPSBsaXN0KHRlc3RfZGF0YS5rZXlzKCkpCiAgICAgICAgCiAgICAgICAgIyBVc2VkIHRvIHN0b3JlIGNvbXBhcmlzb24gcmVzdWx0cwogICAgICAgIGNvbXBhcmlzb25fcmVzdWx0cyA9IFtdCiAgICAgICAgCiAgICAgICAgIyBDb21wYXJlIGVhY2ggcGFpciBvZiBtb2RlbHMKICAgICAgICBmb3IgaSBpbiByYW5nZShsZW4obW9kZWxfbmFtZXMpKToKICAgICAgICAgICAgZm9yIGogaW4gcmFuZ2UoaSsxLCBsZW4obW9kZWxfbmFtZXMpKToKICAgICAgICAgICAgICAgIG1vZGVsMSA9IG1vZGVsX25hbWVzW2ldCiAgICAgICAgICAgICAgICBtb2RlbDIgPSBtb2RlbF9uYW1lc1tqXQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB5X3RydWUgPSB0ZXN0X2RhdGFbbW9kZWwxXVswXQogICAgICAgICAgICAgICAgeV9wcmVkMSA9IHRlc3RfZGF0YVttb2RlbDFdWzFdCiAgICAgICAgICAgICAgICB5X3ByZWQyID0gdGVzdF9kYXRhW21vZGVsMl1bMV0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgIyBFbnN1cmUgYWxsIGRhdGEgYXJlIG51bXB5IGFycmF5IGZvcm1hdAogICAgICAgICAgICAgICAgeV90cnVlID0gbnAuYXJyYXkoeV90cnVlKQogICAgICAgICAgICAgICAgeV9wcmVkMSA9IG5wLmFycmF5KHlfcHJlZDEpCiAgICAgICAgICAgICAgICB5X3ByZWQyID0gbnAuYXJyYXkoeV9wcmVkMikKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgIyBQZXJmb3JtIERlTG9uZyB0ZXN0CiAgICAgICAgICAgICAgICBwX3ZhbHVlID0gZGVsb25nX3JvY190ZXN0KHlfdHJ1ZSwgeV9wcmVkMSwgeV9wcmVkMikKICAgICAgICAgICAgICAgIHBfdmFsdWUgPSBwX3ZhbHVlWzBdWzBdCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICMgQ2FsY3VsYXRlIEFVQyBhbmQgY29uZmlkZW5jZSBpbnRlcnZhbCBmb3IgZWFjaCBtb2RlbAogICAgICAgICAgICAgICAgYXVjMSwgY2kxID0gZGVsb25nX3JvY19jaSh5X3RydWUsIHlfcHJlZDEpCiAgICAgICAgICAgICAgICBhdWMyLCBjaTIgPSBkZWxvbmdfcm9jX2NpKHlfdHJ1ZSwgeV9wcmVkMikKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgIyBTdG9yZSByZXN1bHRzCiAgICAgICAgICAgICAgICBjb21wYXJpc29uX3Jlc3VsdCA9IHsKICAgICAgICAgICAgICAgICAgICAnY29tcGFyaXNvbic6IGYie21vZGVsMX0gdnMge21vZGVsMn0iLAogICAgICAgICAgICAgICAgICAgIGYne21vZGVsMX1fYXVjJzogZmxvYXQoYXVjMSksCiAgICAgICAgICAgICAgICAgICAgZid7bW9kZWwxfV9jaV9sb3dlcic6IGZsb2F0KGNpMVswXSksCiAgICAgICAgICAgICAgICAgICAgZid7bW9kZWwxfV9jaV91cHBlcic6IGZsb2F0KGNpMVsxXSksCiAgICAgICAgICAgICAgICAgICAgZid7bW9kZWwyfV9hdWMnOiBmbG9hdChhdWMyKSwKICAgICAgICAgICAgICAgICAgICBmJ3ttb2RlbDJ9X2NpX2xvd2VyJzogZmxvYXQoY2kyWzBdKSwKICAgICAgICAgICAgICAgICAgICBmJ3ttb2RlbDJ9X2NpX3VwcGVyJzogZmxvYXQoY2kyWzFdKSwKICAgICAgICAgICAgICAgICAgICAncF92YWx1ZSc6IGZsb2F0KHBfdmFsdWUpLAogICAgICAgICAgICAgICAgICAgICdzaWduaWZpY2FudF9kaWZmZXJlbmNlJzogYm9vbChwX3ZhbHVlIDwgMC4wNSksCiAgICAgICAgICAgICAgICAgICAgJ2NvbmNsdXNpb24nOiBmInttb2RlbDF9IGFuZCB7bW9kZWwyfSBBVUMgZXhpc3RzIHNpZ25pZmljYW50IGRpZmZlcmVuY2UgKHA8MC4wNSkiIGlmIHBfdmFsdWUgPCAwLjA1IGVsc2UgZiJ7bW9kZWwxfSBhbmQge21vZGVsMn0gQVVDIG5vIHNpZ25pZmljYW50IGRpZmZlcmVuY2UgKHDiiaUwLjA1KSIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNvbXBhcmlzb25fcmVzdWx0cy5hcHBlbmQoY29tcGFyaXNvbl9yZXN1bHQpCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICMgUHJpbnQgcmVzdWx0cwogICAgICAgICAgICAgICAgcHJpbnQoZiJDb21wYXJpc29uOiB7bW9kZWwxfSB2cyB7bW9kZWwyfSIpCiAgICAgICAgICAgICAgICBwcmludChmInttb2RlbDF9IEFVQzoge2F1YzE6LjRmfSAoOTUlIENJOiB7Y2kxWzBdOi40Zn0te2NpMVsxXTouNGZ9KSIpCiAgICAgICAgICAgICAgICBwcmludChmInttb2RlbDJ9IEFVQzoge2F1YzI6LjRmfSAoOTUlIENJOiB7Y2kyWzBdOi40Zn0te2NpMlsxXTouNGZ9KSIpCiAgICAgICAgICAgICAgICBwcmludChmIkRlTG9uZyB0ZXN0IHAtdmFsdWU6IHtwX3ZhbHVlOi40Zn0iKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZiBwX3ZhbHVlIDwgMC4wNToKICAgICAgICAgICAgICAgICAgICBwcmludChmIkNvbmNsdXNpb246IFNpZ25pZmljYW50IGRpZmZlcmVuY2UgaW4gQVVDIGJldHdlZW4ge21vZGVsMX0gYW5kIHttb2RlbDJ9IChwPDAuMDUpIikKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQoZiJDb25jbHVzaW9uOiBObyBzaWduaWZpY2FudCBkaWZmZXJlbmNlIGluIEFVQyBiZXR3ZWVuIHttb2RlbDF9IGFuZCB7bW9kZWwyfSAocOKJpTAuMDUpIikKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgcHJpbnQoIi0iKjgwKQogICAgICAgIAogICAgICAgICMgU2F2ZSBjb21wYXJpc29uIHJlc3VsdHMKICAgICAgICBjb21wYXJpc29uX2ZpbGUgPSBvcy5wYXRoLmpvaW4oc2VsZi5vdXRwdXRfZGlyLCAnZGVsb25nX2NvbXBhcmlzb24uanNvbicpCiAgICAgICAgd2l0aCBvcGVuKGNvbXBhcmlzb25fZmlsZSwgJ3cnLCBlbmNvZGluZz0ndXRmLTgnKSBhcyBmOgogICAgICAgICAgICBqc29uLmR1bXAoY29tcGFyaXNvbl9yZXN1bHRzLCBmLCBlbnN1cmVfYXNjaWk9RmFsc2UsIGluZGVudD00KQoKICAgIGRlZiBfcHJpbnRfcGVyZm9ybWFuY2VfdGFibGUoc2VsZiwgcmVzdWx0czogRGljdFtzdHIsIEFueV0pIC0+IE5vbmU6CiAgICAgICAgIiIiCiAgICAgICAgUHJpbnQgbW9kZWwgcGVyZm9ybWFuY2UgdGFibGUKICAgICAgICAKICAgICAgICBBcmdzOgogICAgICAgICAgICByZXN1bHRzIChEaWN0W3N0ciwgQW55XSk6IEV2YWx1YXRpb24gcmVzdWx0cyBkaWN0aW9uYXJ5CiAgICAgICAgIiIiCiAgICAgICAgcHJpbnQoIlxuIiArICI9Iio4MCkKICAgICAgICBwcmludCgiICIqMzAgKyAiTW9kZWwgUGVyZm9ybWFuY2UgRXZhbHVhdGlvbiBUYWJsZSIpCiAgICAgICAgcHJpbnQoIj0iKjgwKQogICAgICAgIAogICAgICAgICMgRGVmaW5lIG1ldHJpYyBuYW1lIG1hcHBpbmcKICAgICAgICBtZXRyaWNfbmFtZXMgPSB7CiAgICAgICAgICAgICdhY2N1cmFjeSc6ICdBY2N1cmFjeScsCiAgICAgICAgICAgICdzZW5zaXRpdml0eSc6ICdTZW5zaXRpdml0eScsCiAgICAgICAgICAgICdzcGVjaWZpY2l0eSc6ICdTcGVjaWZpY2l0eScsCiAgICAgICAgICAgICdwcHYnOiAnUG9zaXRpdmUgUHJlZGljdGl2ZSBWYWx1ZScsCiAgICAgICAgICAgICducHYnOiAnTmVnYXRpdmUgUHJlZGljdGl2ZSBWYWx1ZScsCiAgICAgICAgICAgICdhdWMnOiAnQVVDJwogICAgICAgIH0KICAgICAgICAKICAgICAgICAjIEdldCBhdmFpbGFibGUgbW9kZWwgbmFtZXMgZnJvbSBlaXRoZXIgdHJhaW4gb3IgdGVzdCByZXN1bHRzCiAgICAgICAgYXZhaWxhYmxlX21vZGVscyA9IHNldCgpCiAgICAgICAgaWYgJ3RyYWluJyBpbiByZXN1bHRzOgogICAgICAgICAgICBhdmFpbGFibGVfbW9kZWxzLnVwZGF0ZShyZXN1bHRzWyd0cmFpbiddLmtleXMoKSkKICAgICAgICBpZiAndGVzdCcgaW4gcmVzdWx0czoKICAgICAgICAgICAgYXZhaWxhYmxlX21vZGVscy51cGRhdGUocmVzdWx0c1sndGVzdCddLmtleXMoKSkKICAgICAgICAKICAgICAgICBpZiBub3QgYXZhaWxhYmxlX21vZGVsczoKICAgICAgICAgICAgcHJpbnQoIk5vIG1vZGVsIHJlc3VsdHMgYXZhaWxhYmxlIikKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIAogICAgICAgICMgUHJpbnQgdGFibGUgaGVhZGVyCiAgICAgICAgaGVhZGVyID0gWyJNZXRyaWMiXQogICAgICAgIGZvciBtb2RlbF9uYW1lIGluIHNvcnRlZChhdmFpbGFibGVfbW9kZWxzKToKICAgICAgICAgICAgaWYgJ3RyYWluJyBpbiByZXN1bHRzOgogICAgICAgICAgICAgICAgaGVhZGVyLmFwcGVuZChmInttb2RlbF9uYW1lfSAoVHJhaW4pIikKICAgICAgICAgICAgaWYgJ3Rlc3QnIGluIHJlc3VsdHM6CiAgICAgICAgICAgICAgICBoZWFkZXIuYXBwZW5kKGYie21vZGVsX25hbWV9IChUZXN0KSIpCiAgICAgICAgCiAgICAgICAgcHJpbnQoIiB8ICIuam9pbihbZiJ7aDpeMTV9IiBmb3IgaCBpbiBoZWFkZXJdKSkKICAgICAgICBwcmludCgiLSIqODApCiAgICAgICAgCiAgICAgICAgIyBQcmludCB2YWx1ZXMgZm9yIGVhY2ggbWV0cmljCiAgICAgICAgZm9yIG1ldHJpYyBpbiBbJ2FjY3VyYWN5JywgJ3NlbnNpdGl2aXR5JywgJ3NwZWNpZmljaXR5JywgJ3BwdicsICducHYnLCAnYXVjJ106CiAgICAgICAgICAgIHJvdyA9IFttZXRyaWNfbmFtZXMuZ2V0KG1ldHJpYywgbWV0cmljKV0KICAgICAgICAgICAgCiAgICAgICAgICAgIGZvciBtb2RlbF9uYW1lIGluIHNvcnRlZChhdmFpbGFibGVfbW9kZWxzKToKICAgICAgICAgICAgICAgICMgR2V0IHRyYWluIG1ldHJpY3MgaWYgYXZhaWxhYmxlCiAgICAgICAgICAgICAgICBpZiAndHJhaW4nIGluIHJlc3VsdHM6CiAgICAgICAgICAgICAgICAgICAgdHJhaW5fbWV0cmljcyA9IHJlc3VsdHNbJ3RyYWluJ10uZ2V0KG1vZGVsX25hbWUsIHt9KS5nZXQoJ21ldHJpY3MnLCB7fSkKICAgICAgICAgICAgICAgICAgICB0cmFpbl92YWx1ZSA9IHRyYWluX21ldHJpY3MuZ2V0KG1ldHJpYywgJ04vQScpCiAgICAgICAgICAgICAgICAgICAgcm93LmFwcGVuZChmInt0cmFpbl92YWx1ZTouNGZ9IiBpZiBpc2luc3RhbmNlKHRyYWluX3ZhbHVlLCAoaW50LCBmbG9hdCkpIGVsc2Ugc3RyKHRyYWluX3ZhbHVlKSkKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgIyBHZXQgdGVzdCBtZXRyaWNzIGlmIGF2YWlsYWJsZQogICAgICAgICAgICAgICAgaWYgJ3Rlc3QnIGluIHJlc3VsdHM6CiAgICAgICAgICAgICAgICAgICAgdGVzdF9tZXRyaWNzID0gcmVzdWx0c1sndGVzdCddLmdldChtb2RlbF9uYW1lLCB7fSkuZ2V0KCdtZXRyaWNzJywge30pCiAgICAgICAgICAgICAgICAgICAgdGVzdF92YWx1ZSA9IHRlc3RfbWV0cmljcy5nZXQobWV0cmljLCAnTi9BJykKICAgICAgICAgICAgICAgICAgICByb3cuYXBwZW5kKGYie3Rlc3RfdmFsdWU6LjRmfSIgaWYgaXNpbnN0YW5jZSh0ZXN0X3ZhbHVlLCAoaW50LCBmbG9hdCkpIGVsc2Ugc3RyKHRlc3RfdmFsdWUpKQogICAgICAgICAgICAKICAgICAgICAgICAgcHJpbnQoIiB8ICIuam9pbihbZiJ7Y2VsbDpeMTV9IiBmb3IgY2VsbCBpbiByb3ddKSkKICAgICAgICAKICAgICAgICBwcmludCgiPSIqODApCgoKY2xhc3MgTXVsdGlmaWxlRXZhbHVhdG9yOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIG91dHB1dF9kaXI6IHN0cikgLT4gTm9uZToKICAgICAgICAiIiIKICAgICAgICDliJ3lp4vljJblpJrmlofku7bor4TkvLDlmagKICAgICAgICAKICAgICAgICBBcmdzOgogICAgICAgICAgICBvdXRwdXRfZGlyIChzdHIpOiDlm77ooajovpPlh7rnm67lvZUKICAgICAgICAiIiIKICAgICAgICBzZWxmLm91dHB1dF9kaXIgPSBvdXRwdXRfZGlyCiAgICAgICAgc2VsZi5wbG90dGVyID0gUGxvdHRlcihvdXRwdXRfZGlyKQogICAgICAgIHNlbGYuZGF0YSA9IE5vbmUKICAgICAgICBzZWxmLm1vZGVsc19kYXRhID0ge30KICAgICAgICBzZWxmLmxhYmVsX2NvbCA9IE5vbmUKICAgICAgICBzZWxmLnN1YmplY3RfaWRfY29sID0gTm9uZQogICAgICAgIAogICAgZGVmIHJlYWRfcHJlZGljdGlvbl9maWxlcyhzZWxmLCBmaWxlc19jb25maWc6IExpc3RbRGljdF0pIC0+ICdNdWx0aWZpbGVFdmFsdWF0b3InOgogICAgICAgICIiIgogICAgICAgIOS7juWkmuS4quaWh+S7tuivu+WPlumihOa1i+e7k+aenAogICAgICAgIAogICAgICAgIEFyZ3M6CiAgICAgICAgICAgIGZpbGVzX2NvbmZpZyAoTGlzdFtEaWN0XSk6IOaWh+S7tumFjee9ruWIl+ihqO+8jOavj+S4quWFg+e0oOWMheWQq++8mgogICAgICAgICAgICAgICAgLSBwYXRoOiDmlofku7bot6/lvoQKICAgICAgICAgICAgICAgIC0gbW9kZWxfbmFtZTog5qih5Z6L5ZCN56ewCiAgICAgICAgICAgICAgICAtIHN1YmplY3RfaWRfY29sOiDlj5for5XogIVJROWIl+WQjQogICAgICAgICAgICAgICAgLSBsYWJlbF9jb2w6IOecn+Wunuagh+etvuWIl+WQjQogICAgICAgICAgICAgICAgLSBwcm9iX2NvbDog6aKE5rWL5qaC546H5YiX5ZCNCiAgICAgICAgICAgICAgICAtIHByZWRfY29sOiDpooTmtYvmoIfnrb7liJflkI3vvIjlj6/pgInvvIkKICAgICAgICAgICAgICAgIAogICAgICAgIFJldHVybnM6CiAgICAgICAgICAgIE11bHRpZmlsZUV2YWx1YXRvcjog6Ieq6Lqr5a6e5L6L77yM55So5LqO5pa55rOV6ZO+5byP6LCD55SoCiAgICAgICAgIiIiCiAgICAgICAgbWVyZ2VkX2RmID0gTm9uZQogICAgICAgIGFsbF9sYWJlbHMgPSB7fSAgIyDlrZjlgqjmiYDmnInmoLfmnKznmoTmoIfnrb7lgLwKICAgICAgICBmaXJzdF9zdWJqZWN0X2lkX2NvbCA9IE5vbmUgICMg6K6w5b2V56ys5LiA5Liqc3ViamVjdF9pZF9jb2wKICAgICAgICBmaXJzdF9sYWJlbF9jb2wgPSBOb25lICAjIOiusOW9leesrOS4gOS4quagh+etvuWIl+WQjQogICAgICAgIAogICAgICAgIHByaW50KGYiUmVhZGluZyBkYXRhIGZyb20gbXVsdGlwbGUgZmlsZXM6IHtsZW4oZmlsZXNfY29uZmlnKX0gZmlsZXMiKQogICAgICAgIAogICAgICAgIGZvciBpZHgsIGZpbGVfY29uZmlnIGluIGVudW1lcmF0ZShmaWxlc19jb25maWcpOgogICAgICAgICAgICBmaWxlX3BhdGggPSBmaWxlX2NvbmZpZ1sncGF0aCddCiAgICAgICAgICAgIG5hbWUgPSBmaWxlX2NvbmZpZy5nZXQoJ21vZGVsX25hbWUnLCBmaWxlX2NvbmZpZy5nZXQoJ25hbWUnLCBmIm1vZGVse2lkeCsxfSIpKSAjIOWFvOWuueiAgeagvOW8jwogICAgICAgICAgICBzdWJqZWN0X2lkX2NvbCA9IGZpbGVfY29uZmlnLmdldCgnc3ViamVjdF9pZF9jb2wnKQogICAgICAgICAgICBsYWJlbF9jb2wgPSBmaWxlX2NvbmZpZy5nZXQoJ2xhYmVsX2NvbCcpCiAgICAgICAgICAgIHByb2JfY29sID0gZmlsZV9jb25maWcuZ2V0KCdwcm9iX2NvbCcpCiAgICAgICAgICAgIHByZWRfY29sID0gZmlsZV9jb25maWcuZ2V0KCdwcmVkX2NvbCcpICAjIOiOt+WPlumihOa1i+WIl+WQjeensO+8iOWPr+mAie+8iQogICAgICAgICAgICAKICAgICAgICAgICAgIyDmo4Dmn6Xlv4XopoHlj4LmlbAKICAgICAgICAgICAgaWYgc3ViamVjdF9pZF9jb2wgaXMgTm9uZToKICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoZiJTdWJqZWN0IElEIGNvbHVtbiBtdXN0IGJlIHNwZWNpZmllZCBmb3IgZmlsZSB7ZmlsZV9wYXRofSIpCiAgICAgICAgICAgIGlmIGxhYmVsX2NvbCBpcyBOb25lOgogICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihmIkxhYmVsIGNvbHVtbiBtdXN0IGJlIHNwZWNpZmllZCBmb3IgZmlsZSB7ZmlsZV9wYXRofSIpCiAgICAgICAgICAgIGlmIHByb2JfY29sIGlzIE5vbmU6CiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKGYiUHJvYmFiaWxpdHkgY29sdW1uIG11c3QgYmUgc3BlY2lmaWVkIGZvciBmaWxlIHtmaWxlX3BhdGh9IikKICAgICAgICAgICAgCiAgICAgICAgICAgIHByaW50KGYiICBSZWFkaW5nIGZpbGU6IHtmaWxlX3BhdGh9IikKICAgICAgICAgICAgcHJpbnQoZiIgIE1vZGVsIG5hbWU6IHtuYW1lfSIpCiAgICAgICAgICAgIHByaW50KGYiICBTdWJqZWN0IElEIGNvbHVtbjoge3N1YmplY3RfaWRfY29sfSIpCiAgICAgICAgICAgIHByaW50KGYiICBMYWJlbCBjb2x1bW46IHtsYWJlbF9jb2x9IikKICAgICAgICAgICAgcHJpbnQoZiIgIFByb2JhYmlsaXR5IGNvbHVtbjoge3Byb2JfY29sfSIpCiAgICAgICAgICAgIGlmIHByZWRfY29sOgogICAgICAgICAgICAgICAgcHJpbnQoZiIgIFByZWRpY3Rpb24gY29sdW1uOiB7cHJlZF9jb2x9IikKICAgICAgICAgICAgCiAgICAgICAgICAgICMg6K+75Y+W5paH5Lu2CiAgICAgICAgICAgIGRmID0gcGQucmVhZF9jc3YoZmlsZV9wYXRoKQogICAgICAgICAgICAKICAgICAgICAgICAgIyDmo4Dmn6XliJfmmK/lkKblrZjlnKgKICAgICAgICAgICAgcmVxdWlyZWRfY29scyA9IFtzdWJqZWN0X2lkX2NvbCwgbGFiZWxfY29sLCBwcm9iX2NvbF0KICAgICAgICAgICAgZm9yIGNvbCBpbiByZXF1aXJlZF9jb2xzOgogICAgICAgICAgICAgICAgaWYgY29sIG5vdCBpbiBkZi5jb2x1bW5zOgogICAgICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoZiJDb2x1bW4gJ3tjb2x9JyBub3QgZm91bmQgaW4ge2ZpbGVfcGF0aH0iKQogICAgICAgICAgICAKICAgICAgICAgICAgIyDlpoLmnpzmjIflrprkuobpooTmtYvliJfvvIzmo4Dmn6XmmK/lkKblrZjlnKgKICAgICAgICAgICAgaWYgcHJlZF9jb2wgYW5kIHByZWRfY29sIG5vdCBpbiBkZi5jb2x1bW5zOgogICAgICAgICAgICAgICAgcHJpbnQoZiJXYXJuaW5nOiBQcmVkaWN0aW9uIGNvbHVtbiAne3ByZWRfY29sfScgbm90IGZvdW5kIGluIHtmaWxlX3BhdGh9LCBpdCB3aWxsIGJlIGlnbm9yZWQiKQogICAgICAgICAgICAgICAgcHJlZF9jb2wgPSBOb25lCiAgICAgICAgICAgIAogICAgICAgICAgICAjIOWwhnN1YmplY3QgSUTovazmjaLkuLrlrZfnrKbkuLLku6Xkvr/kuIDoh7TlkIjlubYKICAgICAgICAgICAgZGZbc3ViamVjdF9pZF9jb2xdID0gZGZbc3ViamVjdF9pZF9jb2xdLmFzdHlwZShzdHIpCiAgICAgICAgICAgIAogICAgICAgICAgICAjIOiusOW9leesrOS4gOS4quaWh+S7tueahOagh+etvuWIl+WQjeS9nOS4uuacgOe7iOagh+etvuWIl+WQjQogICAgICAgICAgICBpZiBmaXJzdF9sYWJlbF9jb2wgaXMgTm9uZToKICAgICAgICAgICAgICAgIGZpcnN0X2xhYmVsX2NvbCA9IGxhYmVsX2NvbAogICAgICAgICAgICAgICAgc2VsZi5sYWJlbF9jb2wgPSBmaXJzdF9sYWJlbF9jb2wKICAgICAgICAgICAgICAgIGxhYmVsX3ZhbHVlcyA9IGRmW2xhYmVsX2NvbF0KICAgICAgICAgICAgCiAgICAgICAgICAgICMg6K6w5b2V56ys5LiA5Liq5paH5Lu255qEc3ViamVjdF9pZF9jb2zkvZzkuLrmnIDnu4hzdWJqZWN0X2lkX2NvbAogICAgICAgICAgICBpZiBmaXJzdF9zdWJqZWN0X2lkX2NvbCBpcyBOb25lOgogICAgICAgICAgICAgICAgZmlyc3Rfc3ViamVjdF9pZF9jb2wgPSBzdWJqZWN0X2lkX2NvbAogICAgICAgICAgICAgICAgc2VsZi5zdWJqZWN0X2lkX2NvbCA9IGZpcnN0X3N1YmplY3RfaWRfY29sCiAgICAgICAgICAgIAogICAgICAgICAgICAjIOaPkOWPluW5tuS/neWtmOagh+etvuaVsOaNrgogICAgICAgICAgICBhbGxfbGFiZWxzW2ZpbGVfcGF0aF0gPSBkZi5sb2NbOiwgW3N1YmplY3RfaWRfY29sLCBsYWJlbF9jb2xdXQogICAgICAgICAgICBhbGxfbGFiZWxzW2ZpbGVfcGF0aF0uc2V0X2luZGV4KHN1YmplY3RfaWRfY29sLCBpbnBsYWNlPVRydWUpCiAgICAgICAgICAgIAogICAgICAgICAgICAjIOS4uuaooeWei+e7k+aenOWIm+W7uuaWsOeahOWIl+WQjQogICAgICAgICAgICBwcm9iX2NvbHVtbl9uYW1lID0gZiJ7bmFtZX1fcHJvYiIKICAgICAgICAgICAgcHJlZF9jb2x1bW5fbmFtZSA9IGYie25hbWV9X3twcmVkX2NvbH0iIGlmIHByZWRfY29sIGVsc2UgTm9uZQogICAgICAgICAgICAKICAgICAgICAgICAgIyDpgInmi6nopoHkv53nlZnnmoTliJcKICAgICAgICAgICAgaWYgcHJlZF9jb2w6CiAgICAgICAgICAgICAgICBkZl9zdWJzZXQgPSBkZltbc3ViamVjdF9pZF9jb2wsIHByb2JfY29sLCBwcmVkX2NvbF1dLmNvcHkoKQogICAgICAgICAgICAgICAgZGZfc3Vic2V0LnJlbmFtZShjb2x1bW5zPXtwcm9iX2NvbDogcHJvYl9jb2x1bW5fbmFtZSwgcHJlZF9jb2w6IHByZWRfY29sdW1uX25hbWV9LCBpbnBsYWNlPVRydWUpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBkZl9zdWJzZXQgPSBkZltbc3ViamVjdF9pZF9jb2wsIHByb2JfY29sXV0uY29weSgpCiAgICAgICAgICAgICAgICBkZl9zdWJzZXQucmVuYW1lKGNvbHVtbnM9e3Byb2JfY29sOiBwcm9iX2NvbHVtbl9uYW1lfSwgaW5wbGFjZT1UcnVlKQogICAgICAgICAgICAKICAgICAgICAgICAgIyDpppbmrKHlpITnkIbliJ3lp4vljJblkIjlubbmlbDmja7moYYKICAgICAgICAgICAgaWYgbWVyZ2VkX2RmIGlzIE5vbmU6CiAgICAgICAgICAgICAgICBtZXJnZWRfZGYgPSBkZl9zdWJzZXQKICAgICAgICAgICAgICAgICMg6K6+572u57Si5byV55So5LqO5ZCO57ut5ZCI5bm2CiAgICAgICAgICAgICAgICBtZXJnZWRfZGYuc2V0X2luZGV4KHN1YmplY3RfaWRfY29sLCBpbnBsYWNlPVRydWUpCiAgICAgICAgICAgICAgICAjIOe0ouW8lei9rOS4uuWtl+espuS4sgogICAgICAgICAgICAgICAgbWVyZ2VkX2RmLmluZGV4ID0gbWVyZ2VkX2RmLmluZGV4LmFzdHlwZShzdHIpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAjIOS4uuWQiOW5tuiuvue9ruS4tOaXtue0ouW8lQogICAgICAgICAgICAgICAgZGZfc3Vic2V0LnNldF9pbmRleChzdWJqZWN0X2lkX2NvbCwgaW5wbGFjZT1UcnVlKQogICAgICAgICAgICAgICAgIyDntKLlvJXovazkuLrlrZfnrKbkuLIKICAgICAgICAgICAgICAgIGRmX3N1YnNldC5pbmRleCA9IGRmX3N1YnNldC5pbmRleC5hc3R5cGUoc3RyKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAjIOS4jueOsOacieaVsOaNruWQiOW5tgogICAgICAgICAgICAgICAgbWVyZ2VkX2RmID0gbWVyZ2VkX2RmLmpvaW4oZGZfc3Vic2V0LCBob3c9J291dGVyJykKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgIyDmm7TmlrDntKLlvJXlkI3np7AKICAgICAgICAgICAgICAgIG1lcmdlZF9kZi5pbmRleC5uYW1lID0gc2VsZi5zdWJqZWN0X2lkX2NvbAogICAgICAgIAogICAgICAgICMg5bCG5qCH562+5pWw5o2u5re75Yqg5Zue5ZCI5bm25ZCO55qE5pWw5o2u5qGGCiAgICAgICAgcHJpbnQoZiJBZGRpbmcgdW5pZmllZCBsYWJlbCBjb2x1bW46IHtzZWxmLmxhYmVsX2NvbH0iKQogICAgICAgIG1lcmdlZF9kZltzZWxmLmxhYmVsX2NvbF0gPSBsYWJlbF92YWx1ZXMudmFsdWVzCiAgICAgICAgCiAgICAgICAgIyDph43mjpLliJfvvIzmiormoIfnrb7mlL7liLDmnIDliY3pnaIKICAgICAgICBjb2xzID0gW3NlbGYubGFiZWxfY29sXSArIFtjb2wgZm9yIGNvbCBpbiBtZXJnZWRfZGYuY29sdW1ucyBpZiBjb2wgIT0gc2VsZi5sYWJlbF9jb2xdCiAgICAgICAgbWVyZ2VkX2RmID0gbWVyZ2VkX2RmW2NvbHNdCiAgICAgICAgCiAgICAgICAgIyDkv53lrZjlkIjlubblkI7nmoTmlbDmja4KICAgICAgICBzZWxmLmRhdGEgPSBtZXJnZWRfZGYKICAgICAgICAKICAgICAgICAjIOWHhuWkh3Bsb3R0aW5n5qih5Z2X5omA6ZyA55qEbW9kZWxzX2RhdGHlrZflhbgKICAgICAgICAjIOmUruaYr+aooeWei+WQjeensO+8jOWAvOaYryh5X3RydWUsIHlfcHJlZF9wcm9iYSnlhYPnu4QKICAgICAgICBmb3IgaWR4LCBmaWxlX2NvbmZpZyBpbiBlbnVtZXJhdGUoZmlsZXNfY29uZmlnKToKICAgICAgICAgICAgbmFtZSA9IGZpbGVfY29uZmlnLmdldCgnbW9kZWxfbmFtZScsIGZpbGVfY29uZmlnLmdldCgnbmFtZScsIGYibW9kZWx7aWR4KzF9IikpCiAgICAgICAgICAgIHByb2JfY29sdW1uX25hbWUgPSBmIntuYW1lfV9wcm9iIgogICAgICAgICAgICAKICAgICAgICAgICAgaWYgcHJvYl9jb2x1bW5fbmFtZSBpbiBzZWxmLmRhdGEuY29sdW1uczoKICAgICAgICAgICAgICAgIHNlbGYubW9kZWxzX2RhdGFbbmFtZV0gPSAoCiAgICAgICAgICAgICAgICAgICAgc2VsZi5kYXRhW3NlbGYubGFiZWxfY29sXS52YWx1ZXMsCiAgICAgICAgICAgICAgICAgICAgc2VsZi5kYXRhW3Byb2JfY29sdW1uX25hbWVdLnZhbHVlcwogICAgICAgICAgICAgICAgKQogICAgICAgIAogICAgICAgIHJldHVybiBzZWxmCiAgICAKICAgIGRlZiBzYXZlX21lcmdlZF9kYXRhKHNlbGYsIGZpbGVuYW1lOiBzdHIgPSAibWVyZ2VkX3ByZWRpY3Rpb25zLmNzdiIpIC0+IE5vbmU6CiAgICAgICAgIiIiCiAgICAgICAg5L+d5a2Y5ZCI5bm25ZCO55qE5pWw5o2u5YiwQ1NW5paH5Lu2CiAgICAgICAgCiAgICAgICAgQXJnczoKICAgICAgICAgICAgZmlsZW5hbWUgKHN0cik6IOi+k+WHuuaWh+S7tuWQjQogICAgICAgICIiIgogICAgICAgIGlmIHNlbGYuZGF0YSBpcyBub3QgTm9uZToKICAgICAgICAgICAgIyDliJvlu7rkuIDkuKrljIXlkKvntKLlvJXnmoTlia/mnKwKICAgICAgICAgICAgb3V0cHV0X2RmID0gc2VsZi5kYXRhLmNvcHkoKQogICAgICAgICAgICBvdXRwdXRfZGYucmVzZXRfaW5kZXgoaW5wbGFjZT1UcnVlKSAgIyDlsIbntKLlvJXlj5jkuLrluLjop4TliJcKICAgICAgICAgICAgCiAgICAgICAgICAgICMg5omT5Y2w5YiX5LitTmFO5YC855qE5pWw6YePCiAgICAgICAgICAgIG5hbl9jb3VudHMgPSBvdXRwdXRfZGYuaXNuYSgpLnN1bSgpCiAgICAgICAgICAgIHByaW50KCJcbk5hTiDlgLznu5/orqE6IikKICAgICAgICAgICAgZm9yIGNvbCwgY291bnQgaW4gbmFuX2NvdW50cy5pdGVtcygpOgogICAgICAgICAgICAgICAgaWYgY291bnQgPiAwOgogICAgICAgICAgICAgICAgICAgIHRvdGFsID0gbGVuKG91dHB1dF9kZikKICAgICAgICAgICAgICAgICAgICBwZXJjZW50ID0gKGNvdW50IC8gdG90YWwpICogMTAwCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoZiIgIHtjb2x9OiB7Y291bnR9L3t0b3RhbH0gKHtwZXJjZW50Oi4yZn0lKSIpCiAgICAgICAgICAgIAogICAgICAgICAgICBvdXRwdXRfcGF0aCA9IG9zLnBhdGguam9pbihzZWxmLm91dHB1dF9kaXIsIGZpbGVuYW1lKQogICAgICAgICAgICBvdXRwdXRfZGYudG9fY3N2KG91dHB1dF9wYXRoLCBpbmRleD1GYWxzZSkKICAgICAgICAgICAgcHJpbnQoZiJNZXJnZWQgZGF0YSBzYXZlZCB0byB7b3V0cHV0X3BhdGh9IikKICAgICAgICBlbHNlOgogICAgICAgICAgICBwcmludCgiTm8gZGF0YSB0byBzYXZlLiBQbGVhc2UgcmVhZCBwcmVkaWN0aW9uIGZpbGVzIGZpcnN0LiIpCiAgICAKICAgIGRlZiBwbG90X3JvYyhzZWxmLCBzYXZlX25hbWU6IHN0ciA9ICJST0MucGRmIiwgdGl0bGU6IHN0ciA9ICJldmFsdWF0aW9uIikgLT4gTm9uZToKICAgICAgICAiIiIKICAgICAgICDkuLrmiYDmnInmqKHlnovnu5jliLZST0Pmm7Lnur8KICAgICAgICAKICAgICAgICBBcmdzOgogICAgICAgICAgICBzYXZlX25hbWUgKHN0cik6IOS/neWtmOaWh+S7tuWQjQogICAgICAgICAgICB0aXRsZSAoc3RyKTog5Zu+6KGo5qCH6aKYCiAgICAgICAgIiIiCiAgICAgICAgaWYgbm90IHNlbGYubW9kZWxzX2RhdGE6CiAgICAgICAgICAgIHByaW50KCJObyBtb2RlbHMgZGF0YSBhdmFpbGFibGUuIFBsZWFzZSByZWFkIHByZWRpY3Rpb24gZmlsZXMgZmlyc3QuIikKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgCiAgICAgICAgc2VsZi5wbG90dGVyLnBsb3Rfcm9jX3YyKHNlbGYubW9kZWxzX2RhdGEsIHNhdmVfbmFtZT1zYXZlX25hbWUsIHRpdGxlPXRpdGxlKQogICAgICAgIHByaW50KGYiUk9DIGN1cnZlIHNhdmVkIHRvIHtvcy5wYXRoLmpvaW4oc2VsZi5vdXRwdXRfZGlyLCBzYXZlX25hbWUpfSIpCiAgICAKICAgIGRlZiBwbG90X2RjYShzZWxmLCBzYXZlX25hbWU6IHN0ciA9ICJEQ0EucGRmIiwgdGl0bGU6IHN0ciA9ICJldmFsdWF0aW9uIikgLT4gTm9uZToKICAgICAgICAiIiIKICAgICAgICDkuLrmiYDmnInmqKHlnovnu5jliLblhrPnrZbmm7Lnur/liIbmnpAoRENBKQogICAgICAgIAogICAgICAgIEFyZ3M6CiAgICAgICAgICAgIHNhdmVfbmFtZSAoc3RyKTog5L+d5a2Y5paH5Lu25ZCNCiAgICAgICAgICAgIHRpdGxlIChzdHIpOiDlm77ooajmoIfpopgKICAgICAgICAiIiIKICAgICAgICBpZiBub3Qgc2VsZi5tb2RlbHNfZGF0YToKICAgICAgICAgICAgcHJpbnQoIk5vIG1vZGVscyBkYXRhIGF2YWlsYWJsZS4gUGxlYXNlIHJlYWQgcHJlZGljdGlvbiBmaWxlcyBmaXJzdC4iKQogICAgICAgICAgICByZXR1cm4KICAgICAgICAKICAgICAgICBzZWxmLnBsb3R0ZXIucGxvdF9kY2FfdjIoc2VsZi5tb2RlbHNfZGF0YSwgc2F2ZV9uYW1lPXNhdmVfbmFtZSwgdGl0bGU9dGl0bGUpCiAgICAgICAgcHJpbnQoZiJEQ0EgY3VydmUgc2F2ZWQgdG8ge29zLnBhdGguam9pbihzZWxmLm91dHB1dF9kaXIsIHNhdmVfbmFtZSl9IikKICAgIAogICAgZGVmIHBsb3RfY2FsaWJyYXRpb24oc2VsZiwgc2F2ZV9uYW1lOiBzdHIgPSAiQ2FsaWJyYXRpb24ucGRmIiwgbl9iaW5zOiBpbnQgPSA1LCB0aXRsZTogc3RyID0gImV2YWx1YXRpb24iKSAtPiBOb25lOgogICAgICAgICIiIgogICAgICAgIOS4uuaJgOacieaooeWei+e7mOWItuagoeWHhuabsue6vwogICAgICAgIAogICAgICAgIEFyZ3M6CiAgICAgICAgICAgIHNhdmVfbmFtZSAoc3RyKTog5L+d5a2Y5paH5Lu25ZCNCiAgICAgICAgICAgIG5fYmlucyAoaW50KTog5qCh5YeG5puy57q/55qE5YiG566x5pWwCiAgICAgICAgICAgIHRpdGxlIChzdHIpOiDlm77ooajmoIfpopgKICAgICAgICAiIiIKICAgICAgICBpZiBub3Qgc2VsZi5tb2RlbHNfZGF0YToKICAgICAgICAgICAgcHJpbnQoIk5vIG1vZGVscyBkYXRhIGF2YWlsYWJsZS4gUGxlYXNlIHJlYWQgcHJlZGljdGlvbiBmaWxlcyBmaXJzdC4iKQogICAgICAgICAgICByZXR1cm4KICAgICAgICAKICAgICAgICBzZWxmLnBsb3R0ZXIucGxvdF9jYWxpYnJhdGlvbl92MihzZWxmLm1vZGVsc19kYXRhLCBzYXZlX25hbWU9c2F2ZV9uYW1lLCBuX2JpbnM9bl9iaW5zLCB0aXRsZT10aXRsZSkKICAgICAgICBwcmludChmIkNhbGlicmF0aW9uIGN1cnZlIHNhdmVkIHRvIHtvcy5wYXRoLmpvaW4oc2VsZi5vdXRwdXRfZGlyLCBzYXZlX25hbWUpfSIpCiAgICAKICAgIGRlZiBwbG90X3ByX2N1cnZlKHNlbGYsIHNhdmVfbmFtZTogc3RyID0gIlBSX2N1cnZlLnBkZiIsIHRpdGxlOiBzdHIgPSAiZXZhbHVhdGlvbiIpIC0+IE5vbmU6CiAgICAgICAgIiIiCiAgICAgICAg5Li65omA5pyJ5qih5Z6L57uY5Yi257K+56Gu546HLeWPrOWbnueOh+absue6vwogICAgICAgIAogICAgICAgIEFyZ3M6CiAgICAgICAgICAgIHNhdmVfbmFtZSAoc3RyKTog5L+d5a2Y5paH5Lu25ZCNCiAgICAgICAgICAgIHRpdGxlIChzdHIpOiDlm77ooajmoIfpopgKICAgICAgICAiIiIKICAgICAgICBpZiBub3Qgc2VsZi5tb2RlbHNfZGF0YToKICAgICAgICAgICAgcHJpbnQoIk5vIG1vZGVscyBkYXRhIGF2YWlsYWJsZS4gUGxlYXNlIHJlYWQgcHJlZGljdGlvbiBmaWxlcyBmaXJzdC4iKQogICAgICAgICAgICByZXR1cm4KICAgICAgICAKICAgICAgICBzZWxmLnBsb3R0ZXIucGxvdF9wcl9jdXJ2ZShzZWxmLm1vZGVsc19kYXRhLCBzYXZlX25hbWU9c2F2ZV9uYW1lLCB0aXRsZT10aXRsZSkKICAgICAgICBwcmludChmIlBSIGN1cnZlIHNhdmVkIHRvIHtvcy5wYXRoLmpvaW4oc2VsZi5vdXRwdXRfZGlyLCBzYXZlX25hbWUpfSIpCiAgICAKICAgIGRlZiBydW5fZGVsb25nX3Rlc3Qoc2VsZiwgb3V0cHV0X2pzb246IE9wdGlvbmFsW3N0cl0gPSAiZGVsb25nX3Rlc3RfcmVzdWx0cy5qc29uIikgLT4gTGlzdFtEaWN0XToKICAgICAgICAiIiIKICAgICAgICDlr7nmiYDmnInmqKHlnovlr7nmiafooYxEZUxvbmfmo4DpqowKICAgICAgICAKICAgICAgICBBcmdzOgogICAgICAgICAgICBvdXRwdXRfanNvbiAoT3B0aW9uYWxbc3RyXSk6IOi+k+WHukpTT07mlofku7blkI3vvIzlpoLkuI3pnIDopoHkv53lrZjorr7kuLpOb25lCiAgICAgICAgICAgIAogICAgICAgIFJldHVybnM6CiAgICAgICAgICAgIExpc3RbRGljdF06IERlTG9uZ+ajgOmqjOe7k+aenOWIl+ihqAogICAgICAgICIiIgogICAgICAgIGlmIG5vdCBzZWxmLm1vZGVsc19kYXRhIG9yIGxlbihzZWxmLm1vZGVsc19kYXRhKSA8IDI6CiAgICAgICAgICAgIHByaW50KCJOZWVkIGF0IGxlYXN0IHR3byBtb2RlbHMgZm9yIERlTG9uZyB0ZXN0LiIpCiAgICAgICAgICAgIHJldHVybiBbXQogICAgICAgIAogICAgICAgIHJlc3VsdHMgPSBbXQogICAgICAgIG1vZGVsX25hbWVzID0gbGlzdChzZWxmLm1vZGVsc19kYXRhLmtleXMoKSkKICAgICAgICAKICAgICAgICAjIOiOt+WPluecn+Wunuagh+etvgogICAgICAgIHlfdHJ1ZSA9IHNlbGYuZGF0YVtzZWxmLmxhYmVsX2NvbF0udmFsdWVzCiAgICAgICAgCiAgICAgICAgIyDmiafooYzmiJDlr7nmr5TovoMKICAgICAgICBmb3IgaSBpbiByYW5nZShsZW4obW9kZWxfbmFtZXMpKToKICAgICAgICAgICAgZm9yIGogaW4gcmFuZ2UoaSArIDEsIGxlbihtb2RlbF9uYW1lcykpOgogICAgICAgICAgICAgICAgbW9kZWwxID0gbW9kZWxfbmFtZXNbaV0KICAgICAgICAgICAgICAgIG1vZGVsMiA9IG1vZGVsX25hbWVzW2pdCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICMg5Yib5bu65LiA5Liq5YyF5ZCr5YWx5ZCM5pyJ5pWI5pWw5o2u55qERGF0YUZyYW1lCiAgICAgICAgICAgICAgICB0ZW1wX2RmID0gcGQuRGF0YUZyYW1lKHsKICAgICAgICAgICAgICAgICAgICAneV90cnVlJzogeV90cnVlLAogICAgICAgICAgICAgICAgICAgIGYne21vZGVsMX1fcHJvYic6IHNlbGYuZGF0YVtmInttb2RlbDF9X3Byb2IiXS52YWx1ZXMsCiAgICAgICAgICAgICAgICAgICAgZid7bW9kZWwyfV9wcm9iJzogc2VsZi5kYXRhW2Yie21vZGVsMn1fcHJvYiJdLnZhbHVlcwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgIyDliKDpmaTku7vkvZXljIXlkKtOYU7nmoTooYwKICAgICAgICAgICAgICAgIHRlbXBfZGYgPSB0ZW1wX2RmLmRyb3BuYSgpCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGlmIGxlbih0ZW1wX2RmKSA9PSAwOgogICAgICAgICAgICAgICAgICAgIHByaW50KGYi6K2m5ZGKOiB7bW9kZWwxfSDlkowge21vZGVsMn0g5rKh5pyJ6Laz5aSf55qE5YWx5ZCM5pyJ5pWI5qC35pys6L+b6KGMRGVMb25n5qOA6aqMIikKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBwcmludChmIuaJp+ihjERlTG9uZ+ajgOmqjDoge21vZGVsMX0gdnMge21vZGVsMn3vvIzmnInmlYjmoLfmnKzmlbA6IHtsZW4odGVtcF9kZil9IikKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgIyDojrflj5bmuIXnkIblkI7nmoTmlbDmja4KICAgICAgICAgICAgICAgIGNsZWFuX3lfdHJ1ZSA9IHRlbXBfZGZbJ3lfdHJ1ZSddLnZhbHVlcwogICAgICAgICAgICAgICAgY2xlYW5feV9wcmVkMSA9IHRlbXBfZGZbZid7bW9kZWwxfV9wcm9iJ10udmFsdWVzCiAgICAgICAgICAgICAgICBjbGVhbl95X3ByZWQyID0gdGVtcF9kZltmJ3ttb2RlbDJ9X3Byb2InXS52YWx1ZXMKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgIyDorqHnrpdBVUPlkoznva7kv6HljLrpl7QKICAgICAgICAgICAgICAgIGF1YzEsIGNpMSA9IGRlbG9uZ19yb2NfY2koY2xlYW5feV90cnVlLCBjbGVhbl95X3ByZWQxKQogICAgICAgICAgICAgICAgYXVjMiwgY2kyID0gZGVsb25nX3JvY19jaShjbGVhbl95X3RydWUsIGNsZWFuX3lfcHJlZDIpCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICMg6K6h566XcOWAvAogICAgICAgICAgICAgICAgcF92YWx1ZSA9IGRlbG9uZ19yb2NfdGVzdChjbGVhbl95X3RydWUsIGNsZWFuX3lfcHJlZDEsIGNsZWFuX3lfcHJlZDIpCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICMg5Yib5bu65q+U6L6D57uT5p6cCiAgICAgICAgICAgICAgICBjb21wYXJpc29uX3Jlc3VsdCA9IHsKICAgICAgICAgICAgICAgICAgICAnY29tcGFyaXNvbic6IGYie21vZGVsMX0gdnMge21vZGVsMn0iLAogICAgICAgICAgICAgICAgICAgIGYne21vZGVsMX1fYXVjJzogZmxvYXQoYXVjMSksCiAgICAgICAgICAgICAgICAgICAgZid7bW9kZWwxfV9jaV9sb3dlcic6IGZsb2F0KGNpMVswXSksCiAgICAgICAgICAgICAgICAgICAgZid7bW9kZWwxfV9jaV91cHBlcic6IGZsb2F0KGNpMVsxXSksCiAgICAgICAgICAgICAgICAgICAgZid7bW9kZWwyfV9hdWMnOiBmbG9hdChhdWMyKSwKICAgICAgICAgICAgICAgICAgICBmJ3ttb2RlbDJ9X2NpX2xvd2VyJzogZmxvYXQoY2kyWzBdKSwKICAgICAgICAgICAgICAgICAgICBmJ3ttb2RlbDJ9X2NpX3VwcGVyJzogZmxvYXQoY2kyWzFdKSwKICAgICAgICAgICAgICAgICAgICAncF92YWx1ZSc6IGZsb2F0KHBfdmFsdWUpLAogICAgICAgICAgICAgICAgICAgICdzaWduaWZpY2FudF9kaWZmZXJlbmNlJzogYm9vbChwX3ZhbHVlIDwgMC4wNSksCiAgICAgICAgICAgICAgICAgICAgJ2NvbmNsdXNpb24nOiBmInttb2RlbDF9IGFuZCB7bW9kZWwyfSBoYXZlIHNpZ25pZmljYW50bHkgZGlmZmVyZW50IEFVQ3MgKHA8MC4wNSkiIGlmIHBfdmFsdWUgPCAwLjA1IGVsc2UgZiJ7bW9kZWwxfSBhbmQge21vZGVsMn0gZG8gbm90IGhhdmUgc2lnbmlmaWNhbnRseSBkaWZmZXJlbnQgQVVDcyAocOKJpTAuMDUpIgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmVzdWx0cy5hcHBlbmQoY29tcGFyaXNvbl9yZXN1bHQpCiAgICAgICAgCiAgICAgICAgIyDovpPlh7rnu5PmnpwKICAgICAgICBwcmludCgiXG5EZUxvbmcgVGVzdCBSZXN1bHRzOiIpCiAgICAgICAgcHJpbnQoIj0iICogNTApCiAgICAgICAgZm9yIHJlc3VsdCBpbiByZXN1bHRzOgogICAgICAgICAgICBwcmludChmIlxue3Jlc3VsdFsnY29tcGFyaXNvbiddfSIpCiAgICAgICAgICAgIHByaW50KGYiUC12YWx1ZToge3Jlc3VsdFsncF92YWx1ZSddOi40Zn0iKQogICAgICAgICAgICBwcmludChmIkNvbmNsdXNpb246IHtyZXN1bHRbJ2NvbmNsdXNpb24nXX0iKQogICAgICAgICAgICBwcmludChmIkFVQ3Mgd2l0aCA5NSUgQ0k6IikKICAgICAgICAgICAgbW9kZWwxLCBtb2RlbDIgPSByZXN1bHRbJ2NvbXBhcmlzb24nXS5zcGxpdCgiIHZzICIpCiAgICAgICAgICAgIHByaW50KGYie21vZGVsMX06IHtyZXN1bHRbZid7bW9kZWwxfV9hdWMnXTouM2Z9ICh7cmVzdWx0W2Yne21vZGVsMX1fY2lfbG93ZXInXTouM2Z9LXtyZXN1bHRbZid7bW9kZWwxfV9jaV91cHBlciddOi4zZn0pIikKICAgICAgICAgICAgcHJpbnQoZiJ7bW9kZWwyfToge3Jlc3VsdFtmJ3ttb2RlbDJ9X2F1YyddOi4zZn0gKHtyZXN1bHRbZid7bW9kZWwyfV9jaV9sb3dlciddOi4zZn0te3Jlc3VsdFtmJ3ttb2RlbDJ9X2NpX3VwcGVyJ106LjNmfSkiKQogICAgICAgIAogICAgICAgICMg5L+d5a2Y57uT5p6cCiAgICAgICAgaWYgb3V0cHV0X2pzb246CiAgICAgICAgICAgIGltcG9ydCBqc29uCiAgICAgICAgICAgIG91dHB1dF9wYXRoID0gb3MucGF0aC5qb2luKHNlbGYub3V0cHV0X2Rpciwgb3V0cHV0X2pzb24pCiAgICAgICAgICAgIHdpdGggb3BlbihvdXRwdXRfcGF0aCwgJ3cnKSBhcyBmOgogICAgICAgICAgICAgICAganNvbi5kdW1wKHJlc3VsdHMsIGYsIGluZGVudD00KQogICAgICAgICAgICBwcmludChmIlxuUmVzdWx0cyBzYXZlZCB0byB7b3V0cHV0X3BhdGh9IikKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzdWx0cwogICAgCg==').decode())
