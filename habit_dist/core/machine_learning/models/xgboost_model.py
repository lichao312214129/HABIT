
import base64
exec(base64.b64decode(b'IiIiDQpYR0Jvb3N0IE1vZGVsDQoNCldyYXBwZXIgZm9yIFhHQm9vc3QgbW9kZWwNCiIiIg0KaW1wb3J0IHhnYm9vc3QgYXMgeGdiDQpmcm9tIHR5cGluZyBpbXBvcnQgRGljdCwgQW55LCBPcHRpb25hbCwgVW5pb24NCmltcG9ydCBudW1weSBhcyBucA0KaW1wb3J0IHBhbmRhcyBhcyBwZA0KZnJvbSAuYmFzZSBpbXBvcnQgQmFzZU1vZGVsDQpmcm9tIC5mYWN0b3J5IGltcG9ydCBNb2RlbEZhY3RvcnkNCg0KQE1vZGVsRmFjdG9yeS5yZWdpc3RlcignWEdCb29zdCcpDQpjbGFzcyBYR0Jvb3N0TW9kZWwoQmFzZU1vZGVsKToNCiAgICAiIiJXcmFwcGVyIGZvciBYR0Jvb3N0IG1vZGVsIiIiDQogICAgDQogICAgQHByb3BlcnR5DQogICAgZGVmIG1vZGVsX3R5cGUoc2VsZikgLT4gc3RyOg0KICAgICAgICAiIiINCiAgICAgICAgR2V0IHRoZSB0eXBlIG9mIHRoZSBtb2RlbA0KICAgICAgICANCiAgICAgICAgUmV0dXJuczoNCiAgICAgICAgICAgIHN0cjogTW9kZWwgdHlwZSAoJ3RyZWUnIGZvciBYR0Jvb3N0KQ0KICAgICAgICAiIiINCiAgICAgICAgcmV0dXJuICd0cmVlJw0KICAgIA0KICAgIGRlZiBfX2luaXRfXyhzZWxmLCBjb25maWc6IERpY3Rbc3RyLCBBbnldKToNCiAgICAgICAgIiIiDQogICAgICAgIEluaXRpYWxpemUgdGhlIG1vZGVsDQogICAgICAgIA0KICAgICAgICBBcmdzOg0KICAgICAgICAgICAgY29uZmlnOiBDb25maWd1cmF0aW9uIGRpY3Rpb25hcnkgd2l0aCBtb2RlbCBwYXJhbWV0ZXJzDQogICAgICAgICIiIg0KICAgICAgICBzdXBlcigpLl9faW5pdF9fKGNvbmZpZykNCiAgICAgICAgDQogICAgICAgICMgRXh0cmFjdCBwYXJhbWV0ZXJzIGZyb20gY29uZmlnDQogICAgICAgIHBhcmFtcyA9IGNvbmZpZy5nZXQoJ3BhcmFtcycsIHt9KQ0KICAgICAgICANCiAgICAgICAgIyBDcmVhdGUgbW9kZWwgd2l0aCBwYXJhbWV0ZXJzDQogICAgICAgIHNlbGYubW9kZWwgPSB4Z2IuWEdCQ2xhc3NpZmllcigNCiAgICAgICAgICAgIG5fZXN0aW1hdG9ycz1wYXJhbXMuZ2V0KCduX2VzdGltYXRvcnMnLCAxMDApLA0KICAgICAgICAgICAgbWF4X2RlcHRoPXBhcmFtcy5nZXQoJ21heF9kZXB0aCcsIDMpLA0KICAgICAgICAgICAgbGVhcm5pbmdfcmF0ZT1wYXJhbXMuZ2V0KCdsZWFybmluZ19yYXRlJywgMC4xKSwNCiAgICAgICAgICAgIHN1YnNhbXBsZT1wYXJhbXMuZ2V0KCdzdWJzYW1wbGUnLCAwLjgpLA0KICAgICAgICAgICAgY29sc2FtcGxlX2J5dHJlZT1wYXJhbXMuZ2V0KCdjb2xzYW1wbGVfYnl0cmVlJywgMC44KSwNCiAgICAgICAgICAgIG9iamVjdGl2ZT1wYXJhbXMuZ2V0KCdvYmplY3RpdmUnLCAnYmluYXJ5OmxvZ2lzdGljJyksDQogICAgICAgICAgICBldmFsX21ldHJpYz1wYXJhbXMuZ2V0KCdldmFsX21ldHJpYycsICdsb2dsb3NzJyksDQogICAgICAgICAgICByYW5kb21fc3RhdGU9cGFyYW1zLmdldCgncmFuZG9tX3N0YXRlJywgNDIpLA0KICAgICAgICAgICAgKip7azogdiBmb3IgaywgdiBpbiBwYXJhbXMuaXRlbXMoKSBpZiBrIG5vdCBpbiBbJ25fZXN0aW1hdG9ycycsICdtYXhfZGVwdGgnLCAnbGVhcm5pbmdfcmF0ZScsICdzdWJzYW1wbGUnLCAnY29sc2FtcGxlX2J5dHJlZScsICdvYmplY3RpdmUnLCAnZXZhbF9tZXRyaWMnLCAncmFuZG9tX3N0YXRlJ119DQogICAgICAgICkNCiAgICAgICAgDQogICAgZGVmIGZpdChzZWxmLCBYOiBVbmlvbltwZC5EYXRhRnJhbWUsIG5wLm5kYXJyYXldLCANCiAgICAgICAgICAgICB5OiBVbmlvbltwZC5TZXJpZXMsIG5wLm5kYXJyYXldKSAtPiBOb25lOg0KICAgICAgICAiIiINCiAgICAgICAgVHJhaW4gdGhlIG1vZGVsDQogICAgICAgIA0KICAgICAgICBBcmdzOg0KICAgICAgICAgICAgWDogVHJhaW5pbmcgZmVhdHVyZXMNCiAgICAgICAgICAgIHk6IFRyYWluaW5nIGxhYmVscw0KICAgICAgICAiIiINCiAgICAgICAgIyBTYXZlIGZlYXR1cmUgbmFtZXMgaWYgWCBpcyBhIERhdGFGcmFtZQ0KICAgICAgICBpZiBpc2luc3RhbmNlKFgsIHBkLkRhdGFGcmFtZSk6DQogICAgICAgICAgICBzZWxmLmZlYXR1cmVfbmFtZXMgPSBsaXN0KFguY29sdW1ucykNCiAgICAgICAgDQogICAgICAgICMgVHJhaW4gdGhlIG1vZGVsDQogICAgICAgIHNlbGYubW9kZWwuZml0KFgsIHkpDQogICAgICAgIA0KICAgIGRlZiBwcmVkaWN0KHNlbGYsIFg6IFVuaW9uW3BkLkRhdGFGcmFtZSwgbnAubmRhcnJheV0pIC0+IG5wLm5kYXJyYXk6DQogICAgICAgICIiIg0KICAgICAgICBNYWtlIHByZWRpY3Rpb25zDQogICAgICAgIA0KICAgICAgICBBcmdzOg0KICAgICAgICAgICAgWDogRmVhdHVyZXMNCiAgICAgICAgICAgIA0KICAgICAgICBSZXR1cm5zOg0KICAgICAgICAgICAgbnAubmRhcnJheTogUHJlZGljdGVkIGNsYXNzIGxhYmVscw0KICAgICAgICAiIiINCiAgICAgICAgaWYgc2VsZi5tb2RlbCBpcyBOb25lOg0KICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiTW9kZWwgbm90IHRyYWluZWQuIENhbGwgZml0KCkgZmlyc3QuIikNCiAgICAgICAgcmV0dXJuIHNlbGYubW9kZWwucHJlZGljdChYKQ0KICAgICAgICANCiAgICBkZWYgcHJlZGljdF9wcm9iYShzZWxmLCBYOiBVbmlvbltwZC5EYXRhRnJhbWUsIG5wLm5kYXJyYXldKSAtPiBucC5uZGFycmF5Og0KICAgICAgICAiIiINCiAgICAgICAgR2V0IHByZWRpY3Rpb24gcHJvYmFiaWxpdGllcw0KICAgICAgICANCiAgICAgICAgQXJnczoNCiAgICAgICAgICAgIFg6IEZlYXR1cmVzDQogICAgICAgICAgICANCiAgICAgICAgUmV0dXJuczoNCiAgICAgICAgICAgIG5wLm5kYXJyYXk6IFByZWRpY3RlZCBwcm9iYWJpbGl0aWVzIGZvciBwb3NpdGl2ZSBjbGFzcw0KICAgICAgICAiIiINCiAgICAgICAgaWYgc2VsZi5tb2RlbCBpcyBOb25lOg0KICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiTW9kZWwgbm90IHRyYWluZWQuIENhbGwgZml0KCkgZmlyc3QuIikNCiAgICAgICAgcmV0dXJuIHNlbGYubW9kZWwucHJlZGljdF9wcm9iYShYKQ0KICAgICAgICANCiAgICBkZWYgZ2V0X2ZlYXR1cmVfaW1wb3J0YW5jZShzZWxmKSAtPiBEaWN0W3N0ciwgZmxvYXRdOg0KICAgICAgICAiIiINCiAgICAgICAgR2V0IGZlYXR1cmUgaW1wb3J0YW5jZSBzY29yZXMNCiAgICAgICAgDQogICAgICAgIFJldHVybnM6DQogICAgICAgICAgICBEaWN0W3N0ciwgZmxvYXRdOiBGZWF0dXJlIGltcG9ydGFuY2Ugc2NvcmVzDQogICAgICAgICIiIg0KICAgICAgICBpZiBzZWxmLm1vZGVsIGlzIE5vbmU6DQogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJNb2RlbCBub3QgdHJhaW5lZC4gQ2FsbCBmaXQoKSBmaXJzdC4iKQ0KICAgICAgICAgICAgDQogICAgICAgIGlmIG5vdCBoYXNhdHRyKHNlbGYubW9kZWwsICdmZWF0dXJlX2ltcG9ydGFuY2VzXycpOg0KICAgICAgICAgICAgcmV0dXJuIHt9DQogICAgICAgICAgICANCiAgICAgICAgIyBHZXQgZmVhdHVyZSBuYW1lcw0KICAgICAgICBmZWF0dXJlX25hbWVzID0gc2VsZi5mZWF0dXJlX25hbWVzIG9yIFtmImZlYXR1cmVfe2l9IiBmb3IgaSBpbiByYW5nZShsZW4oc2VsZi5tb2RlbC5mZWF0dXJlX2ltcG9ydGFuY2VzXykpXQ0KICAgICAgICANCiAgICAgICAgIyBHZXQgZmVhdHVyZSBpbXBvcnRhbmNlcw0KICAgICAgICBpbXBvcnRhbmNlcyA9IHNlbGYubW9kZWwuZmVhdHVyZV9pbXBvcnRhbmNlc18NCiAgICAgICAgDQogICAgICAgICMgUmV0dXJuIGFzIGRpY3Rpb25hcnkNCiAgICAgICAgcmV0dXJuIGRpY3QoemlwKGZlYXR1cmVfbmFtZXMsIGltcG9ydGFuY2VzKSkgDQoNCg==').decode())
