
import base64
exec(base64.b64decode(b'IiIiDQpCYXNlIE1vZGVsDQoNCkFic3RyYWN0IGJhc2UgY2xhc3MgZm9yIGFsbCBtb2RlbHMsIGRlZmluaW5nIGNvbW1vbiBpbnRlcmZhY2UNCiIiIg0KZnJvbSBhYmMgaW1wb3J0IEFCQywgYWJzdHJhY3RtZXRob2QNCmZyb20gdHlwaW5nIGltcG9ydCBEaWN0LCBMaXN0LCBBbnksIE9wdGlvbmFsLCBVbmlvbiwgVHVwbGUNCmltcG9ydCBudW1weSBhcyBucA0KaW1wb3J0IHBhbmRhcyBhcyBwZA0KDQpjbGFzcyBCYXNlTW9kZWwoQUJDKToNCiAgICAiIiJBYnN0cmFjdCBiYXNlIGNsYXNzIGZvciBhbGwgbW9kZWxzIiIiDQogICAgDQogICAgQHByb3BlcnR5DQogICAgQGFic3RyYWN0bWV0aG9kDQogICAgZGVmIG1vZGVsX3R5cGUoc2VsZikgLT4gc3RyOg0KICAgICAgICAiIiINCiAgICAgICAgR2V0IHRoZSB0eXBlIG9mIHRoZSBtb2RlbA0KICAgICAgICANCiAgICAgICAgUmV0dXJuczoNCiAgICAgICAgICAgIHN0cjogTW9kZWwgdHlwZSAoJ3RyZWUnLCAnbGluZWFyJywgb3Igb3RoZXIpDQogICAgICAgICIiIg0KICAgICAgICBwYXNzDQogICAgDQogICAgZGVmIF9faW5pdF9fKHNlbGYsIGNvbmZpZzogRGljdFtzdHIsIEFueV0pOg0KICAgICAgICAiIiINCiAgICAgICAgSW5pdGlhbGl6ZSB0aGUgbW9kZWwgd2l0aCBjb25maWd1cmF0aW9uDQogICAgICAgIA0KICAgICAgICBBcmdzOg0KICAgICAgICAgICAgY29uZmlnOiBDb25maWd1cmF0aW9uIGRpY3Rpb25hcnkgd2l0aCBtb2RlbCBwYXJhbWV0ZXJzDQogICAgICAgICIiIg0KICAgICAgICBzZWxmLmNvbmZpZyA9IGNvbmZpZw0KICAgICAgICBzZWxmLm1vZGVsID0gTm9uZQ0KICAgICAgICBzZWxmLmZlYXR1cmVfbmFtZXMgPSBOb25lDQogICAgICAgIA0KICAgIEBhYnN0cmFjdG1ldGhvZA0KICAgIGRlZiBmaXQoc2VsZiwgWDogVW5pb25bcGQuRGF0YUZyYW1lLCBucC5uZGFycmF5XSwgDQogICAgICAgICAgICAgeTogVW5pb25bcGQuU2VyaWVzLCBucC5uZGFycmF5XSkgLT4gTm9uZToNCiAgICAgICAgIiIiDQogICAgICAgIFRyYWluIHRoZSBtb2RlbA0KICAgICAgICANCiAgICAgICAgQXJnczoNCiAgICAgICAgICAgIFg6IFRyYWluaW5nIGZlYXR1cmVzDQogICAgICAgICAgICB5OiBUcmFpbmluZyBsYWJlbHMNCiAgICAgICAgIiIiDQogICAgICAgIHBhc3MNCiAgICAgICAgDQogICAgQGFic3RyYWN0bWV0aG9kDQogICAgZGVmIHByZWRpY3Qoc2VsZiwgWDogVW5pb25bcGQuRGF0YUZyYW1lLCBucC5uZGFycmF5XSkgLT4gbnAubmRhcnJheToNCiAgICAgICAgIiIiDQogICAgICAgIE1ha2UgcHJlZGljdGlvbnMNCiAgICAgICAgDQogICAgICAgIEFyZ3M6DQogICAgICAgICAgICBYOiBGZWF0dXJlcw0KICAgICAgICAgICAgDQogICAgICAgIFJldHVybnM6DQogICAgICAgICAgICBucC5uZGFycmF5OiBQcmVkaWN0ZWQgY2xhc3MgbGFiZWxzDQogICAgICAgICIiIg0KICAgICAgICBwYXNzDQogICAgICAgIA0KICAgIEBhYnN0cmFjdG1ldGhvZA0KICAgIGRlZiBwcmVkaWN0X3Byb2JhKHNlbGYsIFg6IFVuaW9uW3BkLkRhdGFGcmFtZSwgbnAubmRhcnJheV0pIC0+IG5wLm5kYXJyYXk6DQogICAgICAgICIiIg0KICAgICAgICBHZXQgcHJlZGljdGlvbiBwcm9iYWJpbGl0aWVzDQogICAgICAgIA0KICAgICAgICBBcmdzOg0KICAgICAgICAgICAgWDogRmVhdHVyZXMNCiAgICAgICAgICAgIA0KICAgICAgICBSZXR1cm5zOg0KICAgICAgICAgICAgbnAubmRhcnJheTogUHJlZGljdGVkIHByb2JhYmlsaXRpZXMgZm9yIHBvc2l0aXZlIGNsYXNzDQogICAgICAgICIiIg0KICAgICAgICBwYXNzDQogICAgICAgIA0KICAgIEBhYnN0cmFjdG1ldGhvZA0KICAgIGRlZiBnZXRfZmVhdHVyZV9pbXBvcnRhbmNlKHNlbGYpIC0+IERpY3Rbc3RyLCBmbG9hdF06DQogICAgICAgICIiIg0KICAgICAgICBHZXQgZmVhdHVyZSBpbXBvcnRhbmNlIHNjb3Jlcw0KICAgICAgICANCiAgICAgICAgUmV0dXJuczoNCiAgICAgICAgICAgIERpY3Rbc3RyLCBmbG9hdF06IEZlYXR1cmUgaW1wb3J0YW5jZSBzY29yZXMNCiAgICAgICAgIiIiDQogICAgICAgIHBhc3MNCiAgICAgICAgDQogICAgZGVmIGdldF9tb2RlbChzZWxmKToNCiAgICAgICAgIiIiDQogICAgICAgIEdldCB0aGUgdW5kZXJseWluZyBtb2RlbCBpbnN0YW5jZQ0KICAgICAgICANCiAgICAgICAgUmV0dXJuczoNCiAgICAgICAgICAgIFRoZSB1bmRlcmx5aW5nIG1vZGVsIG9iamVjdCAoZS5nLiwgc2tsZWFybiBlc3RpbWF0b3IpDQogICAgICAgICIiIg0KICAgICAgICByZXR1cm4gc2VsZi5tb2RlbA0KICAgICAgICANCiAgICBkZWYgc2F2ZShzZWxmLCBmaWxlcGF0aDogc3RyKSAtPiBOb25lOg0KICAgICAgICAiIiINCiAgICAgICAgU2F2ZSBtb2RlbCB0byBmaWxlDQogICAgICAgIA0KICAgICAgICBBcmdzOg0KICAgICAgICAgICAgZmlsZXBhdGg6IFBhdGggdG8gc2F2ZSBtb2RlbA0KICAgICAgICAiIiINCiAgICAgICAgaW1wb3J0IHBpY2tsZQ0KICAgICAgICB3aXRoIG9wZW4oZmlsZXBhdGgsICd3YicpIGFzIGY6DQogICAgICAgICAgICBwaWNrbGUuZHVtcChzZWxmLCBmKQ0KICAgICAgICAgICAgDQogICAgQGNsYXNzbWV0aG9kDQogICAgZGVmIGxvYWQoY2xzLCBmaWxlcGF0aDogc3RyKSAtPiAnQmFzZU1vZGVsJzoNCiAgICAgICAgIiIiDQogICAgICAgIExvYWQgbW9kZWwgZnJvbSBmaWxlDQogICAgICAgIA0KICAgICAgICBBcmdzOg0KICAgICAgICAgICAgZmlsZXBhdGg6IFBhdGggdG8gbG9hZCBtb2RlbCBmcm9tDQogICAgICAgICAgICANCiAgICAgICAgUmV0dXJuczoNCiAgICAgICAgICAgIEJhc2VNb2RlbDogTG9hZGVkIG1vZGVsDQogICAgICAgICIiIg0KICAgICAgICBpbXBvcnQgcGlja2xlDQogICAgICAgIHdpdGggb3BlbihmaWxlcGF0aCwgJ3JiJykgYXMgZjoNCiAgICAgICAgICAgIHJldHVybiBwaWNrbGUubG9hZChmKSA=').decode())
